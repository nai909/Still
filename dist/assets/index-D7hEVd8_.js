const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./web-B1EA2m8g.js","./vendor-wGySg1uH.js","./three-Bc_KXb9g.js"])))=>i.map(i=>d[i]);
import{r as Ce,a as ts,R as et}from"./vendor-wGySg1uH.js";import{E as ns,V as g,M as ao,T as so,S as va,Q as Ma,a as cn,R as os,P as Ya,b as ta,c as De,O as as,B as He,F as Lo,d as ho,U as na,W as Do,H as Bo,N as ss,C as An,e as yn,A as Xn,f as Le,g as Pn,h as rs,i as Tn,j as gn,k as xn,l as bn,G as Fe,m as Un,n as Sn,o as zn,p as en,q as Cn,r as kn,s as Rn,L as Ht,t as rt,u as Fo,v as Uo,D as ro,w as Ca,x as On,y as Pa,z as is,I as Vo,J as ko,K as Ta,X as Ro,Y as _o,Z as Ao,_ as Sa,$ as Jo,a0 as Ea,a1 as hs,a2 as ka,a3 as ls,a4 as cs}from"./three-Bc_KXb9g.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const z of document.querySelectorAll('link[rel="modulepreload"]'))n(z);new MutationObserver(z=>{for(const N of z)if(N.type==="childList")for(const ve of N.addedNodes)ve.tagName==="LINK"&&ve.rel==="modulepreload"&&n(ve)}).observe(document,{childList:!0,subtree:!0});function o(z){const N={};return z.integrity&&(N.integrity=z.integrity),z.referrerPolicy&&(N.referrerPolicy=z.referrerPolicy),z.crossOrigin==="use-credentials"?N.credentials="include":z.crossOrigin==="anonymous"?N.credentials="omit":N.credentials="same-origin",N}function n(z){if(z.ep)return;z.ep=!0;const N=o(z);fetch(z.href,N)}})();var Oa={exports:{}},Go={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var us=Ce,ds=Symbol.for("react.element"),ms=Symbol.for("react.fragment"),ps=Object.prototype.hasOwnProperty,fs=us.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ys={key:!0,ref:!0,__self:!0,__source:!0};function $a(t,e,o){var n,z={},N=null,ve=null;o!==void 0&&(N=""+o),e.key!==void 0&&(N=""+e.key),e.ref!==void 0&&(ve=e.ref);for(n in e)ps.call(e,n)&&!ys.hasOwnProperty(n)&&(z[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)z[n]===void 0&&(z[n]=e[n]);return{$$typeof:ds,type:t,key:N,ref:ve,props:z,_owner:fs.current}}Go.Fragment=ms;Go.jsx=$a;Go.jsxs=$a;Oa.exports=Go;var I=Oa.exports,oa={},Ra=ts;oa.createRoot=Ra.createRoot,oa.hydrateRoot=Ra.hydrateRoot;/*! Capacitor: https://capacitorjs.com/ - MIT License */const ws=t=>{const e=new Map;e.set("web",{name:"web"});const o=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},n=(N,ve)=>{o.platforms.set(N,ve)},z=N=>{o.platforms.has(N)&&(o.currentPlatform=o.platforms.get(N))};return o.addPlatform=n,o.setPlatform=z,o},gs=t=>t.CapacitorPlatforms=ws(t),qa=gs(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});qa.addPlatform;qa.setPlatform;var lo;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(lo||(lo={}));class Ko extends Error{constructor(e,o,n){super(e),this.message=e,this.code=o,this.data=n}}const xs=t=>{var e,o;return t!=null&&t.androidBridge?"android":!((o=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||o===void 0)&&o.bridge?"ios":"web"},bs=t=>{var e,o,n,z,N;const ve=t.CapacitorCustomPlatform||null,Q=t.Capacitor||{},S=Q.Plugins=Q.Plugins||{},we=t.CapacitorPlatforms,ut=()=>ve!==null?ve.name:xs(t),ne=((e=we==null?void 0:we.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||ut,jt=()=>ne()!=="web",Dt=((o=we==null?void 0:we.currentPlatform)===null||o===void 0?void 0:o.isNativePlatform)||jt,Gt=at=>{const Z=Ye.get(at);return!!(Z!=null&&Z.platforms.has(ne())||gt(at))},bt=((n=we==null?void 0:we.currentPlatform)===null||n===void 0?void 0:n.isPluginAvailable)||Gt,ht=at=>{var Z;return(Z=Q.PluginHeaders)===null||Z===void 0?void 0:Z.find(qe=>qe.name===at)},gt=((z=we==null?void 0:we.currentPlatform)===null||z===void 0?void 0:z.getPluginHeader)||ht,yt=at=>t.console.error(at),tt=(at,Z,qe)=>Promise.reject(`${qe} does not have an implementation of "${Z}".`),Ye=new Map,Rt=(at,Z={})=>{const qe=Ye.get(at);if(qe)return console.warn(`Capacitor plugin "${at}" already registered. Cannot register plugins twice.`),qe.proxy;const Ot=ne(),pe=gt(at);let re;const Ee=async()=>(!re&&Ot in Z?re=typeof Z[Ot]=="function"?re=await Z[Ot]():re=Z[Ot]:ve!==null&&!re&&"web"in Z&&(re=typeof Z.web=="function"?re=await Z.web():re=Z.web),re),oe=(vt,d)=>{var Ie,P;if(pe){const Y=pe==null?void 0:pe.methods.find(ke=>d===ke.name);if(Y)return Y.rtype==="promise"?ke=>Q.nativePromise(at,d.toString(),ke):(ke,H)=>Q.nativeCallback(at,d.toString(),ke,H);if(vt)return(Ie=vt[d])===null||Ie===void 0?void 0:Ie.bind(vt)}else{if(vt)return(P=vt[d])===null||P===void 0?void 0:P.bind(vt);throw new Ko(`"${at}" plugin is not implemented on ${Ot}`,lo.Unimplemented)}},ge=vt=>{let d;const Ie=(...P)=>{const Y=Ee().then(ke=>{const H=oe(ke,vt);if(H){const V=H(...P);return d=V==null?void 0:V.remove,V}else throw new Ko(`"${at}.${vt}()" is not implemented on ${Ot}`,lo.Unimplemented)});return vt==="addListener"&&(Y.remove=async()=>d()),Y};return Ie.toString=()=>`${vt.toString()}() { [capacitor code] }`,Object.defineProperty(Ie,"name",{value:vt,writable:!1,configurable:!1}),Ie},Oe=ge("addListener"),$t=ge("removeListener"),ct=(vt,d)=>{const Ie=Oe({eventName:vt},d),P=async()=>{const ke=await Ie;$t({eventName:vt,callbackId:ke},d)},Y=new Promise(ke=>Ie.then(()=>ke({remove:P})));return Y.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await P()},Y},Tt=new Proxy({},{get(vt,d){switch(d){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return pe?ct:Oe;case"removeListener":return $t;default:return ge(d)}}});return S[at]=Tt,Ye.set(at,{name:at,proxy:Tt,platforms:new Set([...Object.keys(Z),...pe?[Ot]:[]])}),Tt},St=((N=we==null?void 0:we.currentPlatform)===null||N===void 0?void 0:N.registerPlugin)||Rt;return Q.convertFileSrc||(Q.convertFileSrc=at=>at),Q.getPlatform=ne,Q.handleError=yt,Q.isNativePlatform=Dt,Q.isPluginAvailable=bt,Q.pluginMethodNoop=tt,Q.registerPlugin=St,Q.Exception=Ko,Q.DEBUG=!!Q.DEBUG,Q.isLoggingEnabled=!!Q.isLoggingEnabled,Q.platform=Q.getPlatform(),Q.isNative=Q.isNativePlatform(),Q},vs=t=>t.Capacitor=bs(t),co=vs(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),ra=co.registerPlugin;co.Plugins;class Na{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,o){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(o);const N=this.windowListeners[e];N&&!N.registered&&this.addWindowListener(N),n&&this.sendRetainedArgumentsForEvent(e);const ve=async()=>this.removeListener(e,o);return Promise.resolve({remove:ve})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,o,n){const z=this.listeners[e];if(!z){if(n){let N=this.retainedEventArguments[e];N||(N=[]),N.push(o),this.retainedEventArguments[e]=N}return}z.forEach(N=>N(o))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,o){this.windowListeners[o]={registered:!1,windowEventName:e,pluginEventName:o,handler:n=>{this.notifyListeners(o,n)}}}unimplemented(e="not implemented"){return new co.Exception(e,lo.Unimplemented)}unavailable(e="not available"){return new co.Exception(e,lo.Unavailable)}async removeListener(e,o){const n=this.listeners[e];if(!n)return;const z=n.indexOf(o);this.listeners[e].splice(z,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const o=this.retainedEventArguments[e];o&&(delete this.retainedEventArguments[e],o.forEach(n=>{this.notifyListeners(e,n)}))}}const Aa=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Ia=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Ms extends Na{async getCookies(){const e=document.cookie,o={};return e.split(";").forEach(n=>{if(n.length<=0)return;let[z,N]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");z=Ia(z).trim(),N=Ia(N).trim(),o[z]=N}),o}async setCookie(e){try{const o=Aa(e.key),n=Aa(e.value),z=`; expires=${(e.expires||"").replace("expires=","")}`,N=(e.path||"/").replace("path=",""),ve=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${o}=${n||""}${z}; path=${N}; ${ve};`}catch(o){return Promise.reject(o)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(o){return Promise.reject(o)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const o of e)document.cookie=o.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}ra("CapacitorCookies",{web:()=>new Ms});const Cs=async t=>new Promise((e,o)=>{const n=new FileReader;n.onload=()=>{const z=n.result;e(z.indexOf(",")>=0?z.split(",")[1]:z)},n.onerror=z=>o(z),n.readAsDataURL(t)}),Ps=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(z=>z.toLocaleLowerCase()).reduce((z,N,ve)=>(z[N]=t[e[ve]],z),{})},Ts=(t,e=!0)=>t?Object.entries(t).reduce((n,z)=>{const[N,ve]=z;let Q,S;return Array.isArray(ve)?(S="",ve.forEach(we=>{Q=e?encodeURIComponent(we):we,S+=`${N}=${Q}&`}),S.slice(0,-1)):(Q=e?encodeURIComponent(ve):ve,S=`${N}=${Q}`),`${n}&${S}`},"").substr(1):null,Ss=(t,e={})=>{const o=Object.assign({method:t.method||"GET",headers:t.headers},e),z=Ps(t.headers)["content-type"]||"";if(typeof t.data=="string")o.body=t.data;else if(z.includes("application/x-www-form-urlencoded")){const N=new URLSearchParams;for(const[ve,Q]of Object.entries(t.data||{}))N.set(ve,Q);o.body=N.toString()}else if(z.includes("multipart/form-data")||t.data instanceof FormData){const N=new FormData;if(t.data instanceof FormData)t.data.forEach((Q,S)=>{N.append(S,Q)});else for(const Q of Object.keys(t.data))N.append(Q,t.data[Q]);o.body=N;const ve=new Headers(o.headers);ve.delete("content-type"),o.headers=ve}else(z.includes("application/json")||typeof t.data=="object")&&(o.body=JSON.stringify(t.data));return o};class Es extends Na{async request(e){const o=Ss(e,e.webFetchExtra),n=Ts(e.params,e.shouldEncodeUrlParams),z=n?`${e.url}?${n}`:e.url,N=await fetch(z,o),ve=N.headers.get("content-type")||"";let{responseType:Q="text"}=N.ok?e:{};ve.includes("application/json")&&(Q="json");let S,we;switch(Q){case"arraybuffer":case"blob":we=await N.blob(),S=await Cs(we);break;case"json":S=await N.json();break;case"document":case"text":default:S=await N.text()}const ut={};return N.headers.forEach((ne,jt)=>{ut[jt]=ne}),{data:S,headers:ut,status:N.status,url:N.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}ra("CapacitorHttp",{web:()=>new Es});const ks="modulepreload",Rs=function(t,e){return new URL(t,e).href},za={},As=function(e,o,n){let z=Promise.resolve();if(o&&o.length>0){const ve=document.getElementsByTagName("link"),Q=document.querySelector("meta[property=csp-nonce]"),S=(Q==null?void 0:Q.nonce)||(Q==null?void 0:Q.getAttribute("nonce"));z=Promise.allSettled(o.map(we=>{if(we=Rs(we,n),we in za)return;za[we]=!0;const ut=we.endsWith(".css"),ne=ut?'[rel="stylesheet"]':"";if(!!n)for(let Gt=ve.length-1;Gt>=0;Gt--){const bt=ve[Gt];if(bt.href===we&&(!ut||bt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${we}"]${ne}`))return;const Dt=document.createElement("link");if(Dt.rel=ut?"stylesheet":ks,ut||(Dt.as="script"),Dt.crossOrigin="",Dt.href=we,S&&Dt.setAttribute("nonce",S),document.head.appendChild(Dt),ut)return new Promise((Gt,bt)=>{Dt.addEventListener("load",Gt),Dt.addEventListener("error",()=>bt(new Error(`Unable to preload CSS for ${we}`)))})}))}function N(ve){const Q=new Event("vite:preloadError",{cancelable:!0});if(Q.payload=ve,window.dispatchEvent(Q),!Q.defaultPrevented)throw ve}return z.then(ve=>{for(const Q of ve||[])Q.status==="rejected"&&N(Q.reason);return e().catch(N)})};var jn;(function(t){t.Heavy="HEAVY",t.Medium="MEDIUM",t.Light="LIGHT"})(jn||(jn={}));var aa;(function(t){t.Success="SUCCESS",t.Warning="WARNING",t.Error="ERROR"})(aa||(aa={}));const Ln=ra("Haptics",{web:()=>As(()=>import("./web-B1EA2m8g.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(t=>new t.HapticsWeb)}),Da={type:"change"},Zo={type:"start"},Ba={type:"end"},Io=new os,Fa=new Ya,Is=Math.cos(70*ta.DEG2RAD);class Qo extends ns{constructor(e,o){super(),this.object=e,this.domElement=o,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new g,this.cursor=new g,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:ao.ROTATE,MIDDLE:ao.DOLLY,RIGHT:ao.PAN},this.touches={ONE:so.ROTATE,TWO:so.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return Q.phi},this.getAzimuthalAngle=function(){return Q.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(A){A.addEventListener("keydown",sn),this._domElementKeyEvents=A},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",sn),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(Da),n.update(),N=z.NONE},this.update=function(){const A=new g,h=new Ma().setFromUnitVectors(e.up,new g(0,1,0)),f=h.clone().invert(),a=new g,b=new Ma,R=new g,w=2*Math.PI;return function(K=null){const te=n.object.position;A.copy(te).sub(n.target),A.applyQuaternion(h),Q.setFromVector3(A),n.autoRotate&&N===z.NONE&&re(Ot(K)),n.enableDamping?(Q.theta+=S.theta*n.dampingFactor,Q.phi+=S.phi*n.dampingFactor):(Q.theta+=S.theta,Q.phi+=S.phi);let ae=n.minAzimuthAngle,p=n.maxAzimuthAngle;isFinite(ae)&&isFinite(p)&&(ae<-Math.PI?ae+=w:ae>Math.PI&&(ae-=w),p<-Math.PI?p+=w:p>Math.PI&&(p-=w),ae<=p?Q.theta=Math.max(ae,Math.min(p,Q.theta)):Q.theta=Q.theta>(ae+p)/2?Math.max(ae,Q.theta):Math.min(p,Q.theta)),Q.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,Q.phi)),Q.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(ut,n.dampingFactor):n.target.add(ut),n.target.sub(n.cursor),n.target.clampLength(n.minTargetRadius,n.maxTargetRadius),n.target.add(n.cursor),n.zoomToCursor&&St||n.object.isOrthographicCamera?Q.radius=vt(Q.radius):Q.radius=vt(Q.radius*we),A.setFromSpherical(Q),A.applyQuaternion(f),te.copy(n.target).add(A),n.object.lookAt(n.target),n.enableDamping===!0?(S.theta*=1-n.dampingFactor,S.phi*=1-n.dampingFactor,ut.multiplyScalar(1-n.dampingFactor)):(S.set(0,0,0),ut.set(0,0,0));let x=!1;if(n.zoomToCursor&&St){let G=null;if(n.object.isPerspectiveCamera){const B=A.length();G=vt(B*we);const F=B-G;n.object.position.addScaledVector(Ye,F),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const B=new g(Rt.x,Rt.y,0);B.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/we)),n.object.updateProjectionMatrix(),x=!0;const F=new g(Rt.x,Rt.y,0);F.unproject(n.object),n.object.position.sub(F).add(B),n.object.updateMatrixWorld(),G=A.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;G!==null&&(this.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(G).add(n.object.position):(Io.origin.copy(n.object.position),Io.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Io.direction))<Is?e.lookAt(n.target):(Fa.setFromNormalAndCoplanarPoint(n.object.up,n.target),Io.intersectPlane(Fa,n.target))))}else n.object.isOrthographicCamera&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/we)),n.object.updateProjectionMatrix(),x=!0);return we=1,St=!1,x||a.distanceToSquared(n.object.position)>ve||8*(1-b.dot(n.object.quaternion))>ve||R.distanceToSquared(n.target)>0?(n.dispatchEvent(Da),a.copy(n.object.position),b.copy(n.object.quaternion),R.copy(n.target),!0):!1}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",Mn),n.domElement.removeEventListener("pointerdown",We),n.domElement.removeEventListener("pointercancel",Be),n.domElement.removeEventListener("wheel",on),n.domElement.removeEventListener("pointermove",_e),n.domElement.removeEventListener("pointerup",Be),n._domElementKeyEvents!==null&&(n._domElementKeyEvents.removeEventListener("keydown",sn),n._domElementKeyEvents=null)};const n=this,z={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let N=z.NONE;const ve=1e-6,Q=new va,S=new va;let we=1;const ut=new g,ne=new cn,jt=new cn,Dt=new cn,Gt=new cn,bt=new cn,ht=new cn,gt=new cn,yt=new cn,tt=new cn,Ye=new g,Rt=new cn;let St=!1;const at=[],Z={};let qe=!1;function Ot(A){return A!==null?2*Math.PI/60*n.autoRotateSpeed*A:2*Math.PI/60/60*n.autoRotateSpeed}function pe(A){const h=Math.abs(A*.01);return Math.pow(.95,n.zoomSpeed*h)}function re(A){S.theta-=A}function Ee(A){S.phi-=A}const oe=function(){const A=new g;return function(f,a){A.setFromMatrixColumn(a,0),A.multiplyScalar(-f),ut.add(A)}}(),ge=function(){const A=new g;return function(f,a){n.screenSpacePanning===!0?A.setFromMatrixColumn(a,1):(A.setFromMatrixColumn(a,0),A.crossVectors(n.object.up,A)),A.multiplyScalar(f),ut.add(A)}}(),Oe=function(){const A=new g;return function(f,a){const b=n.domElement;if(n.object.isPerspectiveCamera){const R=n.object.position;A.copy(R).sub(n.target);let w=A.length();w*=Math.tan(n.object.fov/2*Math.PI/180),oe(2*f*w/b.clientHeight,n.object.matrix),ge(2*a*w/b.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(oe(f*(n.object.right-n.object.left)/n.object.zoom/b.clientWidth,n.object.matrix),ge(a*(n.object.top-n.object.bottom)/n.object.zoom/b.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function $t(A){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?we/=A:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function ct(A){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?we*=A:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Tt(A,h){if(!n.zoomToCursor)return;St=!0;const f=n.domElement.getBoundingClientRect(),a=A-f.left,b=h-f.top,R=f.width,w=f.height;Rt.x=a/R*2-1,Rt.y=-(b/w)*2+1,Ye.set(Rt.x,Rt.y,1).unproject(n.object).sub(n.object.position).normalize()}function vt(A){return Math.max(n.minDistance,Math.min(n.maxDistance,A))}function d(A){ne.set(A.clientX,A.clientY)}function Ie(A){Tt(A.clientX,A.clientX),gt.set(A.clientX,A.clientY)}function P(A){Gt.set(A.clientX,A.clientY)}function Y(A){jt.set(A.clientX,A.clientY),Dt.subVectors(jt,ne).multiplyScalar(n.rotateSpeed);const h=n.domElement;re(2*Math.PI*Dt.x/h.clientHeight),Ee(2*Math.PI*Dt.y/h.clientHeight),ne.copy(jt),n.update()}function ke(A){yt.set(A.clientX,A.clientY),tt.subVectors(yt,gt),tt.y>0?$t(pe(tt.y)):tt.y<0&&ct(pe(tt.y)),gt.copy(yt),n.update()}function H(A){bt.set(A.clientX,A.clientY),ht.subVectors(bt,Gt).multiplyScalar(n.panSpeed),Oe(ht.x,ht.y),Gt.copy(bt),n.update()}function V(A){Tt(A.clientX,A.clientY),A.deltaY<0?ct(pe(A.deltaY)):A.deltaY>0&&$t(pe(A.deltaY)),n.update()}function Ae(A){let h=!1;switch(A.code){case n.keys.UP:A.ctrlKey||A.metaKey||A.shiftKey?Ee(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Oe(0,n.keyPanSpeed),h=!0;break;case n.keys.BOTTOM:A.ctrlKey||A.metaKey||A.shiftKey?Ee(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Oe(0,-n.keyPanSpeed),h=!0;break;case n.keys.LEFT:A.ctrlKey||A.metaKey||A.shiftKey?re(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Oe(n.keyPanSpeed,0),h=!0;break;case n.keys.RIGHT:A.ctrlKey||A.metaKey||A.shiftKey?re(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Oe(-n.keyPanSpeed,0),h=!0;break}h&&(A.preventDefault(),n.update())}function ee(A){if(at.length===1)ne.set(A.pageX,A.pageY);else{const h=Qt(A),f=.5*(A.pageX+h.x),a=.5*(A.pageY+h.y);ne.set(f,a)}}function he(A){if(at.length===1)Gt.set(A.pageX,A.pageY);else{const h=Qt(A),f=.5*(A.pageX+h.x),a=.5*(A.pageY+h.y);Gt.set(f,a)}}function Me(A){const h=Qt(A),f=A.pageX-h.x,a=A.pageY-h.y,b=Math.sqrt(f*f+a*a);gt.set(0,b)}function nt(A){n.enableZoom&&Me(A),n.enablePan&&he(A)}function Ze(A){n.enableZoom&&Me(A),n.enableRotate&&ee(A)}function xe(A){if(at.length==1)jt.set(A.pageX,A.pageY);else{const f=Qt(A),a=.5*(A.pageX+f.x),b=.5*(A.pageY+f.y);jt.set(a,b)}Dt.subVectors(jt,ne).multiplyScalar(n.rotateSpeed);const h=n.domElement;re(2*Math.PI*Dt.x/h.clientHeight),Ee(2*Math.PI*Dt.y/h.clientHeight),ne.copy(jt)}function Et(A){if(at.length===1)bt.set(A.pageX,A.pageY);else{const h=Qt(A),f=.5*(A.pageX+h.x),a=.5*(A.pageY+h.y);bt.set(f,a)}ht.subVectors(bt,Gt).multiplyScalar(n.panSpeed),Oe(ht.x,ht.y),Gt.copy(bt)}function je(A){const h=Qt(A),f=A.pageX-h.x,a=A.pageY-h.y,b=Math.sqrt(f*f+a*a);yt.set(0,b),tt.set(0,Math.pow(yt.y/gt.y,n.zoomSpeed)),$t(tt.y),gt.copy(yt);const R=(A.pageX+h.x)*.5,w=(A.pageY+h.y)*.5;Tt(R,w)}function ue(A){n.enableZoom&&je(A),n.enablePan&&Et(A)}function ie(A){n.enableZoom&&je(A),n.enableRotate&&xe(A)}function We(A){n.enabled!==!1&&(at.length===0&&(n.domElement.setPointerCapture(A.pointerId),n.domElement.addEventListener("pointermove",_e),n.domElement.addEventListener("pointerup",Be)),pn(A),A.pointerType==="touch"?ln(A):At(A))}function _e(A){n.enabled!==!1&&(A.pointerType==="touch"?rn(A):Bt(A))}function Be(A){wn(A),at.length===0&&(n.domElement.releasePointerCapture(A.pointerId),n.domElement.removeEventListener("pointermove",_e),n.domElement.removeEventListener("pointerup",Be)),n.dispatchEvent(Ba),N=z.NONE}function At(A){let h;switch(A.button){case 0:h=n.mouseButtons.LEFT;break;case 1:h=n.mouseButtons.MIDDLE;break;case 2:h=n.mouseButtons.RIGHT;break;default:h=-1}switch(h){case ao.DOLLY:if(n.enableZoom===!1)return;Ie(A),N=z.DOLLY;break;case ao.ROTATE:if(A.ctrlKey||A.metaKey||A.shiftKey){if(n.enablePan===!1)return;P(A),N=z.PAN}else{if(n.enableRotate===!1)return;d(A),N=z.ROTATE}break;case ao.PAN:if(A.ctrlKey||A.metaKey||A.shiftKey){if(n.enableRotate===!1)return;d(A),N=z.ROTATE}else{if(n.enablePan===!1)return;P(A),N=z.PAN}break;default:N=z.NONE}N!==z.NONE&&n.dispatchEvent(Zo)}function Bt(A){switch(N){case z.ROTATE:if(n.enableRotate===!1)return;Y(A);break;case z.DOLLY:if(n.enableZoom===!1)return;ke(A);break;case z.PAN:if(n.enablePan===!1)return;H(A);break}}function on(A){n.enabled===!1||n.enableZoom===!1||N!==z.NONE||(A.preventDefault(),n.dispatchEvent(Zo),V(an(A)),n.dispatchEvent(Ba))}function an(A){const h=A.deltaMode,f={clientX:A.clientX,clientY:A.clientY,deltaY:A.deltaY};switch(h){case 1:f.deltaY*=16;break;case 2:f.deltaY*=100;break}return A.ctrlKey&&!qe&&(f.deltaY*=10),f}function un(A){A.key==="Control"&&(qe=!0,document.addEventListener("keyup",hn,{passive:!0,capture:!0}))}function hn(A){A.key==="Control"&&(qe=!1,document.removeEventListener("keyup",hn,{passive:!0,capture:!0}))}function sn(A){n.enabled===!1||n.enablePan===!1||Ae(A)}function ln(A){switch(Ct(A),at.length){case 1:switch(n.touches.ONE){case so.ROTATE:if(n.enableRotate===!1)return;ee(A),N=z.TOUCH_ROTATE;break;case so.PAN:if(n.enablePan===!1)return;he(A),N=z.TOUCH_PAN;break;default:N=z.NONE}break;case 2:switch(n.touches.TWO){case so.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;nt(A),N=z.TOUCH_DOLLY_PAN;break;case so.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Ze(A),N=z.TOUCH_DOLLY_ROTATE;break;default:N=z.NONE}break;default:N=z.NONE}N!==z.NONE&&n.dispatchEvent(Zo)}function rn(A){switch(Ct(A),N){case z.TOUCH_ROTATE:if(n.enableRotate===!1)return;xe(A),n.update();break;case z.TOUCH_PAN:if(n.enablePan===!1)return;Et(A),n.update();break;case z.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;ue(A),n.update();break;case z.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;ie(A),n.update();break;default:N=z.NONE}}function Mn(A){n.enabled!==!1&&A.preventDefault()}function pn(A){at.push(A.pointerId)}function wn(A){delete Z[A.pointerId];for(let h=0;h<at.length;h++)if(at[h]==A.pointerId){at.splice(h,1);return}}function Ct(A){let h=Z[A.pointerId];h===void 0&&(h=new cn,Z[A.pointerId]=h),h.set(A.pageX,A.pageY)}function Qt(A){const h=A.pointerId===at[0]?at[1]:at[0];return Z[h]}n.domElement.addEventListener("contextmenu",Mn),n.domElement.addEventListener("pointerdown",We),n.domElement.addEventListener("pointercancel",Be),n.domElement.addEventListener("wheel",on,{passive:!1}),document.addEventListener("keydown",un,{passive:!0,capture:!0}),this.update()}}const Xa={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class bo{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const zs=new as(-1,1,1,-1,0,1);class Ds extends He{constructor(){super(),this.setAttribute("position",new Lo([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Lo([0,2,0,0,2,0],2))}}const Bs=new Ds;class Ua{constructor(e){this._mesh=new De(Bs,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,zs)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class Fs extends bo{constructor(e,o){super(),this.textureID=o!==void 0?o:"tDiffuse",e instanceof ho?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=na.clone(e.uniforms),this.material=new ho({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Ua(this.material)}render(e,o,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(o),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class La extends bo{constructor(e,o){super(),this.scene=e,this.camera=o,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,o,n){const z=e.getContext(),N=e.state;N.buffers.color.setMask(!1),N.buffers.depth.setMask(!1),N.buffers.color.setLocked(!0),N.buffers.depth.setLocked(!0);let ve,Q;this.inverse?(ve=0,Q=1):(ve=1,Q=0),N.buffers.stencil.setTest(!0),N.buffers.stencil.setOp(z.REPLACE,z.REPLACE,z.REPLACE),N.buffers.stencil.setFunc(z.ALWAYS,ve,4294967295),N.buffers.stencil.setClear(Q),N.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(o),this.clear&&e.clear(),e.render(this.scene,this.camera),N.buffers.color.setLocked(!1),N.buffers.depth.setLocked(!1),N.buffers.color.setMask(!0),N.buffers.depth.setMask(!0),N.buffers.stencil.setLocked(!1),N.buffers.stencil.setFunc(z.EQUAL,1,4294967295),N.buffers.stencil.setOp(z.KEEP,z.KEEP,z.KEEP),N.buffers.stencil.setLocked(!0)}}class Ls extends bo{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Va{constructor(e,o){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),o===void 0){const n=e.getSize(new cn);this._width=n.width,this._height=n.height,o=new Do(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Bo}),o.texture.name="EffectComposer.rt1"}else this._width=o.width,this._height=o.height;this.renderTarget1=o,this.renderTarget2=o.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Fs(Xa),this.copyPass.material.blending=ss,this.clock=new An}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,o){this.passes.splice(o,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const o=this.passes.indexOf(e);o!==-1&&this.passes.splice(o,1)}isLastEnabledPass(e){for(let o=e+1;o<this.passes.length;o++)if(this.passes[o].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const o=this.renderer.getRenderTarget();let n=!1;for(let z=0,N=this.passes.length;z<N;z++){const ve=this.passes[z];if(ve.enabled!==!1){if(ve.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(z),ve.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),ve.needsSwap){if(n){const Q=this.renderer.getContext(),S=this.renderer.state.buffers.stencil;S.setFunc(Q.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),S.setFunc(Q.EQUAL,1,4294967295)}this.swapBuffers()}La!==void 0&&(ve instanceof La?n=!0:ve instanceof Ls&&(n=!1))}}this.renderer.setRenderTarget(o)}reset(e){if(e===void 0){const o=this.renderer.getSize(new cn);this._pixelRatio=this.renderer.getPixelRatio(),this._width=o.width,this._height=o.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,o){this._width=e,this._height=o;const n=this._width*this._pixelRatio,z=this._height*this._pixelRatio;this.renderTarget1.setSize(n,z),this.renderTarget2.setSize(n,z);for(let N=0;N<this.passes.length;N++)this.passes[N].setSize(n,z)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class _a extends bo{constructor(e,o,n=null,z=null,N=null){super(),this.scene=e,this.camera=o,this.overrideMaterial=n,this.clearColor=z,this.clearAlpha=N,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new yn}render(e,o,n){const z=e.autoClear;e.autoClear=!1;let N,ve;this.overrideMaterial!==null&&(ve=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor)),this.clearAlpha!==null&&(N=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(N),this.overrideMaterial!==null&&(this.scene.overrideMaterial=ve),e.autoClear=z}}const js={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new yn(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			vec3 luma = vec3( 0.299, 0.587, 0.114 );

			float v = dot( texel.xyz, luma );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class eo extends bo{constructor(e,o,n,z){super(),this.strength=o!==void 0?o:1,this.radius=n,this.threshold=z,this.resolution=e!==void 0?new cn(e.x,e.y):new cn(256,256),this.clearColor=new yn(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let N=Math.round(this.resolution.x/2),ve=Math.round(this.resolution.y/2);this.renderTargetBright=new Do(N,ve,{type:Bo}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let ne=0;ne<this.nMips;ne++){const jt=new Do(N,ve,{type:Bo});jt.texture.name="UnrealBloomPass.h"+ne,jt.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(jt);const Dt=new Do(N,ve,{type:Bo});Dt.texture.name="UnrealBloomPass.v"+ne,Dt.texture.generateMipmaps=!1,this.renderTargetsVertical.push(Dt),N=Math.round(N/2),ve=Math.round(ve/2)}const Q=js;this.highPassUniforms=na.clone(Q.uniforms),this.highPassUniforms.luminosityThreshold.value=z,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new ho({uniforms:this.highPassUniforms,vertexShader:Q.vertexShader,fragmentShader:Q.fragmentShader}),this.separableBlurMaterials=[];const S=[3,5,7,9,11];N=Math.round(this.resolution.x/2),ve=Math.round(this.resolution.y/2);for(let ne=0;ne<this.nMips;ne++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(S[ne])),this.separableBlurMaterials[ne].uniforms.invSize.value=new cn(1/N,1/ve),N=Math.round(N/2),ve=Math.round(ve/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=o,this.compositeMaterial.uniforms.bloomRadius.value=.1;const we=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=we,this.bloomTintColors=[new g(1,1,1),new g(1,1,1),new g(1,1,1),new g(1,1,1),new g(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const ut=Xa;this.copyUniforms=na.clone(ut.uniforms),this.blendMaterial=new ho({uniforms:this.copyUniforms,vertexShader:ut.vertexShader,fragmentShader:ut.fragmentShader,blending:Xn,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new yn,this.oldClearAlpha=1,this.basic=new Le,this.fsQuad=new Ua(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,o){let n=Math.round(e/2),z=Math.round(o/2);this.renderTargetBright.setSize(n,z);for(let N=0;N<this.nMips;N++)this.renderTargetsHorizontal[N].setSize(n,z),this.renderTargetsVertical[N].setSize(n,z),this.separableBlurMaterials[N].uniforms.invSize.value=new cn(1/n,1/z),n=Math.round(n/2),z=Math.round(z/2)}render(e,o,n,z,N){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const ve=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),N&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let Q=this.renderTargetBright;for(let S=0;S<this.nMips;S++)this.fsQuad.material=this.separableBlurMaterials[S],this.separableBlurMaterials[S].uniforms.colorTexture.value=Q.texture,this.separableBlurMaterials[S].uniforms.direction.value=eo.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[S]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[S].uniforms.colorTexture.value=this.renderTargetsHorizontal[S].texture,this.separableBlurMaterials[S].uniforms.direction.value=eo.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[S]),e.clear(),this.fsQuad.render(e),Q=this.renderTargetsVertical[S];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,N&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=ve}getSeperableBlurMaterial(e){const o=[];for(let n=0;n<e;n++)o.push(.39894*Math.exp(-.5*n*n/(e*e))/e);return new ho({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new cn(.5,.5)},direction:{value:new cn(.5,.5)},gaussianCoefficients:{value:o}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new ho({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}eo.BlurDirectionX=new cn(1,0);eo.BlurDirectionY=new cn(0,1);const Ja=[{text:"We suffer more often in imagination than in reality.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["suffering","wisdom"]},{text:"The soul becomes dyed with the color of its thoughts.",author:"Marcus Aurelius",school:"Stoicism",era:"2nd Century",themes:["self","wisdom"]},{text:"Waste no more time arguing about what a good man should be. Be one.",author:"Marcus Aurelius",school:"Stoicism",era:"2nd Century",themes:["self","courage"]},{text:"It is not death that a man should fear, but he should fear never beginning to live.",author:"Marcus Aurelius",school:"Stoicism",era:"2nd Century",themes:["death","meaning"]},{text:"The obstacle is the way.",author:"Marcus Aurelius",school:"Stoicism",era:"2nd Century",themes:["courage","change"]},{text:"You have power over your mind - not outside events. Realize this, and you will find strength.",author:"Marcus Aurelius",school:"Stoicism",era:"2nd Century",themes:["self","freedom"]},{text:"The best revenge is not to be like your enemy.",author:"Marcus Aurelius",school:"Stoicism",era:"2nd Century",themes:["wisdom","self"]},{text:"When you arise in the morning, think of what a precious privilege it is to be alive.",author:"Marcus Aurelius",school:"Stoicism",era:"2nd Century",themes:["joy","meaning"]},{text:"Accept the things to which fate binds you, and love the people with whom fate brings you together.",author:"Marcus Aurelius",school:"Stoicism",era:"2nd Century",themes:["love","change"]},{text:"Never let the future disturb you. You will meet it with the same weapons of reason.",author:"Marcus Aurelius",school:"Stoicism",era:"2nd Century",themes:["courage","wisdom"]},{text:"The happiness of your life depends upon the quality of your thoughts.",author:"Marcus Aurelius",school:"Stoicism",era:"2nd Century",themes:["joy","self"]},{text:"Loss is nothing else but change, and change is Nature's delight.",author:"Marcus Aurelius",school:"Stoicism",era:"2nd Century",themes:["change","death"]},{text:"Begin at once to live, and count each separate day as a separate life.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["meaning","joy"]},{text:"It is not that we have a short time to live, but that we waste a lot of it.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["meaning","death"]},{text:"Luck is what happens when preparation meets opportunity.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["wisdom","courage"]},{text:"Difficulties strengthen the mind, as labor does the body.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["suffering","courage"]},{text:"He who is brave is free.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["courage","freedom"]},{text:"Every new beginning comes from some other beginning's end.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["change","meaning"]},{text:"There is nothing either good or bad, but thinking makes it so.",author:"Epictetus",school:"Stoicism",era:"2nd Century",themes:["wisdom","self"]},{text:"First say to yourself what you would be; and then do what you have to do.",author:"Epictetus",school:"Stoicism",era:"2nd Century",themes:["self","courage"]},{text:"It's not what happens to you, but how you react to it that matters.",author:"Epictetus",school:"Stoicism",era:"2nd Century",themes:["wisdom","freedom"]},{text:"No man is free who is not master of himself.",author:"Epictetus",school:"Stoicism",era:"2nd Century",themes:["freedom","self"]},{text:"Don't explain your philosophy. Embody it.",author:"Epictetus",school:"Stoicism",era:"2nd Century",themes:["wisdom","truth"]},{text:"He who has a why to live can bear almost any how.",author:"Friedrich Nietzsche",school:"Existentialism",era:"19th Century",themes:["meaning","suffering"]},{text:"Become who you are.",author:"Friedrich Nietzsche",school:"Existentialism",era:"19th Century",themes:["self","meaning"]},{text:"What does not kill me makes me stronger.",author:"Friedrich Nietzsche",school:"Existentialism",era:"19th Century",themes:["suffering","courage"]},{text:"To live is to suffer, to survive is to find some meaning in the suffering.",author:"Friedrich Nietzsche",school:"Existentialism",era:"19th Century",themes:["suffering","meaning"]},{text:"Amor fati – love your fate.",author:"Friedrich Nietzsche",school:"Existentialism",era:"19th Century",themes:["love","meaning"]},{text:"Without music, life would be a mistake.",author:"Friedrich Nietzsche",school:"Existentialism",era:"19th Century",themes:["joy","meaning"]},{text:"There are no facts, only interpretations.",author:"Friedrich Nietzsche",school:"Existentialism",era:"19th Century",themes:["truth","wisdom"]},{text:"The higher we soar, the smaller we appear to those who cannot fly.",author:"Friedrich Nietzsche",school:"Existentialism",era:"19th Century",themes:["self","courage"]},{text:"You must have chaos within you to give birth to a dancing star.",author:"Friedrich Nietzsche",school:"Existentialism",era:"19th Century",themes:["change","joy"]},{text:"Man is condemned to be free.",author:"Jean-Paul Sartre",school:"Existentialism",era:"20th Century",themes:["freedom","meaning"]},{text:"Freedom is what we do with what is done to us.",author:"Jean-Paul Sartre",school:"Existentialism",era:"20th Century",themes:["freedom","courage"]},{text:"Existence precedes essence.",author:"Jean-Paul Sartre",school:"Existentialism",era:"20th Century",themes:["meaning","self"]},{text:"We are our choices.",author:"Jean-Paul Sartre",school:"Existentialism",era:"20th Century",themes:["self","freedom"]},{text:"Everything has been figured out, except how to live.",author:"Jean-Paul Sartre",school:"Existentialism",era:"20th Century",themes:["meaning","wisdom"]},{text:"Life begins on the other side of despair.",author:"Jean-Paul Sartre",school:"Existentialism",era:"20th Century",themes:["suffering","meaning"]},{text:"If you are lonely when you're alone, you are in bad company.",author:"Jean-Paul Sartre",school:"Existentialism",era:"20th Century",themes:["self","love"]},{text:"Anxiety is the dizziness of freedom.",author:"Søren Kierkegaard",school:"Existentialism",era:"19th Century",themes:["freedom","suffering"]},{text:"Life must be understood backwards. But it must be lived forwards.",author:"Søren Kierkegaard",school:"Existentialism",era:"19th Century",themes:["meaning","wisdom"]},{text:"The most common form of despair is not being who you are.",author:"Søren Kierkegaard",school:"Existentialism",era:"19th Century",themes:["self","suffering"]},{text:"Between stimulus and response there is a space. In that space is our power to choose our response.",author:"Viktor Frankl",school:"Existentialism",era:"20th Century",themes:["freedom","wisdom"]},{text:"When we are no longer able to change a situation, we are challenged to change ourselves.",author:"Viktor Frankl",school:"Existentialism",era:"20th Century",themes:["change","courage"]},{text:"Everything can be taken from a man but one thing: the last of the human freedoms—to choose one's attitude.",author:"Viktor Frankl",school:"Existentialism",era:"20th Century",themes:["freedom","suffering"]},{text:"One must imagine Sisyphus happy.",author:"Albert Camus",school:"Absurdism",era:"20th Century",themes:["meaning","joy"]},{text:"In the depth of winter, I finally learned that within me there lay an invincible summer.",author:"Albert Camus",school:"Absurdism",era:"20th Century",themes:["courage","self"]},{text:"The only way to deal with an unfree world is to become so absolutely free that your very existence is an act of rebellion.",author:"Albert Camus",school:"Absurdism",era:"20th Century",themes:["freedom","courage"]},{text:"Live to the point of tears.",author:"Albert Camus",school:"Absurdism",era:"20th Century",themes:["meaning","joy"]},{text:"The struggle itself toward the heights is enough to fill a man's heart.",author:"Albert Camus",school:"Absurdism",era:"20th Century",themes:["meaning","courage"]},{text:"In the midst of hate, I found there was, within me, an invincible love.",author:"Albert Camus",school:"Absurdism",era:"20th Century",themes:["love","self"]},{text:"Real generosity towards the future lies in giving all to the present.",author:"Albert Camus",school:"Absurdism",era:"20th Century",themes:["meaning","wisdom"]},{text:"I rebel; therefore I exist.",author:"Albert Camus",school:"Absurdism",era:"20th Century",themes:["freedom","meaning"]},{text:"Blessed are the hearts that can bend; they shall never be broken.",author:"Albert Camus",school:"Absurdism",era:"20th Century",themes:["love","wisdom"]},{text:"The unexamined life is not worth living.",author:"Socrates",school:"Classical Greek",era:"5th Century BCE",themes:["self","meaning"]},{text:"The only true wisdom is in knowing you know nothing.",author:"Socrates",school:"Classical Greek",era:"5th Century BCE",themes:["wisdom","truth"]},{text:"To find yourself, think for yourself.",author:"Socrates",school:"Classical Greek",era:"5th Century BCE",themes:["self","freedom"]},{text:"Be kind, for everyone you meet is fighting a hard battle.",author:"Socrates",school:"Classical Greek",era:"5th Century BCE",themes:["love","suffering"]},{text:"Education is the kindling of a flame, not the filling of a vessel.",author:"Socrates",school:"Classical Greek",era:"5th Century BCE",themes:["wisdom","change"]},{text:"Wonder is the beginning of wisdom.",author:"Socrates",school:"Classical Greek",era:"5th Century BCE",themes:["wisdom","joy"]},{text:"The secret of change is to focus all of your energy not on fighting the old, but on building the new.",author:"Socrates",school:"Classical Greek",era:"5th Century BCE",themes:["change","courage"]},{text:"The greatest wealth is to live content with little.",author:"Plato",school:"Classical Greek",era:"4th Century BCE",themes:["joy","wisdom"]},{text:"Courage is knowing what not to fear.",author:"Plato",school:"Classical Greek",era:"4th Century BCE",themes:["courage","wisdom"]},{text:"The first and greatest victory is to conquer yourself.",author:"Plato",school:"Classical Greek",era:"4th Century BCE",themes:["self","courage"]},{text:"Music gives a soul to the universe, wings to the mind, flight to the imagination.",author:"Plato",school:"Classical Greek",era:"4th Century BCE",themes:["joy","meaning"]},{text:"We are what we repeatedly do. Excellence, then, is not an act, but a habit.",author:"Aristotle",school:"Classical Greek",era:"4th Century BCE",themes:["self","wisdom"]},{text:"Happiness depends upon ourselves.",author:"Aristotle",school:"Classical Greek",era:"4th Century BCE",themes:["joy","self"]},{text:"Knowing yourself is the beginning of all wisdom.",author:"Aristotle",school:"Classical Greek",era:"4th Century BCE",themes:["self","wisdom"]},{text:"It is the mark of an educated mind to be able to entertain a thought without accepting it.",author:"Aristotle",school:"Classical Greek",era:"4th Century BCE",themes:["wisdom","truth"]},{text:"Patience is bitter, but its fruit is sweet.",author:"Aristotle",school:"Classical Greek",era:"4th Century BCE",themes:["suffering","wisdom"]},{text:"Quality is not an act, it is a habit.",author:"Aristotle",school:"Classical Greek",era:"4th Century BCE",themes:["self","wisdom"]},{text:"One cannot step twice in the same river.",author:"Heraclitus",school:"Pre-Socratic",era:"6th Century BCE",themes:["change","truth"]},{text:"Everything flows.",author:"Heraclitus",school:"Pre-Socratic",era:"6th Century BCE",themes:["change","truth"]},{text:"Character is destiny.",author:"Heraclitus",school:"Pre-Socratic",era:"6th Century BCE",themes:["self","meaning"]},{text:"The only constant in life is change.",author:"Heraclitus",school:"Pre-Socratic",era:"6th Century BCE",themes:["change","truth"]},{text:"Day by day, what you choose, what you think and what you do is who you become.",author:"Heraclitus",school:"Pre-Socratic",era:"6th Century BCE",themes:["self","change"]},{text:"The way is not in the sky. The way is in the heart.",author:"Buddha",school:"Buddhism",era:"6th Century BCE",themes:["self","truth"]},{text:"The mind is everything. What you think you become.",author:"Buddha",school:"Buddhism",era:"6th Century BCE",themes:["self","wisdom"]},{text:"Peace comes from within. Do not seek it without.",author:"Buddha",school:"Buddhism",era:"6th Century BCE",themes:["joy","self"]},{text:"Three things cannot be long hidden: the sun, the moon, and the truth.",author:"Buddha",school:"Buddhism",era:"6th Century BCE",themes:["truth","wisdom"]},{text:"You yourself, as much as anybody in the entire universe, deserve your love and affection.",author:"Buddha",school:"Buddhism",era:"6th Century BCE",themes:["love","self"]},{text:"In the end, only three things matter: how much you loved, how gently you lived, and how gracefully you let go.",author:"Buddha",school:"Buddhism",era:"6th Century BCE",themes:["love","death"]},{text:"Do not dwell in the past, do not dream of the future, concentrate the mind on the present moment.",author:"Buddha",school:"Buddhism",era:"6th Century BCE",themes:["wisdom","joy"]},{text:"Every morning we are born again. What we do today is what matters most.",author:"Buddha",school:"Buddhism",era:"6th Century BCE",themes:["change","meaning"]},{text:"Pain is certain, suffering is optional.",author:"Buddha",school:"Buddhism",era:"6th Century BCE",themes:["suffering","freedom"]},{text:"Holding on to anger is like grasping a hot coal with the intent of throwing it at someone else.",author:"Buddha",school:"Buddhism",era:"6th Century BCE",themes:["suffering","wisdom"]},{text:"No one saves us but ourselves. No one can and no one may. We ourselves must walk the path.",author:"Buddha",school:"Buddhism",era:"6th Century BCE",themes:["self","courage"]},{text:"The present moment is filled with joy and happiness. If you are attentive, you will see it.",author:"Thich Nhat Hanh",school:"Buddhism",era:"20th Century",themes:["joy","wisdom"]},{text:"Smile, breathe and go slowly.",author:"Thich Nhat Hanh",school:"Buddhism",era:"20th Century",themes:["joy","wisdom"]},{text:"Walk as if you are kissing the Earth with your feet.",author:"Thich Nhat Hanh",school:"Buddhism",era:"20th Century",themes:["joy","love"]},{text:"Because you are alive, everything is possible.",author:"Thich Nhat Hanh",school:"Buddhism",era:"20th Century",themes:["meaning","joy"]},{text:"Letting go gives us freedom, and freedom is the only condition for happiness.",author:"Thich Nhat Hanh",school:"Buddhism",era:"20th Century",themes:["freedom","joy"]},{text:"Before enlightenment, chop wood, carry water. After enlightenment, chop wood, carry water.",author:"Zen Proverb",school:"Zen Buddhism",era:"Traditional",themes:["wisdom","meaning"]},{text:"When you reach the top of the mountain, keep climbing.",author:"Zen Proverb",school:"Zen Buddhism",era:"Traditional",themes:["courage","meaning"]},{text:"The quieter you become, the more you can hear.",author:"Ram Dass",school:"Zen Buddhism",era:"20th Century",themes:["wisdom","self"]},{text:"Let go, or be dragged.",author:"Zen Proverb",school:"Zen Buddhism",era:"Traditional",themes:["freedom","change"]},{text:"Sitting quietly, doing nothing, spring comes, and the grass grows by itself.",author:"Matsuo Bashō",school:"Zen Buddhism",era:"17th Century",themes:["wisdom","change"]},{text:"When walking, walk. When eating, eat.",author:"Zen Proverb",school:"Zen Buddhism",era:"Traditional",themes:["wisdom","joy"]},{text:"The finger pointing at the moon is not the moon.",author:"Zen Proverb",school:"Zen Buddhism",era:"Traditional",themes:["truth","wisdom"]},{text:"To study the self is to forget the self. To forget the self is to be enlightened by all things.",author:"Dōgen",school:"Zen Buddhism",era:"13th Century",themes:["self","wisdom"]},{text:"The Tao that can be told is not the eternal Tao.",author:"Lao Tzu",school:"Taoism",era:"6th Century BCE",themes:["truth","wisdom"]},{text:"Knowing others is intelligence; knowing yourself is true wisdom.",author:"Lao Tzu",school:"Taoism",era:"6th Century BCE",themes:["self","wisdom"]},{text:"Nature does not hurry, yet everything is accomplished.",author:"Lao Tzu",school:"Taoism",era:"6th Century BCE",themes:["wisdom","change"]},{text:"When you realize nothing is lacking, the whole world belongs to you.",author:"Lao Tzu",school:"Taoism",era:"6th Century BCE",themes:["joy","wisdom"]},{text:"A journey of a thousand miles begins with a single step.",author:"Lao Tzu",school:"Taoism",era:"6th Century BCE",themes:["courage","change"]},{text:"Be content with what you have; rejoice in the way things are.",author:"Lao Tzu",school:"Taoism",era:"6th Century BCE",themes:["joy","wisdom"]},{text:"When I let go of what I am, I become what I might be.",author:"Lao Tzu",school:"Taoism",era:"6th Century BCE",themes:["change","self"]},{text:"Silence is a source of great strength.",author:"Lao Tzu",school:"Taoism",era:"6th Century BCE",themes:["wisdom","self"]},{text:"If you are depressed you are living in the past. If you are anxious you are living in the future. If you are at peace you are living in the present.",author:"Lao Tzu",school:"Taoism",era:"6th Century BCE",themes:["joy","wisdom"]},{text:"To the mind that is still, the whole universe surrenders.",author:"Lao Tzu",school:"Taoism",era:"6th Century BCE",themes:["wisdom","self"]},{text:"Life is a series of natural and spontaneous changes. Don't resist them; that only creates sorrow.",author:"Lao Tzu",school:"Taoism",era:"6th Century BCE",themes:["change","suffering"]},{text:"Care about what other people think and you will always be their prisoner.",author:"Lao Tzu",school:"Taoism",era:"6th Century BCE",themes:["freedom","self"]},{text:"Flow with whatever may happen and let your mind be free.",author:"Zhuangzi",school:"Taoism",era:"4th Century BCE",themes:["freedom","change"]},{text:"Happiness is the absence of the striving for happiness.",author:"Zhuangzi",school:"Taoism",era:"4th Century BCE",themes:["joy","wisdom"]},{text:"The wound is the place where the Light enters you.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["suffering","love"]},{text:"Yesterday I was clever, so I wanted to change the world. Today I am wise, so I am changing myself.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["wisdom","change"]},{text:"What you seek is seeking you.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["meaning","love"]},{text:"Don't grieve. Anything you lose comes round in another form.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["death","change"]},{text:"The garden of the world has no limits, except in your mind.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["freedom","self"]},{text:"You are not a drop in the ocean. You are the entire ocean in a drop.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["self","meaning"]},{text:"Raise your words, not your voice. It is rain that grows flowers, not thunder.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["wisdom","love"]},{text:"Let yourself be silently drawn by the strange pull of what you really love.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["love","meaning"]},{text:"Be like a tree and let the dead leaves drop.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["change","freedom"]},{text:"Out beyond ideas of wrongdoing and rightdoing, there is a field. I'll meet you there.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["love","truth"]},{text:"Stop acting so small. You are the universe in ecstatic motion.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["self","joy"]},{text:"Silence is the language of God, all else is poor translation.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["truth","wisdom"]},{text:"Set your life on fire. Seek those who fan your flames.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["love","meaning"]},{text:"These pains you feel are messengers. Listen to them.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["suffering","wisdom"]},{text:"Live life as if everything is rigged in your favor.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["joy","courage"]},{text:"Why do you stay in prison when the door is so wide open?",author:"Rumi",school:"Sufism",era:"13th Century",themes:["freedom","change"]},{text:"I wish I could show you, when you are lonely or in darkness, the astonishing light of your own being.",author:"Hafiz",school:"Sufism",era:"14th Century",themes:["self","love"]},{text:"Fear is the cheapest room in the house. I would like to see you living in better conditions.",author:"Hafiz",school:"Sufism",era:"14th Century",themes:["courage","freedom"]},{text:"The menu is not the meal.",author:"Alan Watts",school:"Eastern Philosophy",era:"20th Century",themes:["truth","wisdom"]},{text:"You are a function of what the whole universe is doing in the same way that a wave is a function of what the whole ocean is doing.",author:"Alan Watts",school:"Eastern Philosophy",era:"20th Century",themes:["self","meaning"]},{text:"The meaning of life is just to be alive. It is so plain and so obvious and so simple.",author:"Alan Watts",school:"Eastern Philosophy",era:"20th Century",themes:["meaning","joy"]},{text:"Muddy water is best cleared by leaving it alone.",author:"Alan Watts",school:"Eastern Philosophy",era:"20th Century",themes:["wisdom","change"]},{text:"This is the real secret of life — to be completely engaged with what you are doing in the here and now.",author:"Alan Watts",school:"Eastern Philosophy",era:"20th Century",themes:["meaning","joy"]},{text:"You are under no obligation to be the same person you were five minutes ago.",author:"Alan Watts",school:"Eastern Philosophy",era:"20th Century",themes:["change","freedom"]},{text:"The only way to make sense out of change is to plunge into it, move with it, and join the dance.",author:"Alan Watts",school:"Eastern Philosophy",era:"20th Century",themes:["change","joy"]},{text:"Trying to define yourself is like trying to bite your own teeth.",author:"Alan Watts",school:"Eastern Philosophy",era:"20th Century",themes:["self","wisdom"]},{text:"Man suffers only because he takes seriously what the gods made for fun.",author:"Alan Watts",school:"Eastern Philosophy",era:"20th Century",themes:["suffering","joy"]},{text:"Be here now.",author:"Ram Dass",school:"Spiritual",era:"20th Century",themes:["wisdom","joy"]},{text:"The next message you need is always right where you are.",author:"Ram Dass",school:"Spiritual",era:"20th Century",themes:["wisdom","meaning"]},{text:"We're all just walking each other home.",author:"Ram Dass",school:"Spiritual",era:"20th Century",themes:["love","meaning"]},{text:"The heart surrenders everything to the moment. The mind judges and holds back.",author:"Ram Dass",school:"Spiritual",era:"20th Century",themes:["love","wisdom"]},{text:"As long as you have certain desires about how it ought to be you can't see how it is.",author:"Ram Dass",school:"Spiritual",era:"20th Century",themes:["wisdom","freedom"]},{text:"The resistance to the unpleasant situation is the root of suffering.",author:"Ram Dass",school:"Spiritual",era:"20th Century",themes:["suffering","wisdom"]},{text:"I would like my life to be a statement of love and compassion—and where it isn't, that's where my work lies.",author:"Ram Dass",school:"Spiritual",era:"20th Century",themes:["love","self"]},{text:"The game is not about becoming somebody, it's about becoming nobody.",author:"Ram Dass",school:"Spiritual",era:"20th Century",themes:["self","freedom"]},{text:"Learn to watch your drama unfold while at the same time knowing you are more than your drama.",author:"Ram Dass",school:"Spiritual",era:"20th Century",themes:["self","wisdom"]},{text:"Everything changes once we identify with being the witness to the story, instead of the actor in it.",author:"Ram Dass",school:"Spiritual",era:"20th Century",themes:["self","freedom"]},{text:"Suffering is part of our training program for becoming wise.",author:"Ram Dass",school:"Spiritual",era:"20th Century",themes:["suffering","wisdom"]},{text:"Our whole spiritual transformation brings us to the point where we realize that in our own being, we are enough.",author:"Ram Dass",school:"Spiritual",era:"20th Century",themes:["self","meaning"]},{text:"Realize deeply that the present moment is all you ever have.",author:"Eckhart Tolle",school:"Spiritual",era:"21st Century",themes:["wisdom","joy"]},{text:"Life is the dancer and you are the dance.",author:"Eckhart Tolle",school:"Spiritual",era:"21st Century",themes:["meaning","joy"]},{text:"The primary cause of unhappiness is never the situation but your thoughts about it.",author:"Eckhart Tolle",school:"Spiritual",era:"21st Century",themes:["suffering","wisdom"]},{text:"Whatever you fight, you strengthen, and what you resist, persists.",author:"Eckhart Tolle",school:"Spiritual",era:"21st Century",themes:["wisdom","freedom"]},{text:"You are not your thoughts. You are the awareness behind the thoughts.",author:"Eckhart Tolle",school:"Spiritual",era:"21st Century",themes:["self","truth"]},{text:"Acknowledging the good that you already have in your life is the foundation for all abundance.",author:"Eckhart Tolle",school:"Spiritual",era:"21st Century",themes:["joy","wisdom"]},{text:"The moment you become aware of the ego in you, it is strictly speaking no longer the ego.",author:"Eckhart Tolle",school:"Spiritual",era:"21st Century",themes:["self","wisdom"]},{text:"You find peace not by rearranging the circumstances of your life, but by realizing who you are at the deepest level.",author:"Eckhart Tolle",school:"Spiritual",era:"21st Century",themes:["self","joy"]},{text:"Give up defining yourself — to yourself or to others. You won't die. You will come to life.",author:"Eckhart Tolle",school:"Spiritual",era:"21st Century",themes:["self","freedom"]},{text:"What a liberation to realize that the voice in my head is not who I am.",author:"Eckhart Tolle",school:"Spiritual",era:"21st Century",themes:["self","freedom"]},{text:"You are the sky. Everything else is just the weather.",author:"Pema Chödrön",school:"Spiritual",era:"20th Century",themes:["self","wisdom"]},{text:"Nothing ever goes away until it has taught us what we need to know.",author:"Pema Chödrön",school:"Spiritual",era:"20th Century",themes:["suffering","wisdom"]},{text:"The most fundamental aggression to ourselves is to remain ignorant by not having the courage to look at ourselves honestly.",author:"Pema Chödrön",school:"Spiritual",era:"20th Century",themes:["self","courage"]},{text:"Fear is a natural reaction to moving closer to the truth.",author:"Pema Chödrön",school:"Spiritual",era:"20th Century",themes:["courage","truth"]},{text:"Compassion is not a relationship between the healer and the wounded. It's a relationship between equals.",author:"Pema Chödrön",school:"Spiritual",era:"20th Century",themes:["love","wisdom"]},{text:"To be fully alive, fully human, and completely awake is to be continually thrown out of the nest.",author:"Pema Chödrön",school:"Spiritual",era:"20th Century",themes:["courage","change"]},{text:"The only reason we don't open our hearts and minds to other people is that they trigger confusion in us.",author:"Pema Chödrön",school:"Spiritual",era:"20th Century",themes:["love","self"]},{text:"Step into the fire of self-discovery. This fire will not burn you, it will only burn what you are not.",author:"Mooji",school:"Spiritual",era:"21st Century",themes:["self","change"]},{text:"Don't be a storehouse of memories. Leave past, future and even present thoughts behind.",author:"Mooji",school:"Spiritual",era:"21st Century",themes:["freedom","wisdom"]},{text:"The mind is like a parachute. It works best when it's open.",author:"Mooji",school:"Spiritual",era:"21st Century",themes:["wisdom","freedom"]},{text:"Life cannot be against you, for you are life itself.",author:"Mooji",school:"Spiritual",era:"21st Century",themes:["meaning","self"]},{text:"The greatest healing would be to wake up from what we are not.",author:"Mooji",school:"Spiritual",era:"21st Century",themes:["self","truth"]},{text:"Enlightenment is a destructive process. It has nothing to do with becoming better or being happier. Enlightenment is the crumbling away of untruth.",author:"Adyashanti",school:"Spiritual",era:"21st Century",themes:["truth","change"]},{text:"The biggest embrace of love you'll ever make is to embrace yourself completely.",author:"Adyashanti",school:"Spiritual",era:"21st Century",themes:["love","self"]},{text:"We realize that who we are is not the story of me, but the awakeness that's aware of everything.",author:"Adyashanti",school:"Spiritual",era:"21st Century",themes:["self","truth"]},{text:"The question is not how to get enlightened but rather how to stop unenlightening yourself.",author:"Adyashanti",school:"Spiritual",era:"21st Century",themes:["wisdom","self"]},{text:"In the end, just three things matter: How well we have lived. How well we have loved. How well we have learned to let go.",author:"Jack Kornfield",school:"Spiritual",era:"20th Century",themes:["meaning","love"]},{text:"The things that matter most in our lives are not fantastic or grand. They are moments when we touch one another.",author:"Jack Kornfield",school:"Spiritual",era:"20th Century",themes:["love","meaning"]},{text:"Forgiveness is giving up all hope of a better past.",author:"Jack Kornfield",school:"Spiritual",era:"20th Century",themes:["freedom","wisdom"]},{text:"In a moment of mindfulness, we observe the flow of thoughts without being caught by them.",author:"Jack Kornfield",school:"Spiritual",era:"20th Century",themes:["wisdom","self"]},{text:"Wisdom tells me I am nothing. Love tells me I am everything. Between the two my life flows.",author:"Nisargadatta Maharaj",school:"Spiritual",era:"20th Century",themes:["wisdom","love"]},{text:"The mind creates the abyss, the heart crosses it.",author:"Nisargadatta Maharaj",school:"Spiritual",era:"20th Century",themes:["love","wisdom"]},{text:"Once you realize that all comes from within, that the world in which you live is not projected onto you but by you.",author:"Nisargadatta Maharaj",school:"Spiritual",era:"20th Century",themes:["self","truth"]},{text:"There is nothing to practice. To know yourself, be yourself.",author:"Nisargadatta Maharaj",school:"Spiritual",era:"20th Century",themes:["self","wisdom"]},{text:"Your own Self-Realization is the greatest service you can render the world.",author:"Ramana Maharshi",school:"Spiritual",era:"20th Century",themes:["self","meaning"]},{text:"Happiness is your nature. It is not wrong to desire it. What is wrong is seeking it outside when it is inside.",author:"Ramana Maharshi",school:"Spiritual",era:"20th Century",themes:["joy","self"]},{text:"The question 'Who am I?' is not really meant to get an answer, the question 'Who am I?' is meant to dissolve the questioner.",author:"Ramana Maharshi",school:"Spiritual",era:"20th Century",themes:["self","truth"]},{text:"No one succeeds without effort. Mind control is not your birthright. Those who succeed owe their success to perseverance.",author:"Ramana Maharshi",school:"Spiritual",era:"20th Century",themes:["courage","wisdom"]},{text:"The season of failure is the best time for sowing the seeds of success.",author:"Paramahansa Yogananda",school:"Spiritual",era:"20th Century",themes:["courage","change"]},{text:"Live quietly in the moment and see the beauty of all before you. The future will take care of itself.",author:"Paramahansa Yogananda",school:"Spiritual",era:"20th Century",themes:["joy","wisdom"]},{text:"There is a magnet in your heart that will attract true friends.",author:"Paramahansa Yogananda",school:"Spiritual",era:"20th Century",themes:["love","truth"]},{text:"Kindness is the light that dissolves all walls between souls.",author:"Paramahansa Yogananda",school:"Spiritual",era:"20th Century",themes:["love","wisdom"]},{text:"It does not matter how slowly you go as long as you do not stop.",author:"Confucius",school:"Confucianism",era:"6th Century BCE",themes:["courage","wisdom"]},{text:"Our greatest glory is not in never falling, but in rising every time we fall.",author:"Confucius",school:"Confucianism",era:"6th Century BCE",themes:["courage","change"]},{text:"Real knowledge is to know the extent of one's ignorance.",author:"Confucius",school:"Confucianism",era:"6th Century BCE",themes:["wisdom","truth"]},{text:"Everything has beauty, but not everyone sees it.",author:"Confucius",school:"Confucianism",era:"6th Century BCE",themes:["truth","joy"]},{text:"The man who moves a mountain begins by carrying away small stones.",author:"Confucius",school:"Confucianism",era:"6th Century BCE",themes:["courage","change"]},{text:"Wherever you go, go with all your heart.",author:"Confucius",school:"Confucianism",era:"6th Century BCE",themes:["love","meaning"]},{text:"By three methods we may learn wisdom: by reflection, which is noblest; by imitation, which is easiest; and by experience, which is the bitterest.",author:"Confucius",school:"Confucianism",era:"6th Century BCE",themes:["wisdom","suffering"]},{text:"I think, therefore I am.",author:"René Descartes",school:"Rationalism",era:"17th Century",themes:["self","truth"]},{text:"The reading of all good books is like a conversation with the finest minds of past centuries.",author:"René Descartes",school:"Rationalism",era:"17th Century",themes:["wisdom","joy"]},{text:"Doubt is the origin of wisdom.",author:"René Descartes",school:"Rationalism",era:"17th Century",themes:["wisdom","truth"]},{text:"Happiness is not an ideal of reason, but of imagination.",author:"Immanuel Kant",school:"German Idealism",era:"18th Century",themes:["joy","wisdom"]},{text:"Two things fill the mind with ever-increasing wonder and awe: the starry heavens above me and the moral law within me.",author:"Immanuel Kant",school:"German Idealism",era:"18th Century",themes:["truth","meaning"]},{text:"Science is organized knowledge. Wisdom is organized life.",author:"Immanuel Kant",school:"German Idealism",era:"18th Century",themes:["wisdom","truth"]},{text:"Have the courage to use your own understanding.",author:"Immanuel Kant",school:"German Idealism",era:"18th Century",themes:["courage","freedom"]},{text:"Rules for happiness: something to do, someone to love, something to hope for.",author:"Immanuel Kant",school:"German Idealism",era:"18th Century",themes:["joy","love"]},{text:"Nothing great in the world has ever been accomplished without passion.",author:"Georg Wilhelm Friedrich Hegel",school:"German Idealism",era:"19th Century",themes:["courage","meaning"]},{text:"Talent hits a target no one else can hit; genius hits a target no one else can see.",author:"Arthur Schopenhauer",school:"Pessimism",era:"19th Century",themes:["wisdom","self"]},{text:"Compassion is the basis of morality.",author:"Arthur Schopenhauer",school:"Pessimism",era:"19th Century",themes:["love","truth"]},{text:"A man can be himself only so long as he is alone.",author:"Arthur Schopenhauer",school:"Pessimism",era:"19th Century",themes:["self","freedom"]},{text:"We forfeit three-fourths of ourselves in order to be like other people.",author:"Arthur Schopenhauer",school:"Pessimism",era:"19th Century",themes:["self","freedom"]},{text:"Mostly it is loss which teaches us about the worth of things.",author:"Arthur Schopenhauer",school:"Pessimism",era:"19th Century",themes:["death","wisdom"]},{text:"Whereof one cannot speak, thereof one must be silent.",author:"Ludwig Wittgenstein",school:"Analytic Philosophy",era:"20th Century",themes:["truth","wisdom"]},{text:"The limits of my language mean the limits of my world.",author:"Ludwig Wittgenstein",school:"Analytic Philosophy",era:"20th Century",themes:["truth","self"]},{text:"The good life is one inspired by love and guided by knowledge.",author:"Bertrand Russell",school:"Analytic Philosophy",era:"20th Century",themes:["love","wisdom"]},{text:"Do not fear to be eccentric in opinion, for every opinion now accepted was once eccentric.",author:"Bertrand Russell",school:"Analytic Philosophy",era:"20th Century",themes:["courage","truth"]},{text:"The fundamental cause of trouble in the world today is that the stupid are cocksure while the intelligent are full of doubt.",author:"Bertrand Russell",school:"Analytic Philosophy",era:"20th Century",themes:["wisdom","truth"]},{text:"I would never die for my beliefs because I might be wrong.",author:"Bertrand Russell",school:"Analytic Philosophy",era:"20th Century",themes:["wisdom","truth"]},{text:"To be yourself in a world that is constantly trying to make you something else is the greatest accomplishment.",author:"Ralph Waldo Emerson",school:"Transcendentalism",era:"19th Century",themes:["self","courage"]},{text:"What lies behind us and what lies before us are tiny matters compared to what lies within us.",author:"Ralph Waldo Emerson",school:"Transcendentalism",era:"19th Century",themes:["self","courage"]},{text:"Do not go where the path may lead, go instead where there is no path and leave a trail.",author:"Ralph Waldo Emerson",school:"Transcendentalism",era:"19th Century",themes:["courage","freedom"]},{text:"For every minute you are angry you lose sixty seconds of happiness.",author:"Ralph Waldo Emerson",school:"Transcendentalism",era:"19th Century",themes:["joy","wisdom"]},{text:"The only person you are destined to become is the person you decide to be.",author:"Ralph Waldo Emerson",school:"Transcendentalism",era:"19th Century",themes:["self","freedom"]},{text:"Life is a journey, not a destination.",author:"Ralph Waldo Emerson",school:"Transcendentalism",era:"19th Century",themes:["meaning","change"]},{text:"Finish each day and be done with it. You have done what you could.",author:"Ralph Waldo Emerson",school:"Transcendentalism",era:"19th Century",themes:["wisdom","joy"]},{text:"Go confidently in the direction of your dreams! Live the life you've imagined.",author:"Henry David Thoreau",school:"Transcendentalism",era:"19th Century",themes:["courage","meaning"]},{text:"It's not what you look at that matters, it's what you see.",author:"Henry David Thoreau",school:"Transcendentalism",era:"19th Century",themes:["wisdom","truth"]},{text:"Not until we are lost do we begin to understand ourselves.",author:"Henry David Thoreau",school:"Transcendentalism",era:"19th Century",themes:["self","change"]},{text:"I went to the woods because I wished to live deliberately.",author:"Henry David Thoreau",school:"Transcendentalism",era:"19th Century",themes:["meaning","freedom"]},{text:"The cave you fear to enter holds the treasure you seek.",author:"Joseph Campbell",school:"Mythology",era:"20th Century",themes:["courage","self"]},{text:"Follow your bliss and the universe will open doors where there were only walls.",author:"Joseph Campbell",school:"Mythology",era:"20th Century",themes:["joy","meaning"]},{text:"We must be willing to let go of the life we planned so as to have the life that is waiting for us.",author:"Joseph Campbell",school:"Mythology",era:"20th Century",themes:["change","freedom"]},{text:"The privilege of a lifetime is being who you are.",author:"Joseph Campbell",school:"Mythology",era:"20th Century",themes:["self","meaning"]},{text:"Find a place inside where there's joy, and the joy will burn out the pain.",author:"Joseph Campbell",school:"Mythology",era:"20th Century",themes:["joy","suffering"]},{text:"Until you make the unconscious conscious, it will direct your life and you will call it fate.",author:"Carl Jung",school:"Depth Psychology",era:"20th Century",themes:["self","truth"]},{text:"Who looks outside, dreams; who looks inside, awakes.",author:"Carl Jung",school:"Depth Psychology",era:"20th Century",themes:["self","wisdom"]},{text:"I am not what happened to me, I am what I choose to become.",author:"Carl Jung",school:"Depth Psychology",era:"20th Century",themes:["self","freedom"]},{text:"Everything that irritates us about others can lead us to an understanding of ourselves.",author:"Carl Jung",school:"Depth Psychology",era:"20th Century",themes:["self","wisdom"]},{text:"Your visions will become clear only when you can look into your own heart.",author:"Carl Jung",school:"Depth Psychology",era:"20th Century",themes:["self","truth"]},{text:"Knowing your own darkness is the best method for dealing with the darknesses of other people.",author:"Carl Jung",school:"Depth Psychology",era:"20th Century",themes:["self","wisdom"]},{text:"No tree can grow to Heaven unless its roots reach down to Hell.",author:"Carl Jung",school:"Depth Psychology",era:"20th Century",themes:["truth","self"]},{text:"Injustice anywhere is a threat to justice everywhere.",author:"Martin Luther King Jr.",school:"Political Philosophy",era:"20th Century",themes:["truth","love"]},{text:"Darkness cannot drive out darkness; only light can do that.",author:"Martin Luther King Jr.",school:"Political Philosophy",era:"20th Century",themes:["love","courage"]},{text:"I have decided to stick with love. Hate is too great a burden to bear.",author:"Martin Luther King Jr.",school:"Political Philosophy",era:"20th Century",themes:["love","freedom"]},{text:"The most certain sign of wisdom is cheerfulness.",author:"Michel de Montaigne",school:"Renaissance",era:"16th Century",themes:["joy","wisdom"]},{text:"There is no conversation more boring than the one where everybody agrees.",author:"Michel de Montaigne",school:"Renaissance",era:"16th Century",themes:["truth","wisdom"]},{text:"My life has been full of terrible misfortunes most of which never happened.",author:"Michel de Montaigne",school:"Renaissance",era:"16th Century",themes:["suffering","wisdom"]},{text:"I am because we are.",author:"Ubuntu Philosophy",school:"African Philosophy",era:"Traditional",themes:["love","meaning"]},{text:"If you want to go fast, go alone. If you want to go far, go together.",author:"African Proverb",school:"African Philosophy",era:"Traditional",themes:["love","wisdom"]},{text:"Ubuntu speaks about humaneness, gentleness, hospitality, putting yourself out on behalf of others, being vulnerable.",author:"Desmond Tutu",school:"African Philosophy",era:"20th Century",themes:["love","self"]},{text:"My humanity is bound up in yours, for we can only be human together.",author:"Desmond Tutu",school:"African Philosophy",era:"20th Century",themes:["love","truth"]},{text:"Do your little bit of good where you are; it's those little bits of good put together that overwhelm the world.",author:"Desmond Tutu",school:"African Philosophy",era:"20th Century",themes:["courage","love"]},{text:"Hope is being able to see that there is light despite all of the darkness.",author:"Desmond Tutu",school:"African Philosophy",era:"20th Century",themes:["courage","suffering"]},{text:"Resentment and anger are bad for your blood pressure and your digestion.",author:"Desmond Tutu",school:"African Philosophy",era:"20th Century",themes:["wisdom","joy"]},{text:"The greatest glory in living lies not in never falling, but in rising every time we fall.",author:"Nelson Mandela",school:"African Philosophy",era:"20th Century",themes:["courage","change"]},{text:"It always seems impossible until it's done.",author:"Nelson Mandela",school:"African Philosophy",era:"20th Century",themes:["courage","meaning"]},{text:"Education is the most powerful weapon which you can use to change the world.",author:"Nelson Mandela",school:"African Philosophy",era:"20th Century",themes:["wisdom","change"]},{text:"I learned that courage was not the absence of fear, but the triumph over it.",author:"Nelson Mandela",school:"African Philosophy",era:"20th Century",themes:["courage","self"]},{text:"There is no passion to be found playing small—in settling for a life that is less than the one you are capable of living.",author:"Nelson Mandela",school:"African Philosophy",era:"20th Century",themes:["meaning","courage"]},{text:"A blind person who has relatives can see.",author:"African Proverb",school:"African Philosophy",era:"Traditional",themes:["love","wisdom"]},{text:"When there is no enemy within, the enemies outside cannot hurt you.",author:"African Proverb",school:"African Philosophy",era:"Traditional",themes:["self","courage"]},{text:"However long the night, the dawn will break.",author:"African Proverb",school:"African Philosophy",era:"Traditional",themes:["courage","suffering"]},{text:"Smooth seas do not make skillful sailors.",author:"African Proverb",school:"African Philosophy",era:"Traditional",themes:["suffering","wisdom"]},{text:"Seek wisdom, not knowledge. Knowledge is of the past; Wisdom is of the future.",author:"Lumbee Proverb",school:"Native American",era:"Traditional",themes:["wisdom","truth"]},{text:"Our first teacher is our own heart.",author:"Cheyenne Proverb",school:"Native American",era:"Traditional",themes:["self","wisdom"]},{text:"In our every deliberation, we must consider the impact of our decisions on the next seven generations.",author:"Iroquois Proverb",school:"Native American",era:"Traditional",themes:["wisdom","love"]},{text:"It is better to have less thunder in the mouth and more lightning in the hand.",author:"Apache Proverb",school:"Native American",era:"Traditional",themes:["courage","truth"]},{text:"When you were born, you cried and the world rejoiced. Live your life so that when you die, the world cries and you rejoice.",author:"Cherokee Proverb",school:"Native American",era:"Traditional",themes:["meaning","death"]},{text:"Don't let yesterday use up too much of today.",author:"Cherokee Proverb",school:"Native American",era:"Traditional",themes:["wisdom","change"]},{text:"When you arise in the morning give thanks for the food and for the joy of living.",author:"Tecumseh",school:"Native American",era:"19th Century",themes:["joy","meaning"]},{text:"It does not take many words to tell the truth.",author:"Chief Joseph",school:"Native American",era:"19th Century",themes:["truth","wisdom"]},{text:"Listen, or your tongue will make you deaf.",author:"Native American Proverb",school:"Native American",era:"Traditional",themes:["wisdom","truth"]},{text:"To touch the Earth is to have harmony with nature.",author:"Oglala Sioux Proverb",school:"Native American",era:"Traditional",themes:["joy","truth"]},{text:"Take only what you need and leave the land as you found it.",author:"Arapaho Proverb",school:"Native American",era:"Traditional",themes:["wisdom","love"]},{text:"We do not inherit the earth from our ancestors; we borrow it from our children.",author:"Native American Proverb",school:"Native American",era:"Traditional",themes:["truth","love"]},{text:"All things are connected like the blood that unites us. We did not weave the web of life, we are merely a strand in it.",author:"Chief Seattle",school:"Native American",era:"19th Century",themes:["truth","love"]},{text:"Wisdom comes only when you stop looking for it and start living the life the Creator intended for you.",author:"Hopi Proverb",school:"Native American",era:"Traditional",themes:["wisdom","meaning"]},{text:"The point is not for women simply to take power out of men's hands, since that wouldn't change anything about the world. It's a question precisely of destroying that notion of power.",author:"Simone de Beauvoir",school:"Feminist Philosophy",era:"20th Century",themes:["freedom","change"]},{text:"I wish that every human life might be pure transparent freedom.",author:"Simone de Beauvoir",school:"Feminist Philosophy",era:"20th Century",themes:["freedom","meaning"]},{text:"Change your life today. Don't gamble on the future, act now, without delay.",author:"Simone de Beauvoir",school:"Feminist Philosophy",era:"20th Century",themes:["courage","change"]},{text:"Authentic love must be founded on reciprocal recognition of two freedoms.",author:"Simone de Beauvoir",school:"Feminist Philosophy",era:"20th Century",themes:["love","freedom"]},{text:"The sad truth is that most evil is done by people who never make up their minds to be good or evil.",author:"Hannah Arendt",school:"Feminist Philosophy",era:"20th Century",themes:["truth","self"]},{text:"Forgiveness is the key to action and freedom.",author:"Hannah Arendt",school:"Feminist Philosophy",era:"20th Century",themes:["freedom","love"]},{text:"The most radical revolutionary will become a conservative the day after the revolution.",author:"Hannah Arendt",school:"Feminist Philosophy",era:"20th Century",themes:["change","truth"]},{text:"Storytelling reveals meaning without committing the error of defining it.",author:"Hannah Arendt",school:"Feminist Philosophy",era:"20th Century",themes:["truth","meaning"]},{text:"Love is an act of endless forgiveness, a tender look which becomes a habit.",author:"bell hooks",school:"Feminist Philosophy",era:"20th Century",themes:["love","change"]},{text:"Knowing how to be solitary is central to the art of loving.",author:"bell hooks",school:"Feminist Philosophy",era:"20th Century",themes:["love","self"]},{text:"Life-transforming ideas have always come to me through books.",author:"bell hooks",school:"Feminist Philosophy",era:"20th Century",themes:["wisdom","change"]},{text:"What we do is more important than what we say or what we say we believe.",author:"bell hooks",school:"Feminist Philosophy",era:"20th Century",themes:["truth","courage"]},{text:"You have the right to work, but for the work's sake only. You have no right to the fruits of work.",author:"Bhagavad Gita",school:"Vedanta",era:"Ancient",themes:["wisdom","freedom"]},{text:"You are what you believe in. You become that which you believe you can become.",author:"Bhagavad Gita",school:"Vedanta",era:"Ancient",themes:["self","change"]},{text:"Death is as sure for that which is born, as birth is for that which is dead. Therefore grieve not for what is inevitable.",author:"Bhagavad Gita",school:"Vedanta",era:"Ancient",themes:["death","wisdom"]},{text:"The infinite is bliss. There is no bliss in anything finite.",author:"Upanishads",school:"Vedanta",era:"Ancient",themes:["joy","truth"]},{text:"The Self is one. Unmoving, it moves swifter than thought.",author:"Upanishads",school:"Vedanta",era:"Ancient",themes:["self","truth"]},{text:"From the unreal lead me to the real. From darkness lead me to light. From death lead me to immortality.",author:"Upanishads",school:"Vedanta",era:"Ancient",themes:["truth","meaning"]},{text:"Arise, awake, and stop not till the goal is reached.",author:"Swami Vivekananda",school:"Vedanta",era:"19th Century",themes:["courage","meaning"]},{text:"In a conflict between the heart and the brain, follow your heart.",author:"Swami Vivekananda",school:"Vedanta",era:"19th Century",themes:["self","courage"]},{text:"All the powers in the universe are already ours. It is we who have put our hands before our eyes and cry that it is dark.",author:"Swami Vivekananda",school:"Vedanta",era:"19th Century",themes:["self","truth"]},{text:"Your own Self-Realization is the greatest service you can render the world.",author:"Ramana Maharshi",school:"Vedanta",era:"20th Century",themes:["self","love"]},{text:"Happiness is your nature. It is not wrong to desire it. What is wrong is seeking it outside when it is inside.",author:"Ramana Maharshi",school:"Vedanta",era:"20th Century",themes:["joy","self"]},{text:"Your duty is to be; not to be this or that.",author:"Ramana Maharshi",school:"Vedanta",era:"20th Century",themes:["self","freedom"]},{text:"The mind turned outwards results in thoughts and objects. Turned inwards, it becomes the Self.",author:"Ramana Maharshi",school:"Vedanta",era:"20th Century",themes:["self","truth"]},{text:"You and I are all as much continuous with the physical universe as a wave is continuous with the ocean.",author:"Sri Aurobindo",school:"Vedanta",era:"20th Century",themes:["truth","self"]},{text:"All life is yoga.",author:"Sri Aurobindo",school:"Vedanta",era:"20th Century",themes:["meaning","self"]},{text:"Our hearts are restless until they find their rest in you.",author:"St. Augustine",school:"Medieval Philosophy",era:"5th Century",themes:["meaning","self"]},{text:"Love, and do what you will.",author:"St. Augustine",school:"Medieval Philosophy",era:"5th Century",themes:["love","freedom"]},{text:"Faith is to believe what you do not see; the reward of this faith is to see what you believe.",author:"St. Augustine",school:"Medieval Philosophy",era:"5th Century",themes:["truth","courage"]},{text:"The world is a book and those who do not travel read only one page.",author:"St. Augustine",school:"Medieval Philosophy",era:"5th Century",themes:["wisdom","meaning"]},{text:"There is no saint without a past, no sinner without a future.",author:"St. Augustine",school:"Medieval Philosophy",era:"5th Century",themes:["change","self"]},{text:"To one who has faith, no explanation is necessary. To one without faith, no explanation is possible.",author:"Thomas Aquinas",school:"Medieval Philosophy",era:"13th Century",themes:["truth","wisdom"]},{text:"There is nothing on this earth more to be prized than true friendship.",author:"Thomas Aquinas",school:"Medieval Philosophy",era:"13th Century",themes:["love","meaning"]},{text:"The things that we love tell us what we are.",author:"Thomas Aquinas",school:"Medieval Philosophy",era:"13th Century",themes:["love","self"]},{text:"Wonder is the desire for knowledge.",author:"Thomas Aquinas",school:"Medieval Philosophy",era:"13th Century",themes:["wisdom","joy"]},{text:"If the highest aim of a captain were to preserve his ship, he would keep it in port forever.",author:"Thomas Aquinas",school:"Medieval Philosophy",era:"13th Century",themes:["courage","meaning"]},{text:"The ink of the scholar is more sacred than the blood of the martyr.",author:"Prophet Muhammad",school:"Islamic Philosophy",era:"7th Century",themes:["wisdom","truth"]},{text:"He who knows himself knows his Lord.",author:"Prophet Muhammad",school:"Islamic Philosophy",era:"7th Century",themes:["self","truth"]},{text:"The cure for ignorance is to question.",author:"Prophet Muhammad",school:"Islamic Philosophy",era:"7th Century",themes:["wisdom","truth"]},{text:"The soul is a stranger in this world.",author:"Ibn Arabi",school:"Islamic Philosophy",era:"13th Century",themes:["self","truth"]},{text:"When my heart became capable of every form, I knew love had arrived.",author:"Ibn Arabi",school:"Islamic Philosophy",era:"13th Century",themes:["love","change"]},{text:"Half of disbelief in God is believing in bad luck.",author:"Al-Ghazali",school:"Islamic Philosophy",era:"12th Century",themes:["courage","truth"]},{text:"Knowledge without action is wastefulness and action without knowledge is foolishness.",author:"Al-Ghazali",school:"Islamic Philosophy",era:"12th Century",themes:["wisdom","truth"]},{text:"The happiness of the drop is to die in the river.",author:"Al-Ghazali",school:"Islamic Philosophy",era:"12th Century",themes:["death","joy"]},{text:"There is no human being who is not subject to passions. The way of the sage is to moderate them.",author:"Ibn Sina",school:"Islamic Philosophy",era:"11th Century",themes:["wisdom","self"]},{text:"Peace is not an absence of war, it is a virtue, a state of mind, a disposition for benevolence.",author:"Baruch Spinoza",school:"Rationalism",era:"17th Century",themes:["joy","wisdom"]},{text:"Be not astonished at new ideas; for it is well known to you that a thing does not therefore cease to be true because it is not accepted by many.",author:"Baruch Spinoza",school:"Rationalism",era:"17th Century",themes:["truth","courage"]},{text:"I have striven not to laugh at human actions, not to weep at them, nor to hate them, but to understand them.",author:"Baruch Spinoza",school:"Rationalism",era:"17th Century",themes:["wisdom","love"]},{text:"The highest activity a human being can attain is learning for understanding, because to understand is to be free.",author:"Baruch Spinoza",school:"Rationalism",era:"17th Century",themes:["freedom","wisdom"]},{text:"Emotion, which is suffering, ceases to be suffering as soon as we form a clear and precise picture of it.",author:"Baruch Spinoza",school:"Rationalism",era:"17th Century",themes:["suffering","wisdom"]},{text:"Pride is pleasure arising from a man's thinking too highly of himself.",author:"Baruch Spinoza",school:"Rationalism",era:"17th Century",themes:["self","wisdom"]},{text:"To love is to find pleasure in the happiness of another.",author:"Gottfried Wilhelm Leibniz",school:"Rationalism",era:"17th Century",themes:["love","joy"]},{text:"Act as if what you do makes a difference. It does.",author:"William James",school:"Pragmatism",era:"19th Century",themes:["meaning","courage"]},{text:"The greatest use of a life is to spend it on something that will outlast it.",author:"William James",school:"Pragmatism",era:"19th Century",themes:["meaning","death"]},{text:"The art of being wise is knowing what to overlook.",author:"William James",school:"Pragmatism",era:"19th Century",themes:["wisdom","self"]},{text:"We are like islands in the sea, separate on the surface but connected in the deep.",author:"William James",school:"Pragmatism",era:"19th Century",themes:["love","truth"]},{text:"Believe that life is worth living and your belief will help create the fact.",author:"William James",school:"Pragmatism",era:"19th Century",themes:["meaning","courage"]},{text:"The greatest weapon against stress is our ability to choose one thought over another.",author:"William James",school:"Pragmatism",era:"19th Century",themes:["freedom","self"]},{text:"A great many people think they are thinking when they are merely rearranging their prejudices.",author:"William James",school:"Pragmatism",era:"19th Century",themes:["wisdom","truth"]},{text:"Education is not preparation for life; education is life itself.",author:"John Dewey",school:"Pragmatism",era:"20th Century",themes:["wisdom","meaning"]},{text:"We do not learn from experience... we learn from reflecting on experience.",author:"John Dewey",school:"Pragmatism",era:"20th Century",themes:["wisdom","self"]},{text:"The self is not something ready-made, but something in continuous formation through choice of action.",author:"John Dewey",school:"Pragmatism",era:"20th Century",themes:["self","change"]},{text:"Failure is instructive. The person who really thinks learns quite as much from failures as from successes.",author:"John Dewey",school:"Pragmatism",era:"20th Century",themes:["wisdom","courage"]},{text:"Tell me how you read and I will tell you who you are.",author:"Martin Heidegger",school:"Phenomenology",era:"20th Century",themes:["self","truth"]},{text:"The most thought-provoking thing in our thought-provoking time is that we are still not thinking.",author:"Martin Heidegger",school:"Phenomenology",era:"20th Century",themes:["wisdom","truth"]},{text:"Language is the house of Being.",author:"Martin Heidegger",school:"Phenomenology",era:"20th Century",themes:["truth","self"]},{text:"Every man is born as many men and dies as a single one.",author:"Martin Heidegger",school:"Phenomenology",era:"20th Century",themes:["death","self"]},{text:"To perceive is to render oneself present to something through the body.",author:"Maurice Merleau-Ponty",school:"Phenomenology",era:"20th Century",themes:["self","truth"]},{text:"The body is our general medium for having a world.",author:"Maurice Merleau-Ponty",school:"Phenomenology",era:"20th Century",themes:["self","truth"]},{text:"People know what they do; frequently they know why they do what they do; but what they don't know is what what they do does.",author:"Michel Foucault",school:"Post-Structuralism",era:"20th Century",themes:["self","truth"]},{text:"Where there is power, there is resistance.",author:"Michel Foucault",school:"Post-Structuralism",era:"20th Century",themes:["freedom","courage"]},{text:"I don't feel that it is necessary to know exactly what I am. The main interest in life and work is to become someone else that you were not in the beginning.",author:"Michel Foucault",school:"Post-Structuralism",era:"20th Century",themes:["self","change"]},{text:"It is no measure of health to be well adjusted to a profoundly sick society.",author:"Jiddu Krishnamurti",school:"Eastern Philosophy",era:"20th Century",themes:["truth","self"]},{text:"The ability to observe without evaluating is the highest form of intelligence.",author:"Jiddu Krishnamurti",school:"Eastern Philosophy",era:"20th Century",themes:["wisdom","self"]},{text:"The more you know yourself, the more clarity there is.",author:"Jiddu Krishnamurti",school:"Eastern Philosophy",era:"20th Century",themes:["self","truth"]},{text:"Freedom from the desire for an answer is essential to the understanding of a problem.",author:"Jiddu Krishnamurti",school:"Eastern Philosophy",era:"20th Century",themes:["freedom","wisdom"]},{text:"In obedience there is always fear, and fear darkens the mind.",author:"Jiddu Krishnamurti",school:"Eastern Philosophy",era:"20th Century",themes:["freedom","courage"]},{text:"Truth is a pathless land.",author:"Jiddu Krishnamurti",school:"Eastern Philosophy",era:"20th Century",themes:["truth","freedom"]},{text:"You can only be afraid of what you think you know.",author:"Jiddu Krishnamurti",school:"Eastern Philosophy",era:"20th Century",themes:["courage","wisdom"]},{text:"The temple bell stops but I still hear the sound coming out of the flowers.",author:"Matsuo Bashō",school:"Zen Buddhism",era:"17th Century",themes:["joy","wisdom"]},{text:"Do not seek to follow in the footsteps of the wise. Seek what they sought.",author:"Matsuo Bashō",school:"Zen Buddhism",era:"17th Century",themes:["wisdom","self"]},{text:"Every day is a journey, and the journey itself is home.",author:"Matsuo Bashō",school:"Zen Buddhism",era:"17th Century",themes:["meaning","joy"]},{text:"If you want to know the past, look at your present. If you want to know the future, look at your present.",author:"Suzuki Roshi",school:"Zen Buddhism",era:"20th Century",themes:["wisdom","truth"]},{text:"In the beginner's mind there are many possibilities, but in the expert's there are few.",author:"Suzuki Roshi",school:"Zen Buddhism",era:"20th Century",themes:["wisdom","self"]},{text:"When you do something, you should burn yourself completely, like a good bonfire, leaving no trace of yourself.",author:"Suzuki Roshi",school:"Zen Buddhism",era:"20th Century",themes:["self","meaning"]},{text:"Treat every moment as your last. It is not preparation for something else.",author:"Suzuki Roshi",school:"Zen Buddhism",era:"20th Century",themes:["meaning","death"]},{text:"While we are postponing, life speeds by.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["meaning","death"]},{text:"A gem cannot be polished without friction, nor a man perfected without trials.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["suffering","self"]},{text:"If a man knows not to which port he sails, no wind is favorable.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["meaning","wisdom"]},{text:"It is not because things are difficult that we do not dare; it is because we do not dare that they are difficult.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["courage","truth"]},{text:"The whole future lies in uncertainty: live immediately.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["meaning","courage"]},{text:"Sometimes even to live is an act of courage.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["courage","suffering"]},{text:"Life is long if you know how to use it.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["meaning","wisdom"]},{text:"We are always complaining that our days are few, and acting as though there would be no end of them.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["death","wisdom"]},{text:"The authority of those who teach is often an obstacle to those who want to learn.",author:"Cicero",school:"Stoicism",era:"1st Century BCE",themes:["wisdom","freedom"]},{text:"A room without books is like a body without a soul.",author:"Cicero",school:"Stoicism",era:"1st Century BCE",themes:["wisdom","joy"]},{text:"Gratitude is not only the greatest of virtues, but the parent of all others.",author:"Cicero",school:"Stoicism",era:"1st Century BCE",themes:["joy","love"]},{text:"Those who know do not speak. Those who speak do not know.",author:"Lao Tzu",school:"Taoism",era:"6th Century BCE",themes:["wisdom","truth"]},{text:"Great acts are made up of small deeds.",author:"Lao Tzu",school:"Taoism",era:"6th Century BCE",themes:["courage","meaning"]},{text:"He who conquers others is strong; he who conquers himself is mighty.",author:"Lao Tzu",school:"Taoism",era:"6th Century BCE",themes:["self","courage"]},{text:"The softest things in the world overcome the hardest things in the world.",author:"Lao Tzu",school:"Taoism",era:"6th Century BCE",themes:["wisdom","courage"]},{text:"The master of the art of living makes little distinction between his work and his play.",author:"Lao Tzu",school:"Taoism",era:"6th Century BCE",themes:["joy","meaning"]},{text:"If you look to others for fulfillment, you will never be fulfilled.",author:"Lao Tzu",school:"Taoism",era:"6th Century BCE",themes:["self","joy"]},{text:"A wise man, recognizing that the world is but an illusion, does not act as if it is real.",author:"Zhuangzi",school:"Taoism",era:"4th Century BCE",themes:["wisdom","truth"]},{text:"The fish trap exists because of the fish. Once you've gotten the fish you can forget the trap.",author:"Zhuangzi",school:"Taoism",era:"4th Century BCE",themes:["wisdom","freedom"]},{text:"I do not know whether I was then a man dreaming I was a butterfly, or whether I am now a butterfly dreaming I am a man.",author:"Zhuangzi",school:"Taoism",era:"4th Century BCE",themes:["truth","self"]},{text:"Treat those who are good with goodness, and also treat those who are not good with goodness.",author:"Mencius",school:"Confucianism",era:"4th Century BCE",themes:["love","wisdom"]},{text:"The great man is he who does not lose his child's heart.",author:"Mencius",school:"Confucianism",era:"4th Century BCE",themes:["self","joy"]},{text:"Hell is the suffering of being unable to love.",author:"Fyodor Dostoevsky",school:"Existentialism",era:"19th Century",themes:["love","suffering"]},{text:"The soul is healed by being with children.",author:"Fyodor Dostoevsky",school:"Existentialism",era:"19th Century",themes:["love","joy"]},{text:"Pain and suffering are always inevitable for a large intelligence and a deep heart.",author:"Fyodor Dostoevsky",school:"Existentialism",era:"19th Century",themes:["suffering","wisdom"]},{text:"Beauty will save the world.",author:"Fyodor Dostoevsky",school:"Existentialism",era:"19th Century",themes:["truth","meaning"]},{text:"The mystery of human existence lies not in just staying alive, but in finding something to live for.",author:"Fyodor Dostoevsky",school:"Existentialism",era:"19th Century",themes:["meaning","self"]},{text:"To love someone means to see them as God intended them.",author:"Fyodor Dostoevsky",school:"Existentialism",era:"19th Century",themes:["love","truth"]},{text:"The heart has its reasons which reason knows nothing of.",author:"Blaise Pascal",school:"Rationalism",era:"17th Century",themes:["love","truth"]},{text:"All of humanity's problems stem from man's inability to sit quietly in a room alone.",author:"Blaise Pascal",school:"Rationalism",era:"17th Century",themes:["self","wisdom"]},{text:"We are more often frightened than hurt; and we suffer more from imagination than from reality.",author:"Blaise Pascal",school:"Rationalism",era:"17th Century",themes:["suffering","courage"]},{text:"Man is but a reed, the most feeble thing in nature; but he is a thinking reed.",author:"Blaise Pascal",school:"Rationalism",era:"17th Century",themes:["self","wisdom"]},{text:"Kind words do not cost much. Yet they accomplish much.",author:"Blaise Pascal",school:"Rationalism",era:"17th Century",themes:["love","wisdom"]},{text:"The privilege of a lifetime is to become who you truly are.",author:"Carl Jung",school:"Depth Psychology",era:"20th Century",themes:["self","meaning"]},{text:"Where love rules, there is no will to power; and where power predominates, there love is lacking.",author:"Carl Jung",school:"Depth Psychology",era:"20th Century",themes:["love","truth"]},{text:"The shoe that fits one person pinches another; there is no recipe for living that suits all cases.",author:"Carl Jung",school:"Depth Psychology",era:"20th Century",themes:["self","freedom"]},{text:"The meeting of two personalities is like the contact of two chemical substances: if there is any reaction, both are transformed.",author:"Carl Jung",school:"Depth Psychology",era:"20th Century",themes:["love","change"]},{text:"Know thyself.",author:"Oracle of Delphi",school:"Classical Greek",era:"Ancient",themes:["self","wisdom"]},{text:"Nothing in excess.",author:"Oracle of Delphi",school:"Classical Greek",era:"Ancient",themes:["wisdom","self"]},{text:"Man know thyself; then thou shalt know the Universe and God.",author:"Pythagoras",school:"Pre-Socratic",era:"6th Century BCE",themes:["self","truth"]},{text:"No man is free who is not master of himself.",author:"Pythagoras",school:"Pre-Socratic",era:"6th Century BCE",themes:["freedom","self"]},{text:"Rest satisfied with doing well, and leave others to talk of you as they please.",author:"Pythagoras",school:"Pre-Socratic",era:"6th Century BCE",themes:["self","freedom"]},{text:"The purpose of life is not to be happy. It is to be useful, to be honorable, to be compassionate.",author:"Ralph Waldo Emerson",school:"Transcendentalism",era:"19th Century",themes:["meaning","love"]},{text:"Nothing external to you has any power over you.",author:"Ralph Waldo Emerson",school:"Transcendentalism",era:"19th Century",themes:["freedom","self"]},{text:"The only way to have a friend is to be one.",author:"Ralph Waldo Emerson",school:"Transcendentalism",era:"19th Century",themes:["love","wisdom"]},{text:"All life is an experiment. The more experiments you make the better.",author:"Ralph Waldo Emerson",school:"Transcendentalism",era:"19th Century",themes:["courage","meaning"]},{text:"Our greatest glory is not in never failing, but in rising up every time we fail.",author:"Ralph Waldo Emerson",school:"Transcendentalism",era:"19th Century",themes:["courage","change"]},{text:"Write it on your heart that every day is the best day in the year.",author:"Ralph Waldo Emerson",school:"Transcendentalism",era:"19th Century",themes:["joy","meaning"]},{text:"Live in the sunshine, swim the sea, drink the wild air.",author:"Ralph Waldo Emerson",school:"Transcendentalism",era:"19th Century",themes:["joy","freedom"]},{text:"What you are comes to you.",author:"Ralph Waldo Emerson",school:"Transcendentalism",era:"19th Century",themes:["self","truth"]},{text:"Simplicity, simplicity, simplicity! Let your affairs be as two or three.",author:"Henry David Thoreau",school:"Transcendentalism",era:"19th Century",themes:["wisdom","freedom"]},{text:"An early-morning walk is a blessing for the whole day.",author:"Henry David Thoreau",school:"Transcendentalism",era:"19th Century",themes:["joy","wisdom"]},{text:"As if you could kill time without injuring eternity.",author:"Henry David Thoreau",school:"Transcendentalism",era:"19th Century",themes:["meaning","death"]},{text:"How vain it is to sit down to write when you have not stood up to live.",author:"Henry David Thoreau",school:"Transcendentalism",era:"19th Century",themes:["meaning","truth"]},{text:"Our life is frittered away by detail. Simplify, simplify.",author:"Henry David Thoreau",school:"Transcendentalism",era:"19th Century",themes:["wisdom","freedom"]},{text:"Your pain is the breaking of the shell that encloses your understanding.",author:"Kahlil Gibran",school:"Eastern Philosophy",era:"20th Century",themes:["suffering","wisdom"]},{text:"Out of suffering have emerged the strongest souls; the most massive characters are seared with scars.",author:"Kahlil Gibran",school:"Eastern Philosophy",era:"20th Century",themes:["suffering","courage"]},{text:"You give but little when you give of your possessions. It is when you give of yourself that you truly give.",author:"Kahlil Gibran",school:"Eastern Philosophy",era:"20th Century",themes:["love","meaning"]},{text:"The deeper that sorrow carves into your being, the more joy you can contain.",author:"Kahlil Gibran",school:"Eastern Philosophy",era:"20th Century",themes:["suffering","joy"]},{text:"Your children are not your children. They are the sons and daughters of Life's longing for itself.",author:"Kahlil Gibran",school:"Eastern Philosophy",era:"20th Century",themes:["love","freedom"]},{text:"If you love somebody, let them go, for if they return, they were always yours.",author:"Kahlil Gibran",school:"Eastern Philosophy",era:"20th Century",themes:["love","freedom"]},{text:"Yesterday is but today's memory, and tomorrow is today's dream.",author:"Kahlil Gibran",school:"Eastern Philosophy",era:"20th Century",themes:["wisdom","meaning"]},{text:"Trust in dreams, for in them is hidden the gate to eternity.",author:"Kahlil Gibran",school:"Eastern Philosophy",era:"20th Century",themes:["meaning","truth"]},{text:"Attention is the rarest and purest form of generosity.",author:"Simone Weil",school:"Phenomenology",era:"20th Century",themes:["love","wisdom"]},{text:"The love of our neighbor in all its fullness simply means being able to say, 'What are you going through?'",author:"Simone Weil",school:"Phenomenology",era:"20th Century",themes:["love","truth"]},{text:"Absolutely unmixed attention is prayer.",author:"Simone Weil",school:"Phenomenology",era:"20th Century",themes:["wisdom","meaning"]},{text:"To be rooted is perhaps the most important and least recognized need of the human soul.",author:"Simone Weil",school:"Phenomenology",era:"20th Century",themes:["meaning","self"]},{text:"A wise person will always find a way.",author:"African Proverb",school:"African Philosophy",era:"Traditional",themes:["wisdom","courage"]},{text:"Knowledge is like a garden: if it is not cultivated, it cannot be harvested.",author:"African Proverb",school:"African Philosophy",era:"Traditional",themes:["wisdom","change"]},{text:"The fool speaks, the wise man listens.",author:"Ethiopian Proverb",school:"African Philosophy",era:"Traditional",themes:["wisdom","truth"]},{text:"He who learns, teaches.",author:"Ethiopian Proverb",school:"African Philosophy",era:"Traditional",themes:["wisdom","love"]},{text:"When the roots are deep, there is no reason to fear the wind.",author:"African Proverb",school:"African Philosophy",era:"Traditional",themes:["courage","self"]},{text:"Wisdom cannot be imparted. Knowledge can be communicated, but not wisdom.",author:"Hermann Hesse",school:"Literary Philosophy",era:"20th Century",themes:["wisdom","truth"]},{text:"Seeking means: having a goal. But finding means: being free, being open, having no goal.",author:"Hermann Hesse",school:"Literary Philosophy",era:"20th Century",themes:["freedom","meaning"]},{text:"Have you also learned that secret from the river; that there is no such thing as time?",author:"Hermann Hesse",school:"Literary Philosophy",era:"20th Century",themes:["truth","change"]},{text:"Words do not express thoughts very well. They always become a little different immediately after they are expressed.",author:"Hermann Hesse",school:"Literary Philosophy",era:"20th Century",themes:["truth","wisdom"]},{text:"Gentleness is stronger than severity, water is stronger than rock, love is stronger than force.",author:"Hermann Hesse",school:"Literary Philosophy",era:"20th Century",themes:["love","courage"]},{text:"We are not going in circles, we are going upwards. The path is a spiral; we have already climbed many steps.",author:"Hermann Hesse",school:"Literary Philosophy",era:"20th Century",themes:["change","meaning"]},{text:"It is not for me to judge another man's life. I must judge, I must choose, I must spurn, purely for myself.",author:"Hermann Hesse",school:"Literary Philosophy",era:"20th Century",themes:["self","freedom"]},{text:"The universe is not there to overwhelm us; it is our home, and our resource. The bigger the better.",author:"David Deutsch",school:"Critical Rationalism",era:"21st Century",themes:["meaning","courage"]},{text:"Optimism is the theory that all failures — all evils — are due to insufficient knowledge.",author:"David Deutsch",school:"Critical Rationalism",era:"21st Century",themes:["truth","courage"]},{text:"We are only just scratching the surface, and shall never be doing anything else.",author:"David Deutsch",school:"Critical Rationalism",era:"21st Century",themes:["meaning","wisdom"]},{text:"Without error-correction all information processing, and hence all knowledge-creation, is necessarily bounded.",author:"David Deutsch",school:"Critical Rationalism",era:"21st Century",themes:["truth","change"]},{text:"Problems are inevitable. Problems are soluble.",author:"David Deutsch",school:"Critical Rationalism",era:"21st Century",themes:["courage","wisdom"]},{text:"Fallibilism is essential for the initiation of unlimited knowledge growth — the beginning of infinity.",author:"David Deutsch",school:"Critical Rationalism",era:"21st Century",themes:["truth","freedom"]},{text:"There is no need to build a labyrinth when the entire universe is one.",author:"Jorge Luis Borges",school:"Literary Philosophy",era:"20th Century",themes:["truth","meaning"]},{text:"Time is the substance I am made of. Time is a river which sweeps me along, but I am the river.",author:"Jorge Luis Borges",school:"Literary Philosophy",era:"20th Century",themes:["self","change"]},{text:"To think is to forget a difference, to generalize, to abstract.",author:"Jorge Luis Borges",school:"Literary Philosophy",era:"20th Century",themes:["wisdom","truth"]},{text:"A man sets out to draw the world. Over time, he discovers that the patient labyrinth of lines traces the lineaments of his own face.",author:"Jorge Luis Borges",school:"Literary Philosophy",era:"20th Century",themes:["self","meaning"]},{text:"To fall in love is to create a religion that has a fallible god.",author:"Jorge Luis Borges",school:"Literary Philosophy",era:"20th Century",themes:["love","truth"]},{text:"The safest way to try to get what you want is to try to deserve what you want.",author:"Charlie Munger",school:"Practical Wisdom",era:"21st Century",themes:["wisdom","self"]},{text:"I constantly see people rise in life who are not the smartest, but they are learning machines.",author:"Charlie Munger",school:"Practical Wisdom",era:"21st Century",themes:["wisdom","change"]},{text:"The big money is not in the buying and selling, but in the waiting.",author:"Charlie Munger",school:"Practical Wisdom",era:"21st Century",themes:["courage","wisdom"]},{text:"Knowing what you don't know is more useful than being brilliant.",author:"Charlie Munger",school:"Practical Wisdom",era:"21st Century",themes:["wisdom","truth"]},{text:"All I want to know is where I'm going to die, so I'll never go there.",author:"Charlie Munger",school:"Practical Wisdom",era:"21st Century",themes:["wisdom","death"]},{text:"Show me the incentive, and I will show you the outcome.",author:"Charlie Munger",school:"Practical Wisdom",era:"21st Century",themes:["truth","wisdom"]},{text:"I did not succeed in life by intelligence. I succeeded because I have a long attention span.",author:"Charlie Munger",school:"Practical Wisdom",era:"21st Century",themes:["self","wisdom"]},{text:"In my whole life, I have known no wise people who didn't read all the time — none, zero.",author:"Charlie Munger",school:"Practical Wisdom",era:"21st Century",themes:["wisdom","truth"]},{text:"Our knowledge can only be finite, while our ignorance must necessarily be infinite.",author:"Karl Popper",school:"Critical Rationalism",era:"20th Century",themes:["wisdom","truth"]},{text:"True ignorance is not the absence of knowledge, but the refusal to acquire it.",author:"Karl Popper",school:"Critical Rationalism",era:"20th Century",themes:["wisdom","truth"]},{text:"Science must begin with myths, and with the criticism of myths.",author:"Karl Popper",school:"Critical Rationalism",era:"20th Century",themes:["truth","change"]},{text:"Whenever a theory appears to you as the only possible one, take this as a sign that you have neither understood the theory nor the problem.",author:"Karl Popper",school:"Critical Rationalism",era:"20th Century",themes:["wisdom","truth"]},{text:"The war of ideas is a Greek invention. It is the very basis of our civilization.",author:"Karl Popper",school:"Critical Rationalism",era:"20th Century",themes:["truth","freedom"]},{text:"We must plan for freedom, and not only for security, if for no other reason than that only freedom can make security secure.",author:"Karl Popper",school:"Critical Rationalism",era:"20th Century",themes:["freedom","courage"]},{text:"The difference between the amoeba and Einstein is that Einstein is intrigued by his errors.",author:"Karl Popper",school:"Critical Rationalism",era:"20th Century",themes:["wisdom","change"]},{text:"Desire is a contract you make with yourself to be unhappy until you get what you want.",author:"Naval Ravikant",school:"Practical Wisdom",era:"21st Century",themes:["suffering","joy"]},{text:"A happy person isn't someone who's happy all the time. It's someone who effortlessly interprets events in such a way that they don't lose their innate peace.",author:"Naval Ravikant",school:"Practical Wisdom",era:"21st Century",themes:["joy","wisdom"]},{text:"Happiness is there when you remove the sense of something missing in your life.",author:"Naval Ravikant",school:"Practical Wisdom",era:"21st Century",themes:["joy","self"]},{text:"Read the greats in math, science, and philosophy. Ignore your contemporaries and news.",author:"Naval Ravikant",school:"Practical Wisdom",era:"21st Century",themes:["wisdom","truth"]},{text:"The most important skill for getting rich is becoming a perpetual learner.",author:"Naval Ravikant",school:"Practical Wisdom",era:"21st Century",themes:["change","wisdom"]},{text:"Escape competition through authenticity. No one can compete with you on being you.",author:"Naval Ravikant",school:"Practical Wisdom",era:"21st Century",themes:["self","freedom"]},{text:"A calm mind, a fit body, and a house full of love. These things cannot be bought. They must be earned.",author:"Naval Ravikant",school:"Practical Wisdom",era:"21st Century",themes:["joy","love"]},{text:"Antifragility is beyond resilience or robustness. The resilient resists shocks and stays the same; the antifragile gets better.",author:"Nassim Taleb",school:"Practical Wisdom",era:"21st Century",themes:["change","courage"]},{text:"Wind extinguishes a candle and energizes fire. Likewise with randomness, uncertainty, chaos: you want to use them, not hide from them.",author:"Nassim Taleb",school:"Practical Wisdom",era:"21st Century",themes:["courage","change"]},{text:"They will envy you for your success, your wealth, for your intelligence, for your looks — but rarely for your wisdom.",author:"Nassim Taleb",school:"Practical Wisdom",era:"21st Century",themes:["wisdom","self"]},{text:"Learn to fail with pride — and do so fast and cleanly. Maximize trial and error by mastering the error part.",author:"Nassim Taleb",school:"Practical Wisdom",era:"21st Century",themes:["courage","change"]},{text:"A Stoic is someone who transforms fear into prudence, pain into transformation, mistakes into initiation, and desire into undertaking.",author:"Nassim Taleb",school:"Practical Wisdom",era:"21st Century",themes:["courage","self"]},{text:"Missing a train is only painful if you run after it.",author:"Nassim Taleb",school:"Practical Wisdom",era:"21st Century",themes:["wisdom","suffering"]},{text:"I want to live happily in a world I don't understand.",author:"Nassim Taleb",school:"Practical Wisdom",era:"21st Century",themes:["joy","wisdom"]},{text:"Read books are far less valuable than unread ones. The library should contain as much of what you don't know as possible.",author:"Nassim Taleb",school:"Practical Wisdom",era:"21st Century",themes:["wisdom","truth"]},{text:"To have faith is to trust yourself to the water. When you swim you don't grab hold of the water, because if you do you will sink and drown. Instead you relax, and float.",author:"Alan Watts",school:"Eastern Philosophy",era:"20th Century",themes:["courage","self"]},{text:"Zen does not confuse spirituality with thinking about God while one is peeling potatoes. Zen spirituality is just to peel the potatoes.",author:"Alan Watts",school:"Eastern Philosophy",era:"20th Century",themes:["wisdom","meaning"]},{text:"I have realized that the past and future are real illusions, that they exist in the present, which is what there is and all there is.",author:"Alan Watts",school:"Eastern Philosophy",era:"20th Century",themes:["truth","change"]},{text:"A scholar tries to learn something everyday; a student of Buddhism tries to unlearn something daily.",author:"Alan Watts",school:"Eastern Philosophy",era:"20th Century",themes:["wisdom","self"]},{text:"If you go off into a far, far forest and get very quiet, you'll come to understand that you're connected with everything.",author:"Alan Watts",school:"Eastern Philosophy",era:"20th Century",themes:["self","love"]},{text:"For there is nothing heavier than compassion. Not even one's own pain weighs so heavy as the pain one feels with someone, for someone.",author:"Milan Kundera",school:"Literary Philosophy",era:"20th Century",themes:["love","suffering"]},{text:"True human goodness can come to the fore only when its recipient has no power. Mankind's true moral test consists of its attitude towards those who are at its mercy.",author:"Milan Kundera",school:"Literary Philosophy",era:"20th Century",themes:["love","truth"]},{text:"Living only one life, we can neither compare it with our previous lives nor perfect it in our lives to come.",author:"Milan Kundera",school:"Literary Philosophy",era:"20th Century",themes:["meaning","change"]},{text:"Think of yourself as dead. You have lived your life. Now take what's left and live it properly.",author:"Marcus Aurelius",school:"Stoicism",era:"2nd Century",themes:["death","meaning"]},{text:"It is the responsibility of leadership to work intelligently with what is given, and not waste time fantasizing about a world of flawless people and perfect choices.",author:"Marcus Aurelius",school:"Stoicism",era:"2nd Century",themes:["wisdom","courage"]},{text:"It's silly to try to escape other people's faults. They are inescapable. Just try to escape your own.",author:"Marcus Aurelius",school:"Stoicism",era:"2nd Century",themes:["self","wisdom"]},{text:"Because most of what we say and do is not essential. Ask yourself at every moment, 'Is this necessary?'",author:"Marcus Aurelius",school:"Stoicism",era:"2nd Century",themes:["wisdom","self"]},{text:"To stand up straight — not straightened.",author:"Marcus Aurelius",school:"Stoicism",era:"2nd Century",themes:["self","courage"]},{text:"The mind freed from passions is an impenetrable fortress — a person has no more secure place of refuge for all time.",author:"Marcus Aurelius",school:"Stoicism",era:"2nd Century",themes:["freedom","self"]},{text:"Fear keeps pace with hope. Both belong to a mind in suspense, to a mind in a state of anxiety through looking into the future.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["courage","wisdom"]},{text:"A gem cannot be polished without friction, nor a man perfected without trials.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["suffering","change"]},{text:"If you really want to escape the things that harass you, what you're needing is not to be in a different place but to be a different person.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["self","change"]},{text:"What progress, you ask, have I made? I have begun to be a friend to myself.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["self","love"]},{text:"The whole future lies in uncertainty: live immediately.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["meaning","courage"]},{text:"Until we have begun to go without them, we fail to realize how unnecessary many things are. We've been using them not because we needed them but because we had them.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["freedom","wisdom"]},{text:"To win true freedom you must be a slave to philosophy.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["freedom","wisdom"]},{text:"Associate with those who will make a better man of you. Welcome those whom you yourself can improve. The process is mutual.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["love","wisdom"]},{text:"Your task is not to seek for love, but merely to seek and find all the barriers within yourself that you have built against it.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["love","self"]},{text:"Love is the bridge between you and everything.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["love","truth"]},{text:"Let the beauty of what you love be what you do.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["love","meaning"]},{text:"The teacher who is indeed wise does not bid you to enter the house of his wisdom but rather leads you to the threshold of your mind.",author:"Kahlil Gibran",school:"Literary Philosophy",era:"20th Century",themes:["wisdom","truth"]},{text:"Your children are not your children. They are the sons and daughters of Life's longing for itself.",author:"Kahlil Gibran",school:"Literary Philosophy",era:"20th Century",themes:["love","freedom"]},{text:"Out of suffering have emerged the strongest souls; the most massive characters are seared with scars.",author:"Kahlil Gibran",school:"Literary Philosophy",era:"20th Century",themes:["suffering","courage"]},{text:"Wake at dawn with a winged heart and give thanks for another day of loving.",author:"Kahlil Gibran",school:"Literary Philosophy",era:"20th Century",themes:["joy","love"]},{text:"Keep me away from the wisdom which does not cry, the philosophy which does not laugh and the greatness which does not bow before children.",author:"Kahlil Gibran",school:"Literary Philosophy",era:"20th Century",themes:["wisdom","joy"]},{text:"Trees are poems that the earth writes upon the sky.",author:"Kahlil Gibran",school:"Literary Philosophy",era:"20th Century",themes:["truth","joy"]},{text:"Let there be spaces in your togetherness, and let the winds of the heavens dance between you.",author:"Kahlil Gibran",school:"Literary Philosophy",era:"20th Century",themes:["love","freedom"]},{text:"Above all, don't lie to yourself. The man who lies to himself and listens to his own lie comes to a point that he cannot distinguish the truth within him.",author:"Fyodor Dostoevsky",school:"Literary Philosophy",era:"19th Century",themes:["truth","self"]},{text:"What is hell? I maintain that it is the suffering of being unable to love.",author:"Fyodor Dostoevsky",school:"Literary Philosophy",era:"19th Century",themes:["love","suffering"]},{text:"The awful thing is that beauty is mysterious as well as terrible. God and the devil are fighting there and the battlefield is the heart of man.",author:"Fyodor Dostoevsky",school:"Literary Philosophy",era:"19th Century",themes:["self","truth"]},{text:"It's the great mystery of human life that old grief passes gradually into quiet tender joy.",author:"Fyodor Dostoevsky",school:"Literary Philosophy",era:"19th Century",themes:["suffering","joy"]},{text:"Pain and suffering are always inevitable for a large intelligence and a deep heart.",author:"Fyodor Dostoevsky",school:"Literary Philosophy",era:"19th Century",themes:["suffering","wisdom"]},{text:"To go wrong in one's own way is better than to go right in someone else's.",author:"Fyodor Dostoevsky",school:"Literary Philosophy",era:"19th Century",themes:["self","freedom"]},{text:"This is my last message to you: in sorrow, seek happiness.",author:"Fyodor Dostoevsky",school:"Literary Philosophy",era:"19th Century",themes:["joy","suffering"]},{text:"A foolish consistency is the hobgoblin of little minds.",author:"Ralph Waldo Emerson",school:"Transcendentalism",era:"19th Century",themes:["freedom","self"]},{text:"To be great is to be misunderstood.",author:"Ralph Waldo Emerson",school:"Transcendentalism",era:"19th Century",themes:["self","courage"]},{text:"Trust thyself: every heart vibrates to that iron string.",author:"Ralph Waldo Emerson",school:"Transcendentalism",era:"19th Century",themes:["self","courage"]},{text:"Nothing can bring you peace but yourself. Nothing can bring you peace but the triumph of principles.",author:"Ralph Waldo Emerson",school:"Transcendentalism",era:"19th Century",themes:["self","wisdom"]},{text:"What I must do is all that concerns me, not what the people think.",author:"Ralph Waldo Emerson",school:"Transcendentalism",era:"19th Century",themes:["self","freedom"]},{text:"Whoso would be a man, must be a nonconformist.",author:"Ralph Waldo Emerson",school:"Transcendentalism",era:"19th Century",themes:["freedom","courage"]},{text:"I went to the woods because I wished to live deliberately, to front only the essential facts of life.",author:"Henry David Thoreau",school:"Transcendentalism",era:"19th Century",themes:["meaning","self"]},{text:"Simplicity, simplicity, simplicity! Let your affairs be as two or three, and not a hundred or a thousand.",author:"Henry David Thoreau",school:"Transcendentalism",era:"19th Century",themes:["wisdom","freedom"]},{text:"If one advances confidently in the direction of his dreams, he will meet with a success unexpected in common hours.",author:"Henry David Thoreau",school:"Transcendentalism",era:"19th Century",themes:["courage","meaning"]},{text:"We need the tonic of wildness.",author:"Henry David Thoreau",school:"Transcendentalism",era:"19th Century",themes:["joy","freedom"]},{text:"Time is but the stream I go a-fishing in.",author:"Henry David Thoreau",school:"Transcendentalism",era:"19th Century",themes:["change","meaning"]},{text:"Heaven is under our feet as well as over our heads.",author:"Henry David Thoreau",school:"Transcendentalism",era:"19th Century",themes:["joy","truth"]},{text:"Live in each season as it passes; breathe the air, drink the drink, taste the fruit.",author:"Henry David Thoreau",school:"Transcendentalism",era:"19th Century",themes:["joy","meaning"]},{text:"In some ways, suffering ceases to be suffering at the moment it finds a meaning.",author:"Viktor Frankl",school:"Existentialism",era:"20th Century",themes:["suffering","meaning"]},{text:"Life is never made unbearable by circumstances, but only by lack of meaning and purpose.",author:"Viktor Frankl",school:"Existentialism",era:"20th Century",themes:["meaning","suffering"]},{text:"The absurd is born of this confrontation between the human need and the unreasonable silence of the world.",author:"Albert Camus",school:"Absurdism",era:"20th Century",themes:["truth","meaning"]},{text:"A free man thinks of nothing less than of death, and his wisdom is a meditation, not on death, but on life.",author:"Baruch Spinoza",school:"Rationalism",era:"17th Century",themes:["death","wisdom"]},{text:"I have made a ceaseless effort not to ridicule, not to bewail, not to scorn human actions, but to understand them.",author:"Baruch Spinoza",school:"Rationalism",era:"17th Century",themes:["wisdom","love"]},{text:"Emotion, which is suffering, ceases to be suffering as soon as we form a clear and precise picture of it.",author:"Baruch Spinoza",school:"Rationalism",era:"17th Century",themes:["suffering","wisdom"]},{text:"Nothing in Nature is random. A thing appears random only through the incompleteness of our knowledge.",author:"Baruch Spinoza",school:"Rationalism",era:"17th Century",themes:["truth","wisdom"]},{text:"Happiness is not the reward of virtue, but is virtue itself.",author:"Baruch Spinoza",school:"Rationalism",era:"17th Century",themes:["joy","self"]},{text:"The ultimate aim of government is not to rule, or restrain by fear, but to free every man from fear that he may live in all possible security.",author:"Baruch Spinoza",school:"Rationalism",era:"17th Century",themes:["freedom","courage"]},{text:"The heart has its reasons of which reason knows nothing.",author:"Blaise Pascal",school:"Christian Philosophy",era:"17th Century",themes:["love","truth"]},{text:"All men's miseries derive from not being able to sit in a quiet room alone.",author:"Blaise Pascal",school:"Christian Philosophy",era:"17th Century",themes:["self","wisdom"]},{text:"Man is only a reed, the weakest in nature, but he is a thinking reed.",author:"Blaise Pascal",school:"Christian Philosophy",era:"17th Century",themes:["self","wisdom"]},{text:"There are two equally dangerous extremes: to exclude reason, to admit nothing but reason.",author:"Blaise Pascal",school:"Christian Philosophy",era:"17th Century",themes:["truth","wisdom"]},{text:"In faith there is enough light for those who want to believe and enough shadows to blind those who don't.",author:"Blaise Pascal",school:"Christian Philosophy",era:"17th Century",themes:["truth","courage"]},{text:"The supreme function of reason is to show man that some things are beyond reason.",author:"Blaise Pascal",school:"Christian Philosophy",era:"17th Century",themes:["wisdom","truth"]},{text:"There is no way to happiness — happiness is the way.",author:"Thich Nhat Hanh",school:"Buddhism",era:"20th Century",themes:["joy","truth"]},{text:"Breathing in, I calm body and mind. Breathing out, I smile. Dwelling in the present moment I know this is the only moment.",author:"Thich Nhat Hanh",school:"Buddhism",era:"20th Century",themes:["joy","self"]},{text:"Many people think excitement is happiness. But when you are excited you are not peaceful. True happiness is based on peace.",author:"Thich Nhat Hanh",school:"Buddhism",era:"20th Century",themes:["joy","wisdom"]},{text:"Hope is important because it can make the present moment less difficult to bear. If we believe that tomorrow will be better, we can bear a hardship today.",author:"Thich Nhat Hanh",school:"Buddhism",era:"20th Century",themes:["courage","suffering"]},{text:"The mind can go in a thousand directions, but on this beautiful path, I walk in peace.",author:"Thich Nhat Hanh",school:"Buddhism",era:"20th Century",themes:["self","joy"]},{text:"Anxiety, the illness of our time, comes primarily from our inability to dwell in the present moment.",author:"Thich Nhat Hanh",school:"Buddhism",era:"20th Century",themes:["suffering","wisdom"]},{text:"The only way to have peace is to let go of expecting anything.",author:"Ayya Khema",school:"Buddhism",era:"20th Century",themes:["freedom","joy"]},{text:"We cannot change the outer world, but we can change our inner world.",author:"Ayya Khema",school:"Buddhism",era:"20th Century",themes:["self","wisdom"]},{text:"Meditation is not about feeling a certain way. It's about feeling the way you feel.",author:"Ayya Khema",school:"Buddhism",era:"20th Century",themes:["truth","self"]},{text:"The mind that is not baffled is not employed. The impeded stream is the one that sings.",author:"Ayya Khema",school:"Buddhism",era:"20th Century",themes:["suffering","wisdom"]},{text:"There is no enlightenment outside of daily life.",author:"Ayya Khema",school:"Buddhism",era:"20th Century",themes:["meaning","truth"]},{text:"Letting go is the lesson. Letting go is always the lesson.",author:"Ayya Khema",school:"Buddhism",era:"20th Century",themes:["freedom","change"]},{text:"The ego is nothing other than the focus of conscious attention.",author:"Ayya Khema",school:"Buddhism",era:"20th Century",themes:["self","truth"]},{text:"Peace is not the absence of conflict, but the ability to cope with it.",author:"Ayya Khema",school:"Buddhism",era:"20th Century",themes:["courage","joy"]},{text:"You are the sky. Everything else is just the weather.",author:"Pema Chödrön",school:"Buddhism",era:"20th Century",themes:["self","change"]},{text:"Nothing ever goes away until it has taught us what we need to know.",author:"Pema Chödrön",school:"Buddhism",era:"20th Century",themes:["suffering","wisdom"]},{text:"Only to the extent that we expose ourselves over and over to annihilation can that which is indestructible in us be found.",author:"Pema Chödrön",school:"Buddhism",era:"20th Century",themes:["courage","self"]},{text:"The healing comes from letting there be room for all of this to happen: room for grief, for relief, for misery, for joy.",author:"Pema Chödrön",school:"Buddhism",era:"20th Century",themes:["suffering","freedom"]},{text:"So even if the hot loneliness is there, and for 1.6 seconds we sit with that restlessness when yesterday we couldn't sit for even one—that's the journey of the warrior.",author:"Pema Chödrön",school:"Buddhism",era:"20th Century",themes:["courage","self"]},{text:"When you begin to touch your heart or let your heart be touched, you begin to discover that it's bottomless.",author:"Pema Chödrön",school:"Buddhism",era:"20th Century",themes:["love","self"]},{text:"If you let go a little, you will have a little peace. If you let go a lot, you will have a lot of peace.",author:"Ajahn Chah",school:"Buddhism",era:"20th Century",themes:["freedom","joy"]},{text:"Looking for peace is like looking for a turtle with a mustache. You won't be able to find it. But when your heart is ready, peace will come looking for you.",author:"Ajahn Chah",school:"Buddhism",era:"20th Century",themes:["joy","wisdom"]},{text:"Do not try to become anything. Do not make yourself into anything. Do not be a meditator. Do not become enlightened.",author:"Ajahn Chah",school:"Buddhism",era:"20th Century",themes:["self","freedom"]},{text:"If you want to understand suffering, you have to look into the nature of the mind.",author:"Ajahn Chah",school:"Buddhism",era:"20th Century",themes:["suffering","wisdom"]},{text:"Read yourself, not books. Truth is not outside; it's within.",author:"Ajahn Chah",school:"Buddhism",era:"20th Century",themes:["truth","self"]},{text:"The heart of the path is quite simple: do not be attached to anything.",author:"Ajahn Chah",school:"Buddhism",era:"20th Century",themes:["freedom","wisdom"]},{text:"We don't meditate to see heaven, but to end suffering.",author:"Ajahn Chah",school:"Buddhism",era:"20th Century",themes:["suffering","meaning"]},{text:"You yourself, as much as anybody in the entire universe, deserve your love and affection.",author:"Sharon Salzberg",school:"Buddhism",era:"20th Century",themes:["love","self"]},{text:"Mindfulness isn't difficult. What's difficult is to remember to be mindful.",author:"Sharon Salzberg",school:"Buddhism",era:"20th Century",themes:["wisdom","self"]},{text:"The difference between misery and happiness depends on what we do with our attention.",author:"Sharon Salzberg",school:"Buddhism",era:"20th Century",themes:["joy","self"]},{text:"Life is like an ever-shifting kaleidoscope — a slight change, and all patterns alter.",author:"Sharon Salzberg",school:"Buddhism",era:"20th Century",themes:["change","truth"]},{text:"Each decision we make, each action we take, is born out of an intention.",author:"Sharon Salzberg",school:"Buddhism",era:"20th Century",themes:["meaning","self"]},{text:"Faith is not a commodity we either have or don't have—it is an inner quality that unfolds as we learn to trust our own deepest experience.",author:"Sharon Salzberg",school:"Buddhism",era:"20th Century",themes:["courage","truth"]},{text:"In the end, just three things matter: How well we have lived. How well we have loved. How well we have learned to let go.",author:"Jack Kornfield",school:"Buddhism",era:"20th Century",themes:["death","love"]},{text:"The things that matter most in our lives are not fantastic or grand. They are moments when we touch one another.",author:"Jack Kornfield",school:"Buddhism",era:"20th Century",themes:["love","meaning"]},{text:"In a moment of mindfulness, we are not only more aware, we are more compassionate.",author:"Jack Kornfield",school:"Buddhism",era:"20th Century",themes:["love","wisdom"]},{text:"The art of attention is to quiet the restless mind.",author:"Jack Kornfield",school:"Buddhism",era:"20th Century",themes:["self","wisdom"]},{text:"Even in the midst of suffering, there is the possibility of finding peace.",author:"Jack Kornfield",school:"Buddhism",era:"20th Century",themes:["suffering","joy"]},{text:"Forgiveness does not mean we will forget, nor does it mean we condone the wrong. It means we let go of the pain.",author:"Jack Kornfield",school:"Buddhism",era:"20th Century",themes:["freedom","suffering"]},{text:"The boundary to what we can accept is the boundary to our freedom.",author:"Tara Brach",school:"Buddhism",era:"21st Century",themes:["freedom","truth"]},{text:"Perhaps the biggest tragedy of our lives is that freedom is possible, yet we can pass our years trapped in the same old patterns.",author:"Tara Brach",school:"Buddhism",era:"21st Century",themes:["freedom","change"]},{text:"Radical acceptance is the willingness to experience ourselves and our lives as it is.",author:"Tara Brach",school:"Buddhism",era:"21st Century",themes:["truth","self"]},{text:"Feeling compassion for ourselves in no way releases us from responsibility for our actions. Rather, it releases us from the self-hatred that prevents us from responding to our life with clarity and balance.",author:"Tara Brach",school:"Buddhism",era:"21st Century",themes:["love","self"]},{text:"We are uncomfortable because everything in our life keeps changing.",author:"Tara Brach",school:"Buddhism",era:"21st Century",themes:["change","suffering"]},{text:"What would it be like if I could accept life—accept this moment—exactly as it is?",author:"Tara Brach",school:"Buddhism",era:"21st Century",themes:["freedom","joy"]},{text:"Be here now.",author:"Ram Dass",school:"Eastern Philosophy",era:"20th Century",themes:["wisdom","joy"]},{text:"The quieter you become, the more you can hear.",author:"Ram Dass",school:"Eastern Philosophy",era:"20th Century",themes:["wisdom","self"]},{text:"We're all just walking each other home.",author:"Ram Dass",school:"Eastern Philosophy",era:"20th Century",themes:["love","death"]},{text:"The heart surrenders everything to the moment. The mind judges and holds back.",author:"Ram Dass",school:"Eastern Philosophy",era:"20th Century",themes:["love","self"]},{text:"Suffering is part of our training program for becoming wise.",author:"Ram Dass",school:"Eastern Philosophy",era:"20th Century",themes:["suffering","wisdom"]},{text:"The next message you need is always right where you are.",author:"Ram Dass",school:"Eastern Philosophy",era:"20th Century",themes:["truth","meaning"]},{text:"As long as you have certain desires about how it ought to be you can't see how it is.",author:"Ram Dass",school:"Eastern Philosophy",era:"20th Century",themes:["truth","freedom"]},{text:"Enlightenment is a destructive process. It has nothing to do with becoming better or being happier. It is the crumbling away of untruth.",author:"Adyashanti",school:"Eastern Philosophy",era:"21st Century",themes:["truth","change"]},{text:"The Truth is the only thing you'll ever run into that has no agenda.",author:"Adyashanti",school:"Eastern Philosophy",era:"21st Century",themes:["truth","freedom"]},{text:"When you rest in quietness and your image of yourself fades, and your image of the world fades, and your ideas of others fade, what's left?",author:"Adyashanti",school:"Eastern Philosophy",era:"21st Century",themes:["self","truth"]},{text:"Do not be attached to the outcome of your practice; be attached only to the practice itself.",author:"Adyashanti",school:"Eastern Philosophy",era:"21st Century",themes:["wisdom","freedom"]},{text:"The separate self dissolves when you realize it never existed in the first place.",author:"Adyashanti",school:"Eastern Philosophy",era:"21st Century",themes:["self","truth"]},{text:"The entire path is nothing but learning to observe the reality of this moment.",author:"S.N. Goenka",school:"Buddhism",era:"20th Century",themes:["wisdom","truth"]},{text:"Remain equanimous. Understanding the true nature of this moment, this too will pass.",author:"S.N. Goenka",school:"Buddhism",era:"20th Century",themes:["change","wisdom"]},{text:"The only conversion involved in Vipassana is from misery to happiness, from bondage to liberation.",author:"S.N. Goenka",school:"Buddhism",era:"20th Century",themes:["freedom","joy"]},{text:"Learn to use meditation in daily life, that is the real work.",author:"S.N. Goenka",school:"Buddhism",era:"20th Century",themes:["meaning","wisdom"]},{text:"Sit in your cell and your cell will teach you everything.",author:"Desert Fathers",school:"Christian Mysticism",era:"4th Century",themes:["wisdom","self"]},{text:"A man who keeps death before his eyes will at all times overcome his cowardliness.",author:"Abba Anthony",school:"Christian Mysticism",era:"4th Century",themes:["courage","truth"]},{text:"The soul that walks in love neither tires others nor grows tired.",author:"St. John of the Cross",school:"Christian Mysticism",era:"16th Century",themes:["love","joy"]},{text:"In the evening of life, we will be judged on love alone.",author:"St. John of the Cross",school:"Christian Mysticism",era:"16th Century",themes:["love","meaning"]},{text:"All shall be well, and all shall be well, and all manner of thing shall be well.",author:"Julian of Norwich",school:"Christian Mysticism",era:"14th Century",themes:["courage","truth"]},{text:"Be still and know.",author:"Psalm 46:10",school:"Judeo-Christian",era:"Ancient",themes:["wisdom","truth"]},{text:"The wound is the place where the Light enters you.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["suffering","truth"]},{text:"What you seek is seeking you.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["meaning","love"]},{text:"Let yourself be silently drawn by the strange pull of what you really love.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["love","meaning"]},{text:"Yesterday I was clever, so I wanted to change the world. Today I am wise, so I am changing myself.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["wisdom","change"]},{text:"Wear gratitude like a cloak and it will feed every corner of your life.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["joy","wisdom"]},{text:"Set your life on fire. Seek those who fan your flames.",author:"Rumi",school:"Sufism",era:"13th Century",themes:["love","courage"]},{text:"If I am not for myself, who will be for me? If I am only for myself, what am I? And if not now, when?",author:"Hillel the Elder",school:"Jewish Philosophy",era:"1st Century BCE",themes:["self","meaning"]},{text:"We do not see things as they are, we see them as we are.",author:"Talmud",school:"Jewish Philosophy",era:"Ancient",themes:["wisdom","truth"]},{text:"It is not your responsibility to finish the work, but neither are you free to desist from it.",author:"Rabbi Tarfon",school:"Jewish Philosophy",era:"2nd Century",themes:["meaning","courage"]},{text:"When meditation is mastered, the mind is unwavering like the flame of a lamp in a windless place.",author:"Bhagavad Gita",school:"Hinduism",era:"Ancient",themes:["wisdom","self"]},{text:"You have the right to work, but never to the fruit of work.",author:"Bhagavad Gita",school:"Hinduism",era:"Ancient",themes:["wisdom","freedom"]},{text:"The Self is everywhere. Bright is the Self, indivisible, untouched by sin, wise, transcendent.",author:"Isha Upanishad",school:"Hinduism",era:"Ancient",themes:["truth","self"]},{text:"From the unreal lead me to the real. From darkness lead me to light.",author:"Brihadaranyaka Upanishad",school:"Hinduism",era:"Ancient",themes:["truth","courage"]},{text:"We suffer more often in imagination than in reality.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["suffering","wisdom"]},{text:"True happiness is to enjoy the present, without anxious dependence upon the future.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["joy","wisdom"]},{text:"Luck is what happens when preparation meets opportunity.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["courage","wisdom"]},{text:"It is not that we have a short time to live, but that we waste a lot of it.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["meaning","wisdom"]},{text:"Associate with people who are likely to improve you.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["love","wisdom"]},{text:"If a man knows not to which port he sails, no wind is favorable.",author:"Seneca",school:"Stoicism",era:"1st Century",themes:["meaning","truth"]},{text:"The impediment to action advances action. What stands in the way becomes the way.",author:"Marcus Aurelius",school:"Stoicism",era:"2nd Century",themes:["courage","wisdom"]},{text:"Accept the things to which fate binds you, and love the people with whom fate brings you together.",author:"Marcus Aurelius",school:"Stoicism",era:"2nd Century",themes:["love","meaning"]},{text:"How much time he gains who does not look to see what his neighbor says or does or thinks.",author:"Marcus Aurelius",school:"Stoicism",era:"2nd Century",themes:["freedom","self"]},{text:"Between stimulus and response there is a space. In that space is our power to choose our response.",author:"Viktor Frankl",school:"Existentialism",era:"20th Century",themes:["freedom","wisdom"]},{text:"When we are no longer able to change a situation, we are challenged to change ourselves.",author:"Viktor Frankl",school:"Existentialism",era:"20th Century",themes:["courage","change"]},{text:"Everything can be taken from a man but one thing: the last of human freedoms—to choose one's attitude.",author:"Viktor Frankl",school:"Existentialism",era:"20th Century",themes:["freedom","courage"]},{text:"In some ways suffering ceases to be suffering at the moment it finds a meaning.",author:"Viktor Frankl",school:"Existentialism",era:"20th Century",themes:["suffering","meaning"]},{text:"What is to give light must endure burning.",author:"Viktor Frankl",school:"Existentialism",era:"20th Century",themes:["suffering","meaning"]},{text:"The one thing you can't take away from me is the way I choose to respond to what you do to me.",author:"Viktor Frankl",school:"Existentialism",era:"20th Century",themes:["freedom","courage"]},{text:"Courage is not the absence of fear, but rather the judgment that something else is more important than fear.",author:"Ambrose Redmoon",school:"Contemporary",era:"20th Century",themes:["courage","meaning"]},{text:"The cave you fear to enter holds the treasure you seek.",author:"Joseph Campbell",school:"Mythology",era:"20th Century",themes:["courage","truth"]},{text:"Follow your bliss and the universe will open doors where there were only walls.",author:"Joseph Campbell",school:"Mythology",era:"20th Century",themes:["joy","meaning"]},{text:"We must be willing to let go of the life we planned so as to have the life that is waiting for us.",author:"Joseph Campbell",school:"Mythology",era:"20th Century",themes:["change","freedom"]},{text:"The privilege of a lifetime is being who you are.",author:"Joseph Campbell",school:"Mythology",era:"20th Century",themes:["self","meaning"]},{text:"People say that what we're all seeking is a meaning for life. I think that what we're seeking is an experience of being alive.",author:"Joseph Campbell",school:"Mythology",era:"20th Century",themes:["meaning","joy"]},{text:"The goal of life is to make your heartbeat match the beat of the universe.",author:"Joseph Campbell",school:"Mythology",era:"20th Century",themes:["meaning","truth"]},{text:"No man ever steps in the same river twice, for it is not the same river and he is not the same man.",author:"Heraclitus",school:"Pre-Socratic",era:"5th Century BCE",themes:["change","truth"]},{text:"The soul is dyed the color of its thoughts.",author:"Heraclitus",school:"Pre-Socratic",era:"5th Century BCE",themes:["self","wisdom"]},{text:"Character is destiny.",author:"Heraclitus",school:"Pre-Socratic",era:"5th Century BCE",themes:["self","meaning"]},{text:"Be kind, for everyone you meet is fighting a hard battle.",author:"Plato",school:"Classical Greek",era:"4th Century BCE",themes:["love","wisdom"]},{text:"The first and greatest victory is to conquer yourself.",author:"Plato",school:"Classical Greek",era:"4th Century BCE",themes:["self","courage"]},{text:"Wise men speak because they have something to say; fools because they have to say something.",author:"Plato",school:"Classical Greek",era:"4th Century BCE",themes:["wisdom","truth"]},{text:"We can easily forgive a child who is afraid of the dark; the real tragedy of life is when men are afraid of the light.",author:"Plato",school:"Classical Greek",era:"4th Century BCE",themes:["courage","truth"]},{text:"Knowing yourself is the beginning of all wisdom.",author:"Aristotle",school:"Classical Greek",era:"4th Century BCE",themes:["self","wisdom"]},{text:"Happiness depends upon ourselves.",author:"Aristotle",school:"Classical Greek",era:"4th Century BCE",themes:["joy","self"]},{text:"Excellence is never an accident. It is always the result of high intention, sincere effort, and intelligent execution.",author:"Aristotle",school:"Classical Greek",era:"4th Century BCE",themes:["meaning","wisdom"]},{text:"We are what we repeatedly do. Excellence, then, is not an act, but a habit.",author:"Aristotle",school:"Classical Greek",era:"4th Century BCE",themes:["self","wisdom"]},{text:"It is during our darkest moments that we must focus to see the light.",author:"Aristotle",school:"Classical Greek",era:"4th Century BCE",themes:["courage","suffering"]},{text:"In the middle of difficulty lies opportunity.",author:"Albert Einstein",school:"Contemporary",era:"20th Century",themes:["courage","wisdom"]},{text:"Imagination is more important than knowledge. Knowledge is limited. Imagination encircles the world.",author:"Albert Einstein",school:"Contemporary",era:"20th Century",themes:["wisdom","truth"]},{text:"The measure of intelligence is the ability to change.",author:"Albert Einstein",school:"Contemporary",era:"20th Century",themes:["change","wisdom"]},{text:"A ship is safe in harbor, but that's not what ships are for.",author:"John A. Shedd",school:"Contemporary",era:"20th Century",themes:["courage","meaning"]},{text:"Ring the bells that still can ring. Forget your perfect offering. There is a crack in everything. That's how the light gets in.",author:"Leonard Cohen",school:"Literary Philosophy",era:"20th Century",themes:["truth","joy"]},{text:"And still, after all this time, the sun never says to the earth, 'You owe me.' Look what happens with a love like that. It lights the whole sky.",author:"Hafiz",school:"Sufism",era:"14th Century",themes:["love","joy"]},{text:"Even after all this time, the sun never says to the earth, 'You owe me.'",author:"Hafiz",school:"Sufism",era:"14th Century",themes:["love","freedom"]},{text:"Fear is the cheapest room in the house. I would like to see you living in better conditions.",author:"Hafiz",school:"Sufism",era:"14th Century",themes:["courage","joy"]}],Gs=["meaning","death","love","courage","change","self","suffering","joy","truth","freedom"],Ws=[...new Set(Ja.map(t=>t.school))].sort(),io={box:{name:"Box Breathing",description:"Navy SEAL calm focus",recommendedCycles:8,phases:[{name:"inhale",label:"inhale",duration:4},{name:"holdFull",label:"hold",duration:4},{name:"exhale",label:"exhale",duration:4},{name:"holdEmpty",label:"hold",duration:4}],color:{inhale:"#1a3a4a",holdFull:"#2a4a3a",exhale:"#2a3a4a",holdEmpty:"#1a2a3a"}},ocean:{name:"Ocean Breath",description:"Slow, wave-like rhythm",recommendedCycles:8,phases:[{name:"inhale",label:"Inhale",duration:6},{name:"holdFull",label:"Pause",duration:2},{name:"exhale",label:"Exhale",duration:8},{name:"holdEmpty",label:"Rest",duration:2}],color:{inhale:"#1a3a5a",holdFull:"#2a4a5a",exhale:"#1a2a4a",holdEmpty:"#1a2a3a"}},physiologicalSigh:{name:"Physiological Sigh",description:"Fastest way to calm (Huberman)",recommendedCycles:10,phases:[{name:"inhale",label:"Inhale",duration:2},{name:"inhale",label:"Sip more air",duration:1},{name:"exhale",label:"Long exhale",duration:6},{name:"holdEmpty",label:"Rest",duration:1}],color:{inhale:"#1a3a5a",exhale:"#1a2a4a",holdEmpty:"#1a2a3a"}},twoToOne:{name:"2:1 Breathing",description:"Exhale double the inhale",recommendedCycles:10,phases:[{name:"inhale",label:"Inhale",duration:4},{name:"exhale",label:"Slow exhale",duration:8}],color:{inhale:"#1a3a4a",exhale:"#1a2a3a"}},fourSixBreath:{name:"4-6 Anxiety Relief",description:"Quick parasympathetic shift",recommendedCycles:10,phases:[{name:"inhale",label:"Inhale",duration:4},{name:"exhale",label:"Exhale",duration:6}],color:{inhale:"#2a3a4a",exhale:"#1a2a4a"}},deepBelly:{name:"Diaphragmatic",description:"Deep belly breathing",recommendedCycles:8,phases:[{name:"inhale",label:"Fill belly",duration:5},{name:"holdFull",label:"Pause",duration:2},{name:"exhale",label:"Release",duration:6}],color:{inhale:"#1a4a3a",holdFull:"#2a4a4a",exhale:"#1a3a3a"}},vagalTone:{name:"Vagal Toning",description:"Activates vagus nerve",recommendedCycles:6,phases:[{name:"inhale",label:"Deep inhale",duration:4},{name:"holdFull",label:"Brief hold",duration:2},{name:"exhale",label:"Humming exhale",duration:10},{name:"holdEmpty",label:"Natural pause",duration:2}],color:{inhale:"#1a3a5a",holdFull:"#2a4a5a",exhale:"#1a2a5a",holdEmpty:"#1a2a3a"}},alternate:{name:"Alternate Nostril",description:"Nadi Shodhana - balances",recommendedCycles:5,phases:[{name:"inhale",label:"Left in",duration:4},{name:"holdFull",label:"Hold",duration:4},{name:"exhale",label:"Right out",duration:4},{name:"inhale",label:"Right in",duration:4},{name:"holdFull",label:"Hold",duration:4},{name:"exhale",label:"Left out",duration:4}],color:{inhale:"#1a3a5a",holdFull:"#2a4a4a",exhale:"#1a2a4a"}},cooling:{name:"Sitali Cooling",description:"Cools body and mind",recommendedCycles:8,phases:[{name:"inhale",label:"Roll tongue, inhale through mouth",duration:4},{name:"holdFull",label:"Hold",duration:2},{name:"exhale",label:"Nose exhale",duration:6}],color:{inhale:"#1a4a5a",holdFull:"#2a5a5a",exhale:"#1a3a4a"}},antiAnxiety:{name:"Anti-Anxiety",description:"Long exhale with pause",recommendedCycles:8,phases:[{name:"inhale",label:"Gentle inhale",duration:3},{name:"exhale",label:"Extended exhale",duration:9},{name:"holdEmpty",label:"Natural rest",duration:3}],color:{inhale:"#1a3a4a",exhale:"#1a2a3a",holdEmpty:"#0a1a2a"}}},tn={tap:()=>Ln.impact({style:jn.Light}).catch(()=>{}),soft:()=>Ln.impact({style:jn.Light}).catch(()=>{}),medium:()=>Ln.impact({style:jn.Medium}).catch(()=>{}),selection:()=>Ln.selectionChanged().catch(()=>{}),success:()=>Ln.notification({type:aa.Success}).catch(()=>{}),inhale:()=>Ln.impact({style:jn.Light}).catch(()=>{}),exhale:()=>Ln.impact({style:jn.Light}).catch(()=>{}),hold:()=>Ln.impact({style:jn.Light}).catch(()=>{})},Hs=11,ea=2*Math.PI/Hs,jo=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||window.innerWidth<768,Ys=jo?.6:1,Fn=[{key:"geometry",name:"Torus"},{key:"ripples",name:"Ripples"},{key:"fern",name:"Fern"},{key:"oceanusProfundus",name:"Deep Ocean"},{key:"dandelion",name:"Dandelion"},{key:"fungusDimensio",name:"Mycelium"},{key:"maloka",name:"Maloka"},{key:"machinaTemporis",name:"Clockwork"},{key:"tree",name:"Fractal Tree"},{key:"peyoteVisio",name:"Cacti"},{key:"underwater",name:"Abyss"},{key:"corpusStellae",name:"Astral Body"},{key:"lavaTouch",name:"Lava Lamp"},{key:"jellyfish2d",name:"Drift"},{key:"portaDimensionum",name:"Portal"},{key:"mountains",name:"Mountains"},{key:"arborMundi",name:"World Tree"}],ja=[{key:"torus",name:"Torus",create:()=>new Pn(1,.4,16,100)},{key:"torusKnot",name:"Knot",create:()=>new rs(.7,.25,100,16)}],Jn=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],ia={C:130.81,"C#":138.59,D:146.83,"D#":155.56,E:164.81,F:174.61,"F#":185,G:196,"G#":207.65,A:220,"A#":233.08,B:246.94},Qn=[{name:"major",intervals:[0,2,4,5,7,9,11]},{name:"minor",intervals:[0,2,3,5,7,8,10]},{name:"dorian",intervals:[0,2,3,5,7,9,10]},{name:"phrygian",intervals:[0,1,3,5,7,8,10]},{name:"lydian",intervals:[0,2,4,6,7,9,11]},{name:"mixolydian",intervals:[0,2,4,5,7,9,10]},{name:"locrian",intervals:[0,1,3,5,6,8,10]},{name:"harmonic minor",intervals:[0,2,3,5,7,8,11]},{name:"melodic minor",intervals:[0,2,3,5,7,9,11]},{name:"pentatonic major",intervals:[0,2,4,7,9]},{name:"pentatonic minor",intervals:[0,3,5,7,10]},{name:"blues",intervals:[0,3,5,6,7,10]},{name:"whole tone",intervals:[0,2,4,6,8,10]},{name:"insen",intervals:[0,1,5,7,8]},{name:"hijaz",intervals:[0,1,4,5,7,8,11]},{name:"hungarian minor",intervals:[0,2,3,6,7,8,11]}],{useState:xr,useEffect:br,useRef:Os,useCallback:vr}=et;function xo({theme:t,primaryHue:e=162,onHueChange:o,backgroundMode:n=!1,currentVisual:z,onVisualChange:N,breathSession:ve=null,externalTouchRef:Q=null}){var wn,Ct,Qt,A;const S=e,we=1,ut=n?.3:1,ne=et.useRef(null),jt=et.useRef(null),Dt=et.useRef(null),Gt=et.useRef([]);et.useRef(null);const bt=et.useRef(null),ht=et.useRef(null),gt=et.useRef(null),yt=et.useRef(null),tt=et.useRef(1),Ye=et.useRef(0),Rt=et.useRef(ve);Rt.current=ve;const[St,at]=et.useState("geometry"),Z=z!==void 0?z:St,qe=N!==void 0?N:at,[Ot,pe]=et.useState("torus"),[re,Ee]=et.useState(!1),[oe,ge]=et.useState("relaxation"),[Oe,$t]=et.useState(!1),ct=et.useRef(null);et.useEffect(()=>{tt.current=1,Ye.current=0},[Z]),et.useRef({startTime:Date.now(),phaseIndex:0,phaseStartTime:Date.now()});const[Tt,vt]=et.useState({phase:.5,phaseLabel:"inhale",isHolding:!1}),d=et.useRef([]),Ie=et.useRef([]),P=et.useRef(null),Y=et.useRef(0),ke=et.useRef(null);et.useEffect(()=>{if(!Q)return;const h=setInterval(()=>{const f=Q.current||[];f.forEach(a=>{d.current.find(R=>R.id===a.id)||(d.current.push({id:a.id,x:a.x,y:a.y,startX:a.x,startY:a.y,velocity:{x:0,y:0},active:!0,startTime:Date.now()}),Ie.current.push({x:a.x,y:a.y,startTime:Date.now(),duration:1500,maxRadius:100}))}),Q.current=f.filter(a=>Date.now()-a.time<100)},16);return()=>clearInterval(h)},[Q]);const H=et.useCallback(h=>{if(n)return;const f=Fn.findIndex(b=>b.key===Z);let a;h>0?a=(f+1)%Fn.length:a=(f-1+Fn.length)%Fn.length,qe(Fn[a].key),$t(!0),ct.current&&clearTimeout(ct.current),ct.current=setTimeout(()=>$t(!1),1500)},[Z,n]),V=Os(null),Ae=et.useCallback(h=>{if(n||re)return;h.preventDefault();const f=h.touches?Array.from(h.touches):[{clientX:h.clientX,clientY:h.clientY,identifier:"mouse"}];f.length===1&&(P.current={x:f[0].clientX,y:f[0].clientY,time:Date.now()}),f.forEach(a=>{d.current.find(R=>R.id===a.identifier)||(Z!=="lavaTouch"&&(V.current&&clearTimeout(V.current),V.current=setTimeout(()=>{tn.tap(),V.current=null},60)),d.current.push({id:a.identifier,x:a.clientX,y:a.clientY,startX:a.clientX,startY:a.clientY,velocity:{x:0,y:0},active:!0,startTime:Date.now()}),Ie.current.push({x:a.clientX,y:a.clientY,startTime:Date.now(),maxRadius:150,duration:1e3}))})},[n,re,Z]),ee=et.useCallback(h=>{if(n||re)return;(h.touches?Array.from(h.touches):[{clientX:h.clientX,clientY:h.clientY,identifier:"mouse"}]).forEach(a=>{const b=d.current.find(R=>R.id===a.identifier);if(b){if(V.current){const R=Math.abs(a.clientX-b.startX),w=Math.abs(a.clientY-b.startY);(R>15||w>15)&&(clearTimeout(V.current),V.current=null)}b.velocity.x=a.clientX-b.x,b.velocity.y=a.clientY-b.y,b.x=a.clientX,b.y=a.clientY}})},[n,re]),he=et.useCallback(h=>{if(n)return;const f=h.changedTouches?Array.from(h.changedTouches):[{identifier:"mouse",clientX:h.clientX,clientY:h.clientY}];if(P.current&&f.length===1){const a=f[0].clientX,b=f[0].clientY,R=a-P.current.x,w=b-P.current.y,J=Date.now()-P.current.time;if(Math.abs(R)>60&&Math.abs(R)>Math.abs(w)*1.5&&J<400){V.current&&(clearTimeout(V.current),V.current=null),d.current=[],H(R>0?-1:1),P.current=null;return}P.current=null}f.forEach(a=>{const b=d.current.find(R=>R.id===a.identifier);b&&(b.active=!1,b.endTime=Date.now())}),setTimeout(()=>{d.current=d.current.filter(a=>a.active||Date.now()-a.endTime<2e3)},2e3)},[n,H,re]),Me=et.useRef(re);Me.current=re;const nt=et.useRef(n);nt.current=n;const Ze=et.useRef(0);et.useEffect(()=>{if(n)return;const h=f=>{if(Me.current)return;Y.current+=f.deltaY,Ze.current+=f.deltaX,clearTimeout(ke.current),ke.current=setTimeout(()=>{Y.current=0,Ze.current=0},200),Math.abs(Ze.current)>50&&(f.preventDefault(),d.current=[],H(Ze.current>0?1:-1),Ze.current=0,Y.current=0)};return window.addEventListener("wheel",h,{passive:!1}),()=>window.removeEventListener("wheel",h)},[n,H]),et.useEffect(()=>{const h=b=>{if(nt.current||Me.current)return;const R=Array.from(b.touches);R.length===1&&(P.current={x:R[0].clientX,y:R[0].clientY,time:Date.now()}),R.forEach(w=>{d.current.find(K=>K.id===w.identifier)||(d.current.push({id:w.identifier,x:w.clientX,y:w.clientY,startX:w.clientX,startY:w.clientY,velocity:{x:0,y:0},active:!0,startTime:Date.now()}),Ie.current.push({x:w.clientX,y:w.clientY,startTime:Date.now(),maxRadius:150,duration:1e3}))})},f=b=>{if(nt.current||Me.current)return;Array.from(b.touches).forEach(w=>{const J=d.current.find(K=>K.id===w.identifier);J&&(J.velocity.x=w.clientX-J.x,J.velocity.y=w.clientY-J.y,J.x=w.clientX,J.y=w.clientY)})},a=b=>{if(nt.current)return;const R=Array.from(b.changedTouches);if(P.current&&R.length===1){const w=R[0].clientX,J=R[0].clientY,K=w-P.current.x,te=J-P.current.y,ae=Date.now()-P.current.time;if(Math.abs(K)>60&&Math.abs(K)>Math.abs(te)*1.5&&ae<400){d.current=[],H(K>0?-1:1),P.current=null;return}P.current=null}R.forEach(w=>{const J=d.current.find(K=>K.id===w.identifier);J&&(J.active=!1,J.endTime=Date.now())}),setTimeout(()=>{d.current=d.current.filter(w=>w.active||Date.now()-w.endTime<2e3)},2e3)};return window.addEventListener("touchstart",h,{passive:!0}),window.addEventListener("touchmove",f,{passive:!0}),window.addEventListener("touchend",a,{passive:!0}),()=>{window.removeEventListener("touchstart",h),window.removeEventListener("touchmove",f),window.removeEventListener("touchend",a)}},[H]);const xe=et.useCallback((h,f,a=200)=>{let b={x:0,y:0,strength:0};const R=Date.now();return d.current.forEach(w=>{const J=h-w.x,K=f-w.y,te=Math.sqrt(J*J+K*K);if(te<a){let ae=1-te/a;if(!w.active){const x=Math.max(0,1-(R-w.endTime)/1500);ae*=x}const p=Math.atan2(K,J);b.x+=Math.cos(p)*ae*30,b.y+=Math.sin(p)*ae*30,b.strength=Math.max(b.strength,ae)}}),b},[]),Et=et.useCallback(h=>{const f=Date.now();Ie.current=Ie.current.filter(a=>{const b=f-a.startTime;if(b>a.duration)return!1;const R=b/a.duration,w=a.maxRadius*R,J=(1-R)*.4;return h.beginPath(),h.arc(a.x,a.y,w,0,Math.PI*2),h.strokeStyle=`hsla(${S}, 52%, 68%, ${J})`,h.lineWidth=2*(1-R),h.stroke(),!0})},[S]),je=et.useCallback(h=>{const f=io[oe];if(!f){const J=Math.sin(h*ea)*.5+.5;return{phase:J,phaseName:J>.5?"inhale":"exhale",phaseLabel:J>.5?"inhale":"exhale",isInhaling:J>.5}}const a=f.phases,b=a.reduce((J,K)=>J+K.duration,0),R=h%b;let w=0;for(let J=0;J<a.length;J++){const K=a[J];if(R<w+K.duration){const te=(R-w)/K.duration,ae=K.name==="inhale",p=K.name==="holdFull"||K.name==="holdEmpty";let x;return K.name==="inhale"?x=1-Math.pow(1-te,3):K.name==="holdFull"?x=1:K.name==="exhale"?x=1-Math.pow(te,3):x=0,{phase:x,phaseName:K.name,phaseLabel:K.label,isInhaling:ae,isHolding:p,phaseProgress:te}}w+=K.duration}return{phase:.5,phaseName:"inhale",phaseLabel:"inhale",isInhaling:!0}},[oe]),ue=et.useCallback(h=>{const f=Rt.current;if(f&&f.isActive){const{phase:a,phaseProgress:b}=f;return a==="inhale"?b:a==="holdFull"?1:a==="exhale"?1-b:a==="holdEmpty"?0:.5}return je(h).phase},[je]);et.useEffect(()=>{const h=Date.now();let f;const a=()=>{const b=(Date.now()-h)/1e3,R=je(b);vt({phase:R.phase,phaseLabel:R.phaseLabel,isHolding:R.isHolding||!1}),f=requestAnimationFrame(a)};return a(),()=>cancelAnimationFrame(f)},[je]),et.useEffect(()=>{if(Z!=="lungs"||!ne.current||typeof Tn>"u")return;d.current=[];const h=new gn;bt.current=h;const f=new xn(50,window.innerWidth/window.innerHeight,.1,1e3);f.position.set(0,-.5,8.5),f.lookAt(0,-.5,0);const a=new bn({antialias:!0,alpha:!0});a.setSize(window.innerWidth,window.innerHeight),a.setPixelRatio(Math.min(window.devicePixelRatio,2)),a.setClearColor(0,0),ne.current.appendChild(a.domElement),a.domElement.style.pointerEvents="none",ht.current=a,yt.current=new An;const R=((qt,Ft,Wt)=>{Ft/=100,Wt/=100;const be=Ft*Math.min(Wt,1-Wt),k=j=>{const l=(j+qt/30)%12;return Wt-be*Math.max(Math.min(l-3,9-l,1),-1)};return(Math.round(k(0)*255)<<16)+(Math.round(k(8)*255)<<8)+Math.round(k(4)*255)})(S,52,68),w=new Fe;h.add(w),n&&(w.rotation.x=.35);const J=[],K=[],te=(qt=.85)=>{const Ft=new Le({color:R,wireframe:!0,transparent:!0,opacity:qt});return K.push(Ft),Ft},ae=new Un(.12,.12,1.6,16,12,!0);J.push(ae);const p=new De(ae,te());p.position.y=1.6,w.add(p);for(let qt=0;qt<8;qt++){const Ft=new Pn(.14,.025,8,24);J.push(Ft);const Wt=new De(Ft,te());Wt.position.y=2.2-qt*.2,Wt.rotation.x=Math.PI/2,w.add(Wt)}const x=[new g(0,.8,0),new g(-.2,.55,0),new g(-.4,.25,0),new g(-.6,0,0)],G=new Sn(x),B=new zn(G,12,.07,12,!1);J.push(B),w.add(new De(B,te()));const F=[new g(-.6,0,0),new g(-.75,.15,.02),new g(-.9,.3,.03),new g(-1,.45,0)],r=new Sn(F),u=new zn(r,10,.05,10,!1);J.push(u),w.add(new De(u,te()));const C=[new g(-.6,0,0),new g(-.75,-.2,.02),new g(-.9,-.4,.03),new g(-1,-.55,0)],c=new Sn(C),i=new zn(c,10,.05,10,!1);J.push(i),w.add(new De(i,te()));const O=[new g(0,.8,0),new g(.2,.6,0),new g(.4,.35,0),new g(.55,.15,0)],ce=new Sn(O),M=new zn(ce,12,.07,12,!1);J.push(M),w.add(new De(M,te()));const s=[new g(.55,.15,0),new g(.7,.35,.02),new g(.85,.5,.02),new g(1,.6,0)],D=new Sn(s),E=new zn(D,10,.05,10,!1);J.push(E),w.add(new De(E,te()));const v=[new g(.55,.15,0),new g(.7,.05,.03),new g(.9,0,.03),new g(1.05,0,0)],U=new Sn(v),m=new zn(U,10,.045,10,!1);J.push(m),w.add(new De(m,te()));const y=[new g(.55,.15,0),new g(.65,-.1,.02),new g(.8,-.35,.02),new g(1,-.55,0)],T=new Sn(y),L=new zn(T,10,.05,10,!1);J.push(L),w.add(new De(L,te()));const q=(qt,Ft)=>{const Wt=qt==="left",be=Wt?-1:1;let k;Ft==="upper"?k={x:be*1.15,y:Wt?.5:.6,scaleX:.55,scaleY:Wt?.75:.65,scaleZ:.4}:Ft==="middle"?k={x:be*1.2,y:0,scaleX:.5,scaleY:.4,scaleZ:.38}:k={x:be*1.2,y:Wt?-.55:-.6,scaleX:.6,scaleY:Wt?.8:.75,scaleZ:.45};const j=new en(1,24,18);J.push(j);const l=j.attributes.position.array;for(let se=0;se<l.length;se+=3){let Te=l[se],X=l[se+1],de=l[se+2];if((Wt&&Te>0||!Wt&&Te<0)&&(Te*=.5),Wt&&Te<-.3||!Wt&&Te>.3){const Se=1+Math.abs(Te)*.1;de*=Se}if(Wt&&Ft==="lower"){const Se=Te+.4,Xe=X+.3,Qe=Math.sqrt(Se*Se+Xe*Xe),$e=Math.exp(-Qe*Qe*4)*.35;Te+=$e}if(Ft==="upper"&&X>.6){const Se=1-(X-.6)*.5;Te*=Se,de*=Se}Ft==="lower"&&X<-.7&&(X=-.7-(X+.7)*.3),l[se]=Te*k.scaleX,l[se+1]=X*k.scaleY,l[se+2]=de*k.scaleZ}j.computeVertexNormals();const W=new De(j,te(.7));return W.position.set(k.x,k.y,0),W.userData={side:qt,lobeType:Ft,baseScale:{...k}},W},le=q("left","upper"),$=q("left","lower"),Pe=q("right","upper"),Je=q("right","middle"),pt=q("right","lower");w.add(le),w.add($),w.add(Pe),w.add(Je),w.add(pt);const dt=[le,$,Pe,Je,pt];w.position.y=-.3,gt.current=w;let Mt=.5,_=0;const ye=.06,Re=.85;let Ue,ft=!0;const wt=()=>{if(!ft)return;Ue=requestAnimationFrame(wt);const qt=yt.current.getElapsedTime(),Wt=(ue(qt)-Mt)*ye;if(_=(_+Wt)*Re,Mt+=_,d.current.length>0){const j=d.current.find(l=>l.active)||d.current[0];if(j){const l=(j.x/window.innerWidth-.5)*2,W=(j.y/window.innerHeight-.5)*2;w.rotation.y+=l*.02,w.rotation.x+=W*.02}}else n||(w.rotation.y+=.002);const be=.88+Mt*.2,k=1+Mt*.1;dt.forEach(j=>{j.scale.set(be,be*k,be),j.material.opacity=.5+Mt*.35}),a.render(h,f)};wt();const Pt=()=>{f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",Pt),()=>{ft=!1,window.removeEventListener("resize",Pt),cancelAnimationFrame(Ue),ne.current&&ne.current.contains(a.domElement)&&ne.current.removeChild(a.domElement),J.forEach(qt=>qt.dispose()),K.forEach(qt=>qt.dispose()),a.dispose()}},[Z,S,n]),et.useEffect(()=>{if(Z!=="geometry"||!ne.current||typeof Tn>"u")return;d.current=[];const h=new gn;bt.current=h;const f=new xn(50,window.innerWidth/window.innerHeight,.1,1e3);f.position.z=8;const a=new bn({antialias:!0,alpha:!0});a.setSize(window.innerWidth,window.innerHeight),a.setPixelRatio(Math.min(window.devicePixelRatio,2)),a.setClearColor(0,0),ne.current.appendChild(a.domElement),a.domElement.style.pointerEvents="none",ht.current=a,yt.current=new An;const R=(ja.find(O=>O.key===Ot)||ja[0]).create(),J=((O,ce,M)=>{ce/=100,M/=100;const s=ce*Math.min(M,1-M),D=E=>{const v=(E+O/30)%12;return M-s*Math.max(Math.min(v-3,9-v,1),-1)};return(Math.round(D(0)*255)<<16)+(Math.round(D(8)*255)<<8)+Math.round(D(4)*255)})(S,52,68),K=new Le({color:J,wireframe:!0,transparent:!0,opacity:.8}),te=new De(R,K);h.add(te),gt.current=te,te.scale.setScalar(1),te.material.opacity=.75,a.render(h,f);let ae=1,p=0,x=.75,G=0;const B=.04,F=.88;let r=0,u,C=!0;const c=()=>{if(!C)return;if(u=requestAnimationFrame(c),r++,r<3){a.render(h,f);return}const O=yt.current.getElapsedTime(),ce=ue(O);if(gt.current){if(d.current.length>0){const v=d.current.find(U=>U.active)||d.current[0];if(v){const U=(v.x/window.innerWidth-.5)*2,m=(v.y/window.innerHeight-.5)*2;gt.current.rotation.y+=U*.02,gt.current.rotation.x+=m*.02}}else gt.current.rotation.y+=4e-4,gt.current.rotation.x+=2e-4;const M=.9+ce*.2,s=.6+ce*.25,D=(M-ae)*B;p=(p+D)*F,ae+=p;const E=(s-x)*B;G=(G+E)*F,x+=G,gt.current.scale.setScalar(ae),gt.current.material.opacity=x}a.render(h,f)};c();const i=()=>{f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",i),()=>{C=!1,window.removeEventListener("resize",i),cancelAnimationFrame(u),ne.current&&ne.current.contains(a.domElement)&&ne.current.removeChild(a.domElement),R.dispose(),K.dispose(),a.dispose()}},[Z,Ot,S]),et.useEffect(()=>{if(Z!=="tree"||!ne.current||typeof Tn>"u")return;d.current=[];const h=new gn;bt.current=h;const f=new xn(50,window.innerWidth/window.innerHeight,.1,1e3);f.position.set(0,4,16),f.lookAt(0,3,0);const a=new bn({antialias:!0,alpha:!0});a.setSize(window.innerWidth,window.innerHeight),a.setPixelRatio(Math.min(window.devicePixelRatio,2)),a.setClearColor(0,0),ne.current.appendChild(a.domElement),a.domElement.style.pointerEvents="none",ht.current=a,yt.current=new An;const b=(B,F,r)=>{F/=100,r/=100;const u=F*Math.min(r,1-r),C=c=>{const i=(c+B/30)%12;return r-u*Math.max(Math.min(i-3,9-i,1),-1)};return(Math.round(C(0)*255)<<16)+(Math.round(C(8)*255)<<8)+Math.round(C(4)*255)},R=new Fe;h.add(R);const w=[],J=[],K=(B,F,r,u,C)=>{if(u>C||r<.05)return;const c=B.clone().add(F.clone().multiplyScalar(r)),i=new Un(.015*(C-u+1)*.4,.02*(C-u+1)*.4,r,6),O=u/C,ce=new Le({color:b(S,35+O*25,30+O*30),transparent:!0,opacity:.5+O*.2,wireframe:!0}),M=new De(i,ce),s=B.clone().add(c).multiplyScalar(.5);if(M.position.copy(s),M.lookAt(c),M.rotateX(Math.PI/2),M.userData={depth:u,phase:Math.random()*Math.PI*2},R.add(M),w.push(M),u>=C-2){const m=new en(.06+Math.random()*.03,8,8),y=new Le({color:b(S,55,55),transparent:!0,opacity:.4}),T=new De(m,y);T.position.copy(c),T.userData={phase:Math.random()*Math.PI*2},R.add(T),J.push(T)}const D=.45+Math.random()*.25,E=r*(.68+Math.random()*.12),v=F.clone();v.applyAxisAngle(new g(0,0,1),D),v.applyAxisAngle(new g(1,0,0),(Math.random()-.5)*.4),K(c.clone(),v,E,u+1,C);const U=F.clone();U.applyAxisAngle(new g(0,0,1),-D),U.applyAxisAngle(new g(1,0,0),(Math.random()-.5)*.4),K(c.clone(),U,E,u+1,C)};K(new g(0,0,0),new g(0,1,0),1.4,0,6),R.scale.setScalar(1),a.render(h,f);let te=0,ae,p=!0;const x=()=>{if(!p)return;if(ae=requestAnimationFrame(x),te++,te<3){a.render(h,f);return}const B=yt.current.getElapsedTime();if(d.current.length>0){const u=d.current.find(C=>C.active)||d.current[0];if(u){const C=(u.x/window.innerWidth-.5)*2,c=(u.y/window.innerHeight-.5)*2;R.rotation.y+=C*.015,R.rotation.x+=c*.008}}else R.rotation.y+=2e-4;const F=ue(B),r=.9+F*.2;R.scale.setScalar(r),w.forEach(u=>{const C=Math.sin(B*.1+u.userData.depth*.2+u.userData.phase)*.004*u.userData.depth;u.rotation.z+=C*.05,u.material.opacity=.7+F*.2}),J.forEach(u=>{const C=.9+F*.15+Math.sin(B*.15+u.userData.phase)*.05;u.scale.setScalar(C),u.material.opacity=.5+F*.3}),a.render(h,f)};x();const G=()=>{f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",G),()=>{p=!1,window.removeEventListener("resize",G),cancelAnimationFrame(ae),ne.current&&ne.current.contains(a.domElement)&&ne.current.removeChild(a.domElement),w.forEach(B=>{B.geometry.dispose(),B.material.dispose()}),J.forEach(B=>{B.geometry.dispose(),B.material.dispose()}),a.dispose()}},[Z,S,ue]),et.useEffect(()=>{if(Z!=="ripples"||!ne.current||typeof Tn>"u")return;d.current=[];const h=new gn;bt.current=h;const f=new xn(60,window.innerWidth/window.innerHeight,.1,1e3);f.position.set(0,2.5,5),f.lookAt(0,0,0);const a=new bn({antialias:!0,alpha:!0});a.setSize(window.innerWidth,window.innerHeight),a.setPixelRatio(Math.min(window.devicePixelRatio,2)),a.setClearColor(0,0),ne.current.appendChild(a.domElement),a.domElement.style.pointerEvents="none",ht.current=a,yt.current=new An;const b=(M,s,D)=>{s/=100,D/=100;const E=s*Math.min(D,1-D),v=U=>{const m=(U+M/30)%12;return D-E*Math.max(Math.min(m-3,9-m,1),-1)};return(Math.round(v(0)*255)<<16)+(Math.round(v(8)*255)<<8)+Math.round(v(4)*255)},R=new Fe;h.add(R);const w=new en(.3,32,32),J=new Le({color:b(S,55,55),transparent:!0,opacity:.6,wireframe:!0}),K=new De(w,J);R.add(K);const te=[],ae=8,p=()=>{const M=new Pn(.1,.02,8,64),s=new Le({color:b(S,50,60),transparent:!0,opacity:.6,wireframe:!0}),D=new De(M,s);if(D.rotation.x=Math.PI/2,D.userData={born:yt.current.getElapsedTime(),maxAge:20},R.add(D),te.push(D),te.length>ae){const E=te.shift();R.remove(E),E.geometry.dispose(),E.material.dispose()}};p();let x=0,G=1,B=0,F=.6,r=0;const u=.04,C=.88;let c,i=!0;const O=()=>{if(!i)return;c=requestAnimationFrame(O);const M=yt.current.getElapsedTime()*ut,s=n?12:6;if(M-x>s&&(p(),x=M),d.current.forEach(T=>{T.active&&!T.rippleSpawned&&(p(),T.rippleSpawned=!0)}),d.current.length>0){const T=d.current.find(L=>L.active)||d.current[0];if(T){const L=(T.x/window.innerWidth-.5)*2,q=(T.y/window.innerHeight-.5)*2;R.rotation.y+=L*.02*ut,R.rotation.x+=q*.01*ut}}else R.rotation.y+=15e-5*ut;const D=ue(M),E=.85+D*.3,v=.5+D*.35,U=(E-G)*u;B=(B+U)*C,G+=B;const m=(v-F)*u;r=(r+m)*C,F+=r,K.scale.setScalar(G),J.opacity=F;const y=yt.current.getElapsedTime();te.forEach(T=>{const q=(y-T.userData.born)*ut/T.userData.maxAge;if(q<1){const le=.3+q*3;T.scale.set(le/.1,le/.1,1),T.material.opacity=(1-q)*.5,T.position.y=Math.sin(q*Math.PI)*.2}});for(let T=te.length-1;T>=0;T--)(y-te[T].userData.born)*ut>te[T].userData.maxAge&&(R.remove(te[T]),te[T].geometry.dispose(),te[T].material.dispose(),te.splice(T,1));a.render(h,f)};O();const ce=()=>{f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",ce),()=>{i=!1,window.removeEventListener("resize",ce),cancelAnimationFrame(c),ne.current&&ne.current.contains(a.domElement)&&ne.current.removeChild(a.domElement),w.dispose(),J.dispose(),te.forEach(M=>{M.geometry.dispose(),M.material.dispose()}),a.dispose()}},[Z,S,ue]),et.useEffect(()=>{if(Z!=="fern"||!ne.current||typeof Tn>"u")return;d.current=[];const h=new gn;bt.current=h;const f=new xn(50,window.innerWidth/window.innerHeight,.1,1e3);f.position.set(0,3,9),f.lookAt(0,2.5,0);const a=new bn({antialias:!0,alpha:!0});a.setSize(window.innerWidth,window.innerHeight),a.setPixelRatio(Math.min(window.devicePixelRatio,2)),a.setClearColor(0,0),ne.current.appendChild(a.domElement),a.domElement.style.pointerEvents="none",ht.current=a,yt.current=new An;const b=new Fe;h.add(b);const R=[{a:0,b:0,c:0,d:.16,e:0,f:0,p:.01},{a:.85,b:.04,c:-.04,d:.85,e:0,f:1.6,p:.85},{a:.2,b:-.26,c:.23,d:.22,e:0,f:1.6,p:.07},{a:-.15,b:.28,c:.26,d:.24,e:0,f:.44,p:.07}],w=15e3,J=new Float32Array(w*3),K=new Float32Array(w*3);let te=0,ae=0;for(let C=0;C<w;C++){const c=Math.random();let i;c<R[0].p?i=R[0]:c<R[0].p+R[1].p?i=R[1]:c<R[0].p+R[1].p+R[2].p?i=R[2]:i=R[3];const O=i.a*te+i.b*ae+i.e,ce=i.c*te+i.d*ae+i.f;te=O,ae=ce;const M=.5;J[C*3]=te*M+(Math.random()-.5)*.02,J[C*3+1]=ae*M,J[C*3+2]=(Math.random()-.5)*.3;const s=ae/10,D=new yn().setHSL(S/360,.4+s*.2,.35+s*.25);K[C*3]=D.r,K[C*3+1]=D.g,K[C*3+2]=D.b}const p=new He;p.setAttribute("position",new Cn(J,3)),p.setAttribute("color",new Cn(K,3));const x=new kn({size:.025,vertexColors:!0,transparent:!0,opacity:.7,blending:Xn}),G=new Rn(p,x);b.add(G);let B,F=!0;const r=()=>{if(!F)return;B=requestAnimationFrame(r);const C=yt.current.getElapsedTime();if(d.current.length>0){const ce=d.current.find(M=>M.active)||d.current[0];if(ce){const M=(ce.x/window.innerWidth-.5)*2,s=(ce.y/window.innerHeight-.5)*2;b.rotation.y+=M*.02,b.rotation.x+=s*.01}}else b.rotation.y+=4e-4;const c=ue(C),i=Math.sin(C*.15)*.02+c*.015;b.rotation.z=i;const O=.9+c*.2;b.scale.setScalar(O),x.opacity=.65+c*.25,a.render(h,f)};r();const u=()=>{f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",u),()=>{F=!1,window.removeEventListener("resize",u),cancelAnimationFrame(B),ne.current&&ne.current.contains(a.domElement)&&ne.current.removeChild(a.domElement),p.dispose(),x.dispose(),a.dispose()}},[Z,S,ue]),et.useEffect(()=>{if(Z!=="dandelion"||!ne.current||typeof Tn>"u")return;d.current=[];const h=new gn;bt.current=h;const f=new xn(50,window.innerWidth/window.innerHeight,.1,1e3);f.position.set(0,0,8),f.lookAt(0,0,0);const a=new bn({antialias:!0,alpha:!0});a.setSize(window.innerWidth,window.innerHeight),a.setPixelRatio(Math.min(window.devicePixelRatio,2)),a.setClearColor(0,0),ne.current.appendChild(a.domElement),a.domElement.style.pointerEvents="none",ht.current=a,yt.current=new An;const b=(i,O,ce)=>{O/=100,ce/=100;const M=O*Math.min(ce,1-ce),s=D=>{const E=(D+i/30)%12;return ce-M*Math.max(Math.min(E-3,9-E,1),-1)};return(Math.round(s(0)*255)<<16)+(Math.round(s(8)*255)<<8)+Math.round(s(4)*255)},R=new Fe;h.add(R);const w=new Un(.02,.03,3,8),J=new Le({color:b(S,30,35),transparent:!0,opacity:.6}),K=new De(w,J);K.position.y=-1.5,R.add(K);const te=new en(.15,16,16),ae=new Le({color:b(S,25,45),transparent:!0,opacity:.7}),p=new De(te,ae);R.add(p);const x=50,G=[],B=[];for(let i=0;i<x;i++){const O=Math.acos(1-2*(i+.5)/x),ce=Math.PI*(1+Math.sqrt(5))*i,M=new Fe,s=8;for(let D=0;D<s;D++){const E=D/s*Math.PI*2,v=new He,U=[new g(0,0,0),new g(Math.cos(E)*.15,.08,Math.sin(E)*.15)];v.setFromPoints(U);const m=new Ht({color:b(S,40,70),transparent:!0,opacity:.5}),y=new rt(v,m);M.add(y)}M.position.set(Math.sin(O)*Math.cos(ce)*.5,Math.cos(O)*.5,Math.sin(O)*Math.sin(ce)*.5),M.lookAt(0,0,0),M.rotateX(Math.PI),M.userData={attached:!0,phi:O,theta:ce,velocity:new g,phase:Math.random()*Math.PI*2},R.add(M),G.push(M)}let F=0,r,u=!0;const C=()=>{if(!u)return;r=requestAnimationFrame(C);const i=yt.current.getElapsedTime();if(d.current.length>0){const M=d.current.find(s=>s.active)||d.current[0];if(M){const s=(M.x/window.innerWidth-.5)*2,D=(M.y/window.innerHeight-.5)*2;R.rotation.y+=s*.015,R.rotation.x+=D*.008,G.forEach(E=>{if(E.userData.attached){const v=E.position.clone().applyMatrix4(R.matrixWorld);v.project(f);const U=(v.x+1)/2*window.innerWidth,m=(-v.y+1)/2*window.innerHeight,y=M.x-U,T=M.y-m;Math.sqrt(y*y+T*T)<100&&(E.userData.attached=!1,E.userData.velocity.set((Math.random()-.5)*.012,.006+Math.random()*.006,(Math.random()-.5)*.012),B.push(E))}})}}else R.rotation.y+=2e-4;if(i-F>5){const M=G.filter(s=>s.userData.attached);M.length>0&&M.slice(0,1).forEach(D=>{D.userData.attached=!1,D.userData.velocity.set((Math.random()-.5)*.006,.003+Math.random()*.003,(Math.random()-.5)*.006),B.push(D)}),F=i}const O=ue(i),ce=.9+O*.2;R.scale.setScalar(ce),G.forEach(M=>{if(M.userData.attached){const s=Math.sin(i*.1+M.userData.phase)*.01+O*.01;M.rotation.z=s,M.children.forEach(D=>{D.material&&(D.material.opacity=.5+O*.3)})}}),B.forEach(M=>{M.position.add(M.userData.velocity),M.userData.velocity.y+=4e-5,M.userData.velocity.x+=Math.sin(i+M.userData.phase)*8e-5,M.rotation.y+=.0015;const D=Math.max(0,.5-(M.position.y-2)*.1);M.children.forEach(E=>{E.material&&(E.material.opacity=D)})}),G.every(M=>!M.userData.attached)&&B.every(M=>M.position.y>5)&&(G.forEach((M,s)=>{M.userData.attached=!0;const D=M.userData.phi,E=M.userData.theta;M.position.set(Math.sin(D)*Math.cos(E)*.5,Math.cos(D)*.5,Math.sin(D)*Math.sin(E)*.5),M.lookAt(0,0,0),M.rotateX(Math.PI)}),B.length=0),a.render(h,f)};C();const c=()=>{f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",c),()=>{u=!1,window.removeEventListener("resize",c),cancelAnimationFrame(r),ne.current&&ne.current.contains(a.domElement)&&ne.current.removeChild(a.domElement),w.dispose(),J.dispose(),te.dispose(),ae.dispose(),G.forEach(i=>i.children.forEach(O=>{O.geometry&&O.geometry.dispose(),O.material&&O.material.dispose()})),a.dispose()}},[Z,S,ue]),et.useEffect(()=>{if(Z!=="succulent"||!ne.current||typeof Tn>"u")return;d.current=[];const h=new gn;bt.current=h;const f=new xn(50,window.innerWidth/window.innerHeight,.1,1e3);f.position.set(0,4,7),f.lookAt(0,0,0);const a=new bn({antialias:!0,alpha:!0});a.setSize(window.innerWidth,window.innerHeight),a.setPixelRatio(Math.min(window.devicePixelRatio,2)),a.setClearColor(0,0),ne.current.appendChild(a.domElement),a.domElement.style.pointerEvents="none",ht.current=a,yt.current=new An;const b=(r,u,C)=>{u/=100,C/=100;const c=u*Math.min(C,1-C),i=O=>{const ce=(O+r/30)%12;return C-c*Math.max(Math.min(ce-3,9-ce,1),-1)};return(Math.round(i(0)*255)<<16)+(Math.round(i(8)*255)<<8)+Math.round(i(4)*255)},R=new Fe;h.add(R);const w=Math.PI*(3-Math.sqrt(5)),J=60,K=[];for(let r=0;r<J;r++){const u=r*w,C=Math.sqrt(r)*.12,c=r*.015,i=r/J,O=.08+(1-i)*.06,ce=new en(O,8,6);ce.scale(.6,1,.4);const M=new Le({color:b(S,45+(1-i)*15,35+(1-i)*25),transparent:!0,opacity:.6,wireframe:!0}),s=new De(ce,M);s.position.set(Math.cos(u)*C,c,Math.sin(u)*C),s.rotation.y=-u,s.rotation.x=.3+i*.4,s.userData={angle:u,baseRadius:C,baseHeight:c,phase:r*.1},R.add(s),K.push(s)}const te=new en(.08,12,12),ae=new Le({color:b(S,50,60),transparent:!0,opacity:.7}),p=new De(te,ae);p.position.y=J*.015+.05,R.add(p);let x,G=!0;const B=()=>{if(!G)return;x=requestAnimationFrame(B);const r=yt.current.getElapsedTime();if(d.current.length>0){const c=d.current.find(i=>i.active)||d.current[0];if(c){const i=(c.x/window.innerWidth-.5)*2,O=(c.y/window.innerHeight-.5)*2;R.rotation.y+=i*.015,R.rotation.x+=O*.008}}else R.rotation.y+=3e-4;const u=ue(r),C=.9+u*.2;R.scale.setScalar(C),K.forEach(c=>{const i=.9+u*.15+Math.sin(r*.1+c.userData.phase)*.02;c.scale.setScalar(i),c.material.opacity=.55+u*.3}),p.scale.setScalar(.9+u*.2),ae.opacity=.55+u*.3,a.render(h,f)};B();const F=()=>{f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",F),()=>{G=!1,window.removeEventListener("resize",F),cancelAnimationFrame(x),ne.current&&ne.current.contains(a.domElement)&&ne.current.removeChild(a.domElement),K.forEach(r=>{r.geometry.dispose(),r.material.dispose()}),te.dispose(),ae.dispose(),a.dispose()}},[Z,S,ue]),et.useEffect(()=>{if(Z!=="jellyfish"||!ne.current)return;const h=(k,j,l)=>{j/=100,l/=100;const W=j*Math.min(l,1-l),se=Te=>{const X=(Te+k/30)%12;return l-W*Math.max(Math.min(X-3,9-X,1),-1)};return(Math.round(se(0)*255)<<16)+(Math.round(se(8)*255)<<8)+Math.round(se(4)*255)},f={bell:new yn(h(S,52,68)),tentacle:new yn(h(S,50,45)),accent:new yn(h(S,60,80)),dim:new yn(h(S,40,20)),background:new yn("#000000")};let a="exhale",b=1,R=window.matchMedia("(prefers-reduced-motion: reduce)").matches,w=Date.now(),J=!1;new cn;let K=new g;new Fo;const te=new An;let ae=1.075,p=.96,x=0,G=0,B=0,F=0;const r=new gn;r.background=f.background;const u=new xn(50,window.innerWidth/window.innerHeight,.1,100);u.position.set(0,0,8),u.lookAt(0,0,0);const C=new bn({antialias:!0,alpha:!0});C.setSize(window.innerWidth,window.innerHeight),C.setPixelRatio(Math.min(window.devicePixelRatio,2)),ne.current.appendChild(C.domElement),C.domElement.style.pointerEvents="none";let c=null;Qo&&(c=new Qo(u,C.domElement),c.enableDamping=!0,c.dampingFactor=.08,c.rotateSpeed=.25,c.minDistance=1,c.maxDistance=15,c.enablePan=!0,c.autoRotate=!1,c.autoRotateSpeed=.3);const i=new Fe;r.add(i);const O=new He,ce=64,M=32,s=[],D=[],E=[];for(let k=0;k<=M;k++){const j=k/M*Math.PI*.5;for(let l=0;l<=ce;l++){const W=l/ce*Math.PI*2;let se=1;if(k>M*.7){const Se=(k-M*.7)/(M*.3);se*=1+Math.sin(W*8)*.1*Se+Math.sin(W*13)*.05*Se}const Te=Math.sin(j)*Math.cos(W)*se,X=Math.cos(j),de=Math.sin(j)*Math.sin(W)*se;s.push(Te,X,de),E.push(l/ce,k/M)}}for(let k=0;k<M;k++)for(let j=0;j<ce;j++){const l=k*(ce+1)+j,W=l+ce+1;D.push(l,W,l+1),D.push(W,W+1,l+1)}O.setAttribute("position",new Lo(s,3)),O.setAttribute("uv",new Lo(E,2)),O.setIndex(D),O.computeVertexNormals();const v=new Le({color:f.bell,wireframe:!0,transparent:!0,opacity:.8}),U=new De(O,v);i.add(U);const m=O.clone();m.scale(.85,.85,.85);const y=new Le({color:f.bell,wireframe:!0,transparent:!0,opacity:.3}),T=new De(m,y);i.add(T);const L=[],q=12,le=[1.5,1.5,1.5,1.5,2.2,2.2,2.2,2.2,3,3,3,3],$=40;for(let k=0;k<q;k++){const j=k/q*Math.PI*2,l=.95,W=Math.sin(j)*l,se=Math.cos(j)*l,Te=le[k],X=[],de=[],Se=[];for(let it=0;it<=$;it++){const zt=it/$,lt=-.2-zt*Te,ot=Math.sin(j+zt*3)*.3*zt,kt=new g(W+ot,lt,se+Math.cos(j+zt*2)*.2*zt);X.push(kt.clone()),de.push(kt.clone()),Se.push(kt.clone())}const Xe=new Sn(X),Qe=new zn(Xe,$,.02,8,!1),$e=new Le({color:f.tentacle,transparent:!0,opacity:.7}),fe=new De(Qe,$e);i.add(fe),L.push({mesh:fe,points:X,basePoints:de,targetPoints:Se,angle:j,length:Te,noiseOffset:Math.random()*1e3})}const Pe=[];for(let k=0;k<4;k++){const j=k/4*Math.PI*2+Math.PI/4,l=.2,W=[];for(let Se=0;Se<=20;Se++){const Xe=Se/20,Qe=Xe*Math.PI*2;W.push(new g(Math.cos(j)*l+Math.sin(Qe)*.15*Xe,-.3-Xe*1.2,Math.sin(j)*l+Math.cos(Qe)*.15*Xe))}const se=new Sn(W),Te=new zn(se,20,.04,8,!1),X=new Le({color:f.tentacle,transparent:!0,opacity:.8}),de=new De(Te,X);i.add(de),Pe.push({mesh:de,points:W,angle:j,noiseOffset:Math.random()*1e3})}const Je=50,pt=new He,dt=new Float32Array(Je*3),Mt=new Float32Array(Je),_=new Float32Array(Je);for(let k=0;k<Je;k++){const j=Math.random()*Math.PI*2,l=Math.random()*Math.PI*.5,W=.3+Math.random()*.5;dt[k*3]=Math.sin(l)*Math.cos(j)*W,dt[k*3+1]=-Math.cos(l)*W,dt[k*3+2]=Math.sin(l)*Math.sin(j)*W,Mt[k]=.02+Math.random()*.03,_[k]=Math.random()*Math.PI*2}pt.setAttribute("position",new Cn(dt,3));const ye=new kn({color:f.accent,size:.05,transparent:!0,opacity:.6,blending:Xn,sizeAttenuation:!0}),Re=new Rn(pt,ye);i.add(Re);const Ue=(k,j,l)=>Math.sin(k*1.3+j*2.1)*Math.cos(j*1.7+l*2.3)*Math.sin(l*1.9+k*2.7)*.5+.5,ft=(k,j)=>{a=k,b=j},wt=(k,j)=>{let l=1,W=1,se=0,Te=0;if(a==="inhale")l=1+b*.15,W=1-b*.08,se=b*.15,Te=b;else if(a==="hold"){const lt=Math.sin(j*3)*.02;l=1.15+lt,W=.92-lt*.5,se=.15,Te=1}else l=1.15-b*.15,W=.92+b*.08,se=.15-b*.15,Te=1-b;const X=.02,de=.85,Se=(l-ae)*X;x=x*de+Se,ae+=x;const Xe=(W-p)*X;G=G*de+Xe,p+=G;const Qe=(se-B)*X;F=F*de+Qe,B+=F,U.scale.set(p,ae,p),T.scale.set(p*.85,ae*.85,p*.85),i.position.y=(ae-1)*.7,i.position.z=B,i.rotation.y=Math.sin(j*.08)*.1,i.rotation.x=Math.sin(j*.06)*.05;const $e=new yn().lerpColors(f.dim,f.bell,Te);U.material.color.copy($e),T.material.color.copy($e);const it=Math.max(0,b-.3);L.forEach((lt,ot)=>{const kt=Ue(j*.12+lt.noiseOffset,ot*.5,0),mt=R?.05:.1+kt*.1;for(let Ve=0;Ve<lt.points.length;Ve++){const It=Ve/lt.points.length,Yt=lt.basePoints[Ve],Zt=Math.sin(j*.2+Ve*.2+lt.angle)*mt*It,dn=Math.cos(j*.15+Ve*.3+lt.noiseOffset)*mt*It;let fn=0;a==="exhale"?fn=it*.3*It:a==="inhale"&&(fn=-it*.2*It);let $n=0,Gn=0;const qn=lt.points[Ve].clone();i.localToWorld(qn);const In=qn.distanceTo(K);if(In<1.5){const to=(1.5-In)*.5*It,vo=qn.clone().sub(K).normalize();$n=vo.x*to,Gn=vo.z*to}lt.targetPoints[Ve].set(Yt.x+Zt+$n+fn*Math.cos(lt.angle),Yt.y+(a==="exhale"?fn*.5:-fn*.3),Yt.z+dn+Gn+fn*Math.sin(lt.angle)),lt.points[Ve].lerp(lt.targetPoints[Ve],.015)}const me=new Sn(lt.points),Ge=new zn(me,$,.02*(1-.5*(a==="exhale"?b:0)),8,!1);lt.mesh.geometry.dispose(),lt.mesh.geometry=Ge;const Ke=new yn().lerpColors(f.dim,f.tentacle,Te);lt.mesh.material.color.copy(Ke)}),Pe.forEach((lt,ot)=>{for(let me=1;me<lt.points.length;me++){const Ge=me/lt.points.length,Ke=Math.sin(j*.12+me*.4+lt.noiseOffset)*.08*Ge;lt.points[me].x+=Ke*.005,lt.points[me].z+=Math.cos(j*.1+me*.3)*.08*Ge*.005}const kt=new Sn(lt.points),mt=new zn(kt,20,.04,8,!1);lt.mesh.geometry.dispose(),lt.mesh.geometry=mt,lt.mesh.material.color.copy(new yn().lerpColors(f.dim,f.tentacle,Te))}),Re.geometry.attributes.position.array;for(let lt=0;lt<Je;lt++){const ot=Math.sin(j*.6+_[lt])*.5+.5;Mt[lt]=(.02+ot*.03)*(.5+Te*.5)}Re.material.opacity=.3+Te*.5,Re.geometry.attributes.position.needsUpdate=!0,R||(i.position.x+=Math.sin(j*.04)*1e-4,i.position.z+=Math.cos(j*.03)*1e-4),Date.now()-w>8e3&&!R&&c&&(J||(J=!0,c.autoRotate=!0))},Pt=()=>{const k=u.position.clone(),j=c?c.target.clone():new g(0,0,0),l=new g(0,0,5),W=new g(0,0,0);let se=0;const Te=()=>{if(se+=.02,se>=1){u.position.copy(l),c&&c.target.copy(W);return}const X=1-Math.pow(1-se,3);u.position.lerpVectors(k,l,X),c&&c.target.lerpVectors(j,W,X),requestAnimationFrame(Te)};Te()},qt=k=>{switch(k.key){case"ArrowLeft":u.position.applyAxisAngle(new g(0,1,0),.1);break;case"ArrowRight":u.position.applyAxisAngle(new g(0,1,0),-.1);break;case"ArrowUp":u.position.y+=.2;break;case"ArrowDown":u.position.y-=.2;break;case"+":case"=":u.position.multiplyScalar(.9);break;case"-":u.position.multiplyScalar(1.1);break;case" ":Pt();break}w=Date.now()},Ft=()=>{u.aspect=window.innerWidth/window.innerHeight,u.updateProjectionMatrix(),C.setSize(window.innerWidth,window.innerHeight)};let Wt;const be=()=>{Wt=requestAnimationFrame(be);const k=te.getDelta(),j=te.getElapsedTime(),l=ue(j);if(l<.45?ft("inhale",l/.45):l<.55?ft("hold",(l-.45)/.1):ft("exhale",(l-.55)/.45),d.current.length>0){const W=d.current.find(se=>se.active)||d.current[0];if(W){const se=(W.x/window.innerWidth-.5)*2,Te=(W.y/window.innerHeight-.5)*2;i.rotation.y+=se*.015,i.rotation.x+=Te*.008}w=Date.now()}else i.rotation.y+=4e-4;wt(k,j),c&&c.update(),C.render(r,u)};return window.addEventListener("resize",Ft),window.addEventListener("keydown",qt),be(),()=>{cancelAnimationFrame(Wt),window.removeEventListener("resize",Ft),window.removeEventListener("keydown",qt),U.geometry.dispose(),U.material.dispose(),T.geometry.dispose(),T.material.dispose(),L.forEach(k=>{k.mesh.geometry.dispose(),k.mesh.material.dispose()}),Pe.forEach(k=>{k.mesh.geometry.dispose(),k.mesh.material.dispose()}),Re.geometry.dispose(),Re.material.dispose(),c&&c.dispose(),ne.current&&C.domElement.parentNode===ne.current&&ne.current.removeChild(C.domElement),C.dispose()}},[Z,S,ue]),et.useEffect(()=>{if(Z!=="jellyfish2d"||!jt.current)return;d.current=[];const h=jt.current,f=h.getContext("2d");h.width=window.innerWidth,h.height=window.innerHeight;let a=Date.now();const b={primary:{h:S,s:52,l:68},deep:{h:S,s:50,l:50},accent:{h:S,s:60,l:75},sand:{h:S,s:50,l:65}};class R{constructor(s,D,E,v,U){this.parent=s,this.index=D,this.segments=v,this.segmentLength=U,this.points=[],this.oldPoints=[];const m=D/E*Math.PI*2;this.angleOffset=m;const T=Math.cos(m)*s.size*.95,L=Math.sin(m)*s.size*.15;for(let q=0;q<v;q++){const le=Math.sin(m+q*.2)*(5+q*1.5);this.points.push({x:s.position.x+T+le,y:s.position.y+s.bellHeight+q*U+L}),this.oldPoints.push({x:this.points[q].x-le*.05,y:this.points[q].y-.3})}}update(s,D){const E=1+s*.12,U=Math.cos(this.angleOffset)*this.parent.size*.95*E,m=Math.sin(this.angleOffset)*this.parent.size*.15;this.points[0].x=this.parent.position.x+U,this.points[0].y=this.parent.position.y+this.parent.bellHeight*.3+m;for(let y=1;y<this.segments;y++){const T=this.points[y],L=this.oldPoints[y],q=(T.x-L.x)*.97,le=(T.y-L.y)*.97;L.x=T.x,L.y=T.y,T.x+=q,T.y+=le+.015;const $=.04*(1+y*.1);T.x+=Math.sin(D*.5+y*.3+this.index*.5)*$}for(let y=0;y<3;y++)for(let T=1;T<this.segments;T++){const L=this.points[T-1],q=this.points[T],le=q.x-L.x,$=q.y-L.y,Pe=Math.sqrt(le*le+$*$);if(Pe===0)continue;const pt=(this.segmentLength-Pe)/Pe/2,dt=le*pt,Mt=$*pt;T>1&&(L.x-=dt,L.y-=Mt),q.x+=dt,q.y+=Mt}}draw(s,D){if(this.points.length<2)return;s.beginPath(),s.moveTo(this.points[0].x,this.points[0].y);for(let y=1;y<this.points.length-1;y++){const T=(this.points[y].x+this.points[y+1].x)/2,L=(this.points[y].y+this.points[y+1].y)/2;s.quadraticCurveTo(this.points[y].x,this.points[y].y,T,L)}s.lineTo(this.points[this.points.length-1].x,this.points[this.points.length-1].y);const E=s.createLinearGradient(this.points[0].x,this.points[0].y,this.points[this.points.length-1].x,this.points[this.points.length-1].y);E.addColorStop(0,`hsla(${b.primary.h}, ${b.primary.s}%, ${b.primary.l}%, ${.4+D*.2})`),E.addColorStop(.7,`hsla(${b.primary.h}, ${b.primary.s}%, ${b.primary.l+10}%, ${.25})`),E.addColorStop(1,`hsla(${b.accent.h}, ${b.accent.s}%, ${b.accent.l}%, ${.15})`),s.strokeStyle=E,s.lineWidth=1.5,s.lineCap="round",s.stroke();const v=this.points.length-1,U=this.points[v],m=s.createRadialGradient(U.x,U.y,0,U.x,U.y,4);m.addColorStop(0,`hsla(${b.accent.h}, 60%, 70%, ${.3*D})`),m.addColorStop(1,"transparent"),s.fillStyle=m,s.beginPath(),s.arc(U.x,U.y,4,0,Math.PI*2),s.fill()}applyForce(s,D,E){for(let v=1;v<this.points.length;v++)this.points[v].x+=s*E*(v/this.points.length),this.points[v].y+=D*E*(v/this.points.length)}}class w{constructor(s,D,E){this.parent=s,this.index=D,this.segments=18,this.segmentLength=5,this.points=[],this.oldPoints=[],this.frillPhases=[];const v=D/E*Math.PI*2;this.angleOffset=v;const m=Math.cos(v)*s.size*.2;for(let y=0;y<this.segments;y++){const T=Math.sin(v+y*.4)*8;this.points.push({x:s.position.x+m+T,y:s.position.y+s.bellHeight*.5+y*this.segmentLength}),this.oldPoints.push({x:this.points[y].x-T*.05,y:this.points[y].y-.2}),this.frillPhases.push(Math.random()*Math.PI*2)}}update(s,D){const v=Math.cos(this.angleOffset)*this.parent.size*.2;this.points[0].x=this.parent.position.x+v,this.points[0].y=this.parent.position.y+this.parent.bellHeight*.4;for(let U=1;U<this.segments;U++){const m=this.points[U],y=this.oldPoints[U],T=(m.x-y.x)*.96,L=(m.y-y.y)*.96;y.x=m.x,y.y=m.y,m.x+=T,m.y+=L+.02;const q=.08*(1+U*.05);m.x+=Math.sin(D*.3+U*.5+this.index*1.2)*q}for(let U=0;U<3;U++)for(let m=1;m<this.segments;m++){const y=this.points[m-1],T=this.points[m],L=T.x-y.x,q=T.y-y.y,le=Math.sqrt(L*L+q*q);if(le===0)continue;const Pe=(this.segmentLength-le)/le/2;m>1&&(y.x-=L*Pe,y.y-=q*Pe),T.x+=L*Pe,T.y+=q*Pe}}draw(s,D,E){if(!(this.points.length<2))for(let v=0;v<this.points.length-1;v++){const U=this.points[v],m=this.points[v+1],y=v/(this.points.length-1),T=6*(1-y*.5),L=Math.sin(D*1.5+v*.8+this.frillPhases[v])*3,q=T+Math.abs(L),le=m.x-U.x,$=m.y-U.y,Pe=Math.sqrt(le*le+$*$)||1,Je=-$/Pe,pt=le/Pe;s.beginPath(),s.moveTo(U.x+Je*q,U.y+pt*q),s.lineTo(m.x+Je*q*.9,m.y+pt*q*.9),s.lineTo(m.x-Je*q*.9,m.y-pt*q*.9),s.lineTo(U.x-Je*q,U.y-pt*q),s.closePath();const dt=.4-y*.2+E*.15;s.fillStyle=`hsla(${b.deep.h}, ${b.deep.s}%, ${b.deep.l}%, ${dt})`,s.fill(),s.strokeStyle=`hsla(${b.sand.h}, ${b.sand.s}%, ${b.sand.l}%, ${dt*.6})`,s.lineWidth=1,s.stroke()}}applyForce(s,D,E){for(let v=1;v<this.points.length;v++)this.points[v].x+=s*E*(v/this.points.length)*.7,this.points[v].y+=D*E*(v/this.points.length)*.7}}class J{constructor(s,D,E){this.position={x:s,y:D},this.size=E,this.bellHeight=E*.6,this.pulsePhase=Math.random()*Math.PI*2,this.pulseSpeed=.003+Math.random()*.002,this.driftVelocity={x:(Math.random()-.5)*.02,y:-.005-Math.random()*.005},this.lastPulse=0,this.glow=.6,this.following=!1,this.bellSegments=48,this.bioSpots=[];for(let m=0;m<8;m++){const y=Math.random()*Math.PI*2,T=Math.random()*.5+.2;this.bioSpots.push({angle:y,radius:T,size:Math.random()*2+1,phase:Math.random()*Math.PI*2,speed:Math.random()*.008+.004})}this.tentacles=[];const v=24+Math.floor(Math.random()*8);for(let m=0;m<v;m++){const y=2+Math.random()*2,T=Math.floor(12+y*4);this.tentacles.push(new R(this,m,v,T,4))}this.oralArms=[];const U=4+Math.floor(Math.random()*3);for(let m=0;m<U;m++)this.oralArms.push(new w(this,m,U))}update(s){this.pulsePhase+=this.pulseSpeed;const D=Math.sin(this.pulsePhase);D>.9&&this.lastPulse<=.9&&(this.driftVelocity.y-=.02+Math.random()*.01,this.driftVelocity.x+=(Math.random()-.5)*.015),this.lastPulse=D,this.position.x+=this.driftVelocity.x,this.position.y+=this.driftVelocity.y,this.driftVelocity.x*=.995,this.driftVelocity.y*=.995,this.driftVelocity.y-=5e-4,this.position.y<-this.size*4&&(this.position.y=h.height+this.size*3),this.position.y>h.height+this.size*4&&(this.position.y=h.height+this.size*2),this.position.x<-this.size*2&&(this.position.x=h.width+this.size),this.position.x>h.width+this.size*2&&(this.position.x=-this.size),this.following||(this.glow=this.glow*.99+.6*.01),this.tentacles.forEach(E=>E.update(D,s)),this.oralArms.forEach(E=>E.update(D,s))}draw(s,D){const E=Math.sin(this.pulsePhase),v=1+E*.12;this.tentacles.forEach(T=>T.draw(s,this.glow)),this.oralArms.forEach(T=>T.draw(s,D,this.glow)),s.save(),s.translate(this.position.x,this.position.y);const U=s.createRadialGradient(0,this.bellHeight*.3,0,0,this.bellHeight*.3,this.size*2);U.addColorStop(0,`hsla(${b.primary.h}, ${b.primary.s+20}%, 70%, ${.12*this.glow})`),U.addColorStop(.5,`hsla(${b.primary.h}, ${b.primary.s}%, 50%, ${.04*this.glow})`),U.addColorStop(1,"transparent"),s.fillStyle=U,s.beginPath(),s.arc(0,this.bellHeight*.3,this.size*2,0,Math.PI*2),s.fill(),s.beginPath(),s.moveTo(-this.size*v,this.bellHeight*.3),s.bezierCurveTo(-this.size*v*.7,-this.bellHeight*.8*(1-E*.1),this.size*v*.7,-this.bellHeight*.8*(1-E*.1),this.size*v,this.bellHeight*.3),s.quadraticCurveTo(0,this.bellHeight*.5,-this.size*v,this.bellHeight*.3);const m=s.createRadialGradient(0,0,0,0,this.bellHeight*.2,this.size*1.2);m.addColorStop(0,`hsla(${b.primary.h}, ${b.primary.s-5}%, 75%, ${.35+this.glow*.15})`),m.addColorStop(.4,`hsla(${b.primary.h}, ${b.primary.s}%, 60%, ${.25+this.glow*.1})`),m.addColorStop(.8,`hsla(${b.primary.h}, ${b.primary.s+5}%, 50%, ${.15})`),m.addColorStop(1,`hsla(${b.primary.h}, ${b.primary.s}%, 40%, ${.08})`),s.fillStyle=m,s.fill(),s.save(),s.scale(.88,.88),s.beginPath(),s.moveTo(-this.size*v,this.bellHeight*.25),s.bezierCurveTo(-this.size*v*.65,-this.bellHeight*.65*(1-E*.1),this.size*v*.65,-this.bellHeight*.65*(1-E*.1),this.size*v,this.bellHeight*.25),s.quadraticCurveTo(0,this.bellHeight*.4,-this.size*v,this.bellHeight*.25);const y=s.createRadialGradient(0,-this.bellHeight*.2,0,0,this.bellHeight*.1,this.size*.9);y.addColorStop(0,`hsla(${b.primary.h}, ${b.primary.s-10}%, 85%, ${.25+this.glow*.2})`),y.addColorStop(.6,`hsla(${b.primary.h}, ${b.primary.s}%, 70%, ${.12})`),y.addColorStop(1,`hsla(${b.primary.h}, ${b.primary.s+5}%, 55%, ${.05})`),s.fillStyle=y,s.fill(),s.restore(),s.globalCompositeOperation="lighter";for(let T=0;T<4;T++){const L=T/4*Math.PI*2;s.beginPath(),s.moveTo(0,-this.bellHeight*.3);const q=Math.cos(L)*this.size*.75*v,le=this.bellHeight*.2,$=Math.cos(L)*this.size*.4;s.quadraticCurveTo($,0,q,le),s.strokeStyle=`hsla(${b.primary.h+10}, 35%, 75%, ${.2+this.glow*.1})`,s.lineWidth=1.5,s.stroke()}s.globalCompositeOperation="source-over";for(let T=0;T<4;T++){const L=T/4*Math.PI*2+Math.PI/4,q=Math.cos(L)*this.size*.4,le=-this.bellHeight*.1+Math.sin(L)*this.size*.08;s.beginPath(),s.arc(q,le,this.size*.15,Math.PI*.3,Math.PI*.7,!1),s.strokeStyle=`hsla(${b.sand.h}, ${b.sand.s}%, ${b.sand.l}%, ${.4+this.glow*.2})`,s.lineWidth=this.size*.06,s.lineCap="round",s.stroke();const $=s.createRadialGradient(q,le,0,q,le,this.size*.2);$.addColorStop(0,`hsla(${b.sand.h}, ${b.sand.s+10}%, 75%, ${.2*this.glow})`),$.addColorStop(1,"transparent"),s.fillStyle=$,s.beginPath(),s.arc(q,le,this.size*.2,0,Math.PI*2),s.fill()}s.globalCompositeOperation="lighter",this.bioSpots.forEach(T=>{const L=Math.sin(D*T.speed*60+T.phase)*.5+.5,q=Math.cos(T.angle)*this.size*T.radius*v*.6,le=-this.bellHeight*T.radius*.4,$=s.createRadialGradient(q,le,0,q,le,T.size*4);$.addColorStop(0,`hsla(${b.sand.h}, 70%, 85%, ${.35*L*this.glow})`),$.addColorStop(.5,`hsla(${b.primary.h}, 50%, 65%, ${.12*L})`),$.addColorStop(1,"transparent"),s.fillStyle=$,s.beginPath(),s.arc(q,le,T.size*4,0,Math.PI*2),s.fill()}),s.globalCompositeOperation="source-over",s.beginPath(),s.moveTo(-this.size*v,this.bellHeight*.3),s.bezierCurveTo(-this.size*v*.7,-this.bellHeight*.8*(1-E*.1),this.size*v*.7,-this.bellHeight*.8*(1-E*.1),this.size*v,this.bellHeight*.3),s.strokeStyle=`hsla(${b.primary.h}, ${b.primary.s+10}%, 80%, ${.5+this.glow*.25})`,s.lineWidth=2.5,s.stroke(),s.strokeStyle=`hsla(${b.primary.h}, ${b.primary.s}%, 70%, ${.15+this.glow*.1})`,s.lineWidth=6,s.stroke(),s.restore()}applyForce(s,D){this.driftVelocity.x+=s*.04,this.driftVelocity.y+=D*.04,this.tentacles.forEach(E=>E.applyForce(s,D,.4)),this.oralArms.forEach(E=>E.applyForce(s,D,.3))}}class K{constructor(){this.x=Math.random()*h.width,this.y=Math.random()*h.height,this.size=Math.random()*1.5+.3,this.speed=(Math.random()*.15+.05)*Ys,this.angle=Math.random()*Math.PI*2,this.wobble=Math.random()*Math.PI*2,this.opacity=Math.random()*.3+.1}update(s){this.wobble+=.01,this.x+=Math.cos(this.angle+Math.sin(this.wobble)*.3)*this.speed,this.y+=Math.sin(this.angle)*this.speed*.3-.05,this.y<-10&&(this.y=h.height+10,this.x=Math.random()*h.width),this.x<-10&&(this.x=h.width+10),this.x>h.width+10&&(this.x=-10)}draw(s){s.beginPath(),s.arc(this.x,this.y,this.size,0,Math.PI*2),s.fillStyle=`hsla(${b.primary.h}, 40%, 60%, ${this.opacity})`,s.fill()}}const te=[],ae=Math.min(Math.floor(h.width/400)+1,3);for(let M=0;M<ae;M++)te.push(new J(h.width*.2+Math.random()*h.width*.6,h.height*.6+Math.random()*h.height*.3+M*80,70+Math.random()*40));const p=[];for(let M=0;M<40;M++)p.push(new K);const x=[],G=[];for(let M=0;M<4;M++)G.push({x:Math.random()*h.width,width:Math.random()*80+40,opacity:Math.random()*.04+.01,speed:Math.random()*.1+.05});let B=null;const F=(M,s)=>{te.forEach(D=>{const E=Math.hypot(M-D.position.x,s-D.position.y);if(E<D.size*1.2)D.following=!0,D.glow=1;else if(E<D.size*3){const v=Math.atan2(D.position.y-s,D.position.x-M);D.applyForce(Math.cos(v)*.03,Math.sin(v)*.03),D.pulseSpeed=.006}}),x.push({x:M,y:s,radius:0,strength:1,direction:{x:0,y:0}})},r=(M,s)=>{if(te.filter(D=>D.following).forEach(D=>{const E=M-D.position.x,v=s-D.position.y;D.driftVelocity.x+=E*8e-4,D.driftVelocity.y+=v*8e-4}),x.length>0&&B){const D=x[x.length-1];D.direction.x=(M-B.x)*.1,D.direction.y=(s-B.y)*.1}B={x:M,y:s}},u=()=>{te.forEach(M=>{M.following=!1,M.pulseSpeed=.003+Math.random()*.002}),B=null},C=()=>{x.forEach((M,s)=>{M.radius+=2,M.strength*=.95,te.forEach(D=>{const E=Math.hypot(M.x-D.position.x,M.y-D.position.y);if(E<M.radius&&E>M.radius-60){const v=M.strength*(1-E/Math.max(M.radius,1))*.15;D.applyForce(M.direction.x*v,M.direction.y*v)}}),M.strength<.02&&x.splice(s,1)})};let c,i=!0;const O=()=>{if(!i)return;c=requestAnimationFrame(O);const s=(Date.now()-a)/1e3;d.current.forEach(v=>{v.active?(v.jellyTouched||(F(v.x,v.y),v.jellyTouched=!0),r(v.x,v.y)):v.jellyTouched&&(u(),v.jellyTouched=!1)});const D=f.createLinearGradient(0,0,0,h.height);D.addColorStop(0,"#000"),D.addColorStop(.5,"#000"),D.addColorStop(1,"#000"),f.fillStyle=D,f.fillRect(0,0,h.width,h.height);const E=ue(s);f.globalCompositeOperation="lighter",G.forEach(v=>{v.x+=v.speed,v.x>h.width+v.width&&(v.x=-v.width);const U=f.createLinearGradient(v.x,0,v.x+v.width,h.height);U.addColorStop(0,`rgba(127, 180, 170, ${v.opacity*(.6+E*.4)})`),U.addColorStop(.3,`rgba(80, 140, 130, ${v.opacity*(.3+E*.3)})`),U.addColorStop(1,"transparent"),f.beginPath(),f.moveTo(v.x,0),f.lineTo(v.x+v.width,0),f.lineTo(v.x+v.width*1.5,h.height),f.lineTo(v.x-v.width*.5,h.height),f.closePath(),f.fillStyle=U,f.fill()}),f.globalCompositeOperation="source-over",p.forEach(v=>{v.update(s),v.draw(f)}),C(),te.forEach(v=>{v.update(s),v.draw(f,s)}),Et(f)};O();const ce=()=>{h.width=window.innerWidth,h.height=window.innerHeight};return window.addEventListener("resize",ce),()=>{i=!1,window.removeEventListener("resize",ce),cancelAnimationFrame(c)}},[Z,xe,Et]),et.useEffect(()=>{if(Z!=="flowerOfLife"||!ne.current||typeof Tn>"u")return;d.current=[];const h=new gn;bt.current=h;const f=new xn(50,window.innerWidth/window.innerHeight,.1,1e3);f.position.z=8;const a=new bn({antialias:!0,alpha:!0});a.setSize(window.innerWidth,window.innerHeight),a.setPixelRatio(Math.min(window.devicePixelRatio,2)),a.setClearColor(0,0),ne.current.appendChild(a.domElement),a.domElement.style.pointerEvents="none",ht.current=a,yt.current=new An;const R=((u,C,c)=>{C/=100,c/=100;const i=C*Math.min(c,1-c),O=ce=>{const M=(ce+u/30)%12;return c-i*Math.max(Math.min(M-3,9-M,1),-1)};return(Math.round(O(0)*255)<<16)+(Math.round(O(8)*255)<<8)+Math.round(O(4)*255)})(S,52,68),w=new Le({color:R,wireframe:!0,transparent:!0,opacity:.8}),J=new Fe,K=.6,te=.015,ae=64,p=[],x=[{x:0,y:0}];for(let u=0;u<6;u++){const C=u/6*Math.PI*2;x.push({x:Math.cos(C)*K,y:Math.sin(C)*K})}for(let u=0;u<6;u++){const C=u/6*Math.PI*2;x.push({x:Math.cos(C)*K*2,y:Math.sin(C)*K*2});const c=C+Math.PI/6;x.push({x:Math.cos(c)*K*Math.sqrt(3),y:Math.sin(c)*K*Math.sqrt(3)})}x.forEach(u=>{const C=new Pn(K,te,16,ae);p.push(C);const c=new De(C,w);c.position.set(u.x,u.y,0),J.add(c)}),h.add(J),gt.current=J;let G,B=!0;const F=()=>{if(!B)return;G=requestAnimationFrame(F);const u=yt.current.getElapsedTime();if(gt.current){if(d.current.length>0){const i=d.current.find(O=>O.active)||d.current[0];if(i){const O=(i.x/window.innerWidth-.5)*2,ce=(i.y/window.innerHeight-.5)*2;gt.current.rotation.y+=O*.02,gt.current.rotation.x+=ce*.02}}else gt.current.rotation.y+=4e-4,gt.current.rotation.x+=2e-4,gt.current.rotation.z+=12e-5;const C=ue(u),c=.9+C*.2;gt.current.scale.setScalar(c),w.opacity=.55+C*.3}a.render(h,f)};F();const r=()=>{f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",r),()=>{B=!1,window.removeEventListener("resize",r),cancelAnimationFrame(G),ne.current&&ne.current.contains(a.domElement)&&ne.current.removeChild(a.domElement),p.forEach(u=>u.dispose()),w.dispose(),a.dispose()}},[Z,S,ue]),et.useEffect(()=>{if(Z!=="koiPond"||!ne.current||typeof Tn>"u")return;d.current=[];const h=new gn;bt.current=h;const f=new xn(60,window.innerWidth/window.innerHeight,.1,1e3);f.position.set(0,6,7),f.lookAt(0,0,0);const a=new bn({antialias:!0,alpha:!0});a.setSize(window.innerWidth,window.innerHeight),a.setPixelRatio(Math.min(window.devicePixelRatio,2)),a.setClearColor(0,0),ne.current.appendChild(a.domElement),a.domElement.style.pointerEvents="none",ht.current=a,yt.current=new An;const b=(E,v,U)=>{v/=100,U/=100;const m=v*Math.min(U,1-U),y=T=>{const L=(T+E/30)%12;return U-m*Math.max(Math.min(L-3,9-L,1),-1)};return(Math.round(y(0)*255)<<16)+(Math.round(y(8)*255)<<8)+Math.round(y(4)*255)},R=new Fe;h.add(R);const w=[],J=7,K=E=>{const v=new Fe,U=new en(.3,16,12);U.scale(1.8,.5,.8);const m=E%4;let y;m===0?y=b(S,70,55):m===1?y=b(S,50,45):m===2?y=b(S,60,65):y=b(S,40,35);const T=new Le({color:y,transparent:!0,opacity:.75}),L=new De(U,T);v.add(L);const q=new _o(.2,.5,8);q.rotateX(Math.PI/2);const le=new Le({color:y,transparent:!0,opacity:.6}),$=new De(q,le);$.position.set(-.55,0,0),v.add($);const Pe=new _o(.08,.25,4),Je=new Le({color:y,transparent:!0,opacity:.5}),pt=new De(Pe,Je);pt.position.set(0,.2,0),v.add(pt);const dt=E/J*Math.PI*2,Mt=1.5+Math.random()*1.5;return v.position.set(Math.cos(dt)*Mt,-.2+Math.random()*.15,Math.sin(dt)*Mt),v.userData={baseAngle:dt,orbitRadius:Mt,speed:.05+Math.random()*.03,wobblePhase:Math.random()*Math.PI*2,depthPhase:Math.random()*Math.PI*2,tail:$},R.add(v),v};for(let E=0;E<J;E++)w.push(K(E));const te=new Uo(10,10,32,32),ae=new Le({color:b(S,40,20),transparent:!0,opacity:.3,wireframe:!0,side:ro}),p=new De(te,ae);p.rotation.x=-Math.PI/2,p.position.y=.1,R.add(p);const x=[],G=5;for(let E=0;E<G;E++){const v=new Ca(.25+Math.random()*.15,12),U=new Le({color:b(S,30,25),transparent:!0,opacity:.4,side:ro}),m=new De(v,U);m.rotation.x=-Math.PI/2;const y=Math.random()*Math.PI*2,T=1+Math.random()*2.5;m.position.set(Math.cos(y)*T,.12,Math.sin(y)*T),m.userData={phase:Math.random()*Math.PI*2},R.add(m),x.push(m)}const B=[],F=(E,v)=>{const U=new Pa(.1,.15,32),m=new Le({color:b(S,50,60),transparent:!0,opacity:.6,side:ro}),y=new De(U,m);y.rotation.x=-Math.PI/2,y.position.set(E,.15,v),y.userData={age:0,startRadius:.1},R.add(y),B.push(y)},r=new Fo,u=new Ya(new g(0,1,0),-.1),C=new g;let c=0,i=null,O=0,ce,M=!0;const s=()=>{if(!M)return;ce=requestAnimationFrame(s);const E=yt.current.getElapsedTime();if(d.current.length>0){const y=d.current.find(T=>T.active)||d.current[0];if(y){const T=(y.x/window.innerWidth-.5)*2,L=(y.y/window.innerHeight-.5)*2;if(R.rotation.y+=T*.015,f.position.y=5+L*.5,f.lookAt(0,0,0),E-c>.5){const q=y.x/window.innerWidth*2-1,le=-(y.y/window.innerHeight)*2+1;if(r.setFromCamera(new cn(q,le),f),r.ray.intersectPlane(u,C)){const $=C.clone();$.applyMatrix4(R.matrixWorld.clone().invert()),F($.x,$.z),i={x:$.x,z:$.z},O=E}c=E}}}else R.rotation.y+=1e-4;i&&E-O>4&&(i=null);const v=ue(E),U=.95+v*.1;R.scale.setScalar(U),w.forEach((y,T)=>{const L=y.userData,q=.35+v*.15;let le,$;if(i){const _=T*.3,ye=Math.max(0,1-(E-O-_)*.15);if(ye>0){const Re=T/w.length*Math.PI*2,Ue=.3;le=i.x+Math.cos(Re)*Ue,$=i.z+Math.sin(Re)*Ue;const ft=E*L.speed*q+L.baseAngle,wt=Math.sin(ft)*L.orbitRadius,Pt=Math.sin(ft*2)*L.orbitRadius*.5;le=le*ye+wt*(1-ye),$=$*ye+Pt*(1-ye)}else{const Re=E*L.speed*q+L.baseAngle;le=Math.sin(Re)*L.orbitRadius,$=Math.sin(Re*2)*L.orbitRadius*.5}}else{const _=E*L.speed*q+L.baseAngle;le=Math.sin(_)*L.orbitRadius,$=Math.sin(_*2)*L.orbitRadius*.5}const Pe=i?.025:.008;y.position.x+=(le-y.position.x)*Pe,y.position.z+=($-y.position.z)*Pe;const Je=Math.sin(E*.15+L.depthPhase)*.1;y.position.y=-.15+Je+v*.02;const pt=le-y.position.x,dt=$-y.position.z;if(Math.abs(pt)>.001||Math.abs(dt)>.001){const ye=Math.atan2(dt,pt)-y.rotation.y;y.rotation.y+=ye*.05}const Mt=i?4:2.5;L.tail.rotation.y=Math.sin(E*Mt*q+L.wobblePhase)*.2,y.rotation.z=Math.sin(E*1.2*q+L.wobblePhase)*.03});const m=te.attributes.position.array;for(let y=0;y<m.length;y+=3){const T=m[y],L=m[y+1];m[y+2]=Math.sin(T*2+E*.3)*.015+Math.cos(L*2+E*.2)*.015+v*.01}te.attributes.position.needsUpdate=!0,ae.opacity=.25+v*.15,x.forEach(y=>{const T=Math.sin(E*.25+y.userData.phase)*.015;y.position.y=.1+T+v*.03,y.rotation.z=Math.sin(E*.1+y.userData.phase)*.03});for(let y=B.length-1;y>=0;y--){const T=B[y];T.userData.age+=.016;const L=T.userData.age;T.userData.startRadius+L*1.5,T.scale.setScalar(1+L*8),T.material.opacity=Math.max(0,.6-L*.8),L>1&&(R.remove(T),T.geometry.dispose(),T.material.dispose(),B.splice(y,1))}a.render(h,f)};s();const D=()=>{f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",D),()=>{M=!1,window.removeEventListener("resize",D),cancelAnimationFrame(ce),ne.current&&ne.current.contains(a.domElement)&&ne.current.removeChild(a.domElement),w.forEach(E=>{E.children.forEach(v=>{v.geometry&&v.geometry.dispose(),v.material&&v.material.dispose()})}),te.dispose(),ae.dispose(),x.forEach(E=>{E.geometry.dispose(),E.material.dispose()}),B.forEach(E=>{E.geometry.dispose(),E.material.dispose()}),a.dispose()}},[Z,S,ue]),et.useEffect(()=>{if(Z!=="lavaTouch"||!ne.current||typeof Tn>"u")return;d.current=[];const h=new gn;bt.current=h;const f=new xn(50,window.innerWidth/window.innerHeight,.1,1e3);f.position.set(0,0,9);const a=new bn({antialias:!0,alpha:!0});a.setSize(window.innerWidth,window.innerHeight),a.setPixelRatio(Math.min(window.devicePixelRatio,2)),a.setClearColor(0,0),ne.current.appendChild(a.domElement),a.domElement.style.pointerEvents="auto",ht.current=a,yt.current=new An;const b=(m,y,T)=>{y/=100,T/=100;const L=y*Math.min(T,1-T),q=le=>{const $=(le+m/30)%12;return T-L*Math.max(Math.min($-3,9-$,1),-1)};return(Math.round(q(0)*255)<<16)+(Math.round(q(8)*255)<<8)+Math.round(q(4)*255)},R=(m,y,T)=>{const L=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],q=[...L,...L],le=Ft=>Ft*Ft*Ft*(Ft*(Ft*6-15)+10),$=(Ft,Wt,be)=>Wt+Ft*(be-Wt),Pe=(Ft,Wt,be,k)=>{const j=Ft&15,l=j<8?Wt:be,W=j<4?be:j===12||j===14?Wt:k;return(j&1?-l:l)+(j&2?-W:W)},Je=Math.floor(m)&255,pt=Math.floor(y)&255,dt=Math.floor(T)&255;m-=Math.floor(m),y-=Math.floor(y),T-=Math.floor(T);const Mt=le(m),_=le(y),ye=le(T),Re=q[Je]+pt,Ue=q[Re]+dt,ft=q[Re+1]+dt,wt=q[Je+1]+pt,Pt=q[wt]+dt,qt=q[wt+1]+dt;return $(ye,$(_,$(Mt,Pe(q[Ue],m,y,T),Pe(q[Pt],m-1,y,T)),$(Mt,Pe(q[ft],m,y-1,T),Pe(q[qt],m-1,y-1,T))),$(_,$(Mt,Pe(q[Ue+1],m,y,T-1),Pe(q[Pt+1],m-1,y,T-1)),$(Mt,Pe(q[ft+1],m,y-1,T-1),Pe(q[qt+1],m-1,y-1,T-1))))},w=new Fe;h.add(w);const J=[],K=.15,te=12,ae=(m,y,T,L)=>{const q=new Ro(L,4),le=q.attributes.position.array.slice();q.userData={originalPositions:le};const $=new Le({color:b(S,52,68),wireframe:!0,transparent:!0,opacity:.75}),Pe=new De(q,$);Pe.position.set(m,y,T);const Je={mesh:Pe,radius:L,position:new g(m,y,T),velocity:new g((Math.random()-.5)*.004,(Math.random()-.5)*.004,(Math.random()-.5)*.002),phase:Math.random()*Math.PI*2,floatSpeed:.05+Math.random()*.04,wobbleSpeed:.1+Math.random()*.06,wobbleIntensity:.12+Math.random()*.08,hue:S};return J.push(Je),w.add(Pe),Je},p=m=>{const y=J.indexOf(m);if(y===-1)return;tn.medium();const T=m.radius*.6;if(T>=K&&J.length<te){const L=m.radius>.35?3:2;for(let q=0;q<L;q++){const le=q/L*Math.PI*2+Math.random()*.5,$=m.radius*.8,Pe=m.position.x+Math.cos(le)*$,Je=m.position.y+Math.sin(le)*$*.5,pt=m.position.z+(Math.random()-.5)*.3;ae(Pe,Je,pt,T*(.8+Math.random()*.4)).velocity.set(Math.cos(le)*.03,Math.sin(le)*.02+.01,(Math.random()-.5)*.02)}}w.remove(m.mesh),m.mesh.geometry.dispose(),m.mesh.material.dispose(),J.splice(y,1),J.length<4&&setTimeout(()=>{Z==="lavaTouch"&&J.length<te&&ae((Math.random()-.5)*2.5,-3-Math.random(),(Math.random()-.5)*1.5,.35+Math.random()*.25)},800+Math.random()*600)};for(let m=0;m<6;m++)ae((Math.random()-.5)*2.5,(Math.random()-.5)*3.5,(Math.random()-.5)*1.5,.35+Math.random()*.25);const x=150,G=new He,B=new Float32Array(x*3),F=[];for(let m=0;m<x;m++){const y=m*3;B[y]=(Math.random()-.5)*6,B[y+1]=(Math.random()-.5)*6,B[y+2]=(Math.random()-.5)*3,F.push({x:(Math.random()-.5)*.005,y:(Math.random()-.5)*.005,z:(Math.random()-.5)*.003,phase:Math.random()*Math.PI*2})}G.setAttribute("position",new Cn(B,3));const r=new kn({color:b(S,45,60),size:.02,transparent:!0,opacity:.4,blending:Xn}),u=new Rn(G,r);w.add(u);const C=new Fo,c=new cn,i=m=>{m.preventDefault();const y=a.domElement.getBoundingClientRect(),T=m.touches?m.touches[0].clientX:m.clientX,L=m.touches?m.touches[0].clientY:m.clientY;c.x=(T-y.left)/y.width*2-1,c.y=-((L-y.top)/y.height)*2+1,C.setFromCamera(c,f);const q=J.map($=>$.mesh),le=C.intersectObjects(q);if(le.length>0){const $=le[0].object,Pe=J.find(Je=>Je.mesh===$);Pe&&p(Pe)}};a.domElement.addEventListener("pointerdown",i),a.domElement.addEventListener("touchstart",i,{passive:!1});let O,ce=!0,M=.5,s=0;const D=.003,E=.92,v=()=>{if(!ce)return;O=requestAnimationFrame(v);const m=yt.current.getElapsedTime(),T=(ue(m)-M)*D;s=(s+T)*E,M+=s,M=Math.max(0,Math.min(1,M));const L=M,q=.75+L*.5;if(w.scale.setScalar(q),f.position.z=11-L*4,d.current.length>0){const $=d.current.find(Pe=>Pe.active)||d.current[0];if($){const Pe=($.x/window.innerWidth-.5)*2,Je=($.y/window.innerHeight-.5)*2;w.rotation.y+=Pe*.015,w.rotation.x+=Je*.008}}else w.rotation.y+=15e-5;J.forEach($=>{const Pe=Math.sin(m*$.floatSpeed+$.phase)*.3;$.position.y+=(Pe-($.position.y-$.mesh.position.y))*.008,$.position.x+=Math.sin(m*.03+$.phase*1.5)*4e-4,$.position.z+=Math.cos(m*.02+$.phase*.7)*2e-4,$.position.add($.velocity),$.velocity.multiplyScalar(.98),$.position.y>2.2&&($.velocity.y-=3e-4),$.position.y<-2.2&&($.velocity.y+=3e-4),$.position.x>1.8&&($.velocity.x-=2e-4),$.position.x<-1.8&&($.velocity.x+=2e-4),$.position.z>1&&($.velocity.z-=1e-4),$.position.z<-1&&($.velocity.z+=1e-4),$.mesh.position.x=$.position.x,$.mesh.position.y=$.position.y,$.mesh.position.z=$.position.z;const Je=$.mesh.geometry,pt=Je.attributes.position.array,dt=Je.userData.originalPositions,Mt=new g;for(let _=0;_<pt.length;_+=3){const ye=dt[_],Re=dt[_+1],Ue=dt[_+2];Mt.set(ye,Re,Ue).normalize();const wt=R(ye*1.5+$.phase,Re*1.5+m*$.wobbleSpeed,Ue*1.5+m*.05)*$.wobbleIntensity;pt[_]=ye+Mt.x*wt,pt[_+1]=Re+Mt.y*wt,pt[_+2]=Ue+Mt.z*wt}Je.attributes.position.needsUpdate=!0,Je.computeVertexNormals(),$.mesh.scale.setScalar(.8+L*.35),$.mesh.material.opacity=.55+L*.3});const le=G.attributes.position.array;for(let $=0;$<x;$++){const Pe=$*3,Je=F[$];le[Pe]+=Je.x*.4+Math.sin(m*.1+Je.phase)*8e-4,le[Pe+1]+=Je.y*.4+Math.cos(m*.07+Je.phase)*8e-4,le[Pe+2]+=Je.z*.4,le[Pe]>3&&(le[Pe]=-3),le[Pe]<-3&&(le[Pe]=3),le[Pe+1]>3&&(le[Pe+1]=-3),le[Pe+1]<-3&&(le[Pe+1]=3),le[Pe+2]>1.5&&(le[Pe+2]=-1.5),le[Pe+2]<-1.5&&(le[Pe+2]=1.5)}G.attributes.position.needsUpdate=!0,r.opacity=.25+L*.3,a.render(h,f)};v();const U=()=>{f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",U),()=>{ce=!1,window.removeEventListener("resize",U),a.domElement.removeEventListener("pointerdown",i),a.domElement.removeEventListener("touchstart",i),cancelAnimationFrame(O),ne.current&&ne.current.contains(a.domElement)&&ne.current.removeChild(a.domElement),J.forEach(m=>{m.mesh.geometry.dispose(),m.mesh.material.dispose()}),G.dispose(),r.dispose(),a.dispose()}},[Z,S,ue]),et.useEffect(()=>{if(Z!=="mountains"||!ne.current||typeof Tn>"u")return;d.current=[];const h=new gn,f=new xn(60,window.innerWidth/window.innerHeight,.1,1e3);f.position.set(0,2,8);const a=new bn({antialias:!0,alpha:!0});a.setSize(window.innerWidth,window.innerHeight),a.setPixelRatio(Math.min(window.devicePixelRatio,2)),ne.current.appendChild(a.domElement),a.domElement.style.pointerEvents="auto",ht.current=a;const b=(m,y,T)=>{y/=100,T/=100;const L=y*Math.min(T,1-T),q=le=>{const $=(le+m/30)%12;return T-L*Math.max(Math.min($-3,9-$,1),-1)};return(Math.round(q(0)*255)<<16)+(Math.round(q(8)*255)<<8)+Math.round(q(4)*255)},R=(m,y)=>{const T=Math.sin(m*.5)*Math.cos(y*.5)*2,L=Math.sin(m*.2+1)*Math.cos(y*.3+2)*4,q=Math.sin(m*.1)*Math.cos(y*.1)*6;return T+L+q},w=[];for(let m=0;m<4;m++){const y=-m*15,T=40,L=20,q=60,le=30,$=new Uo(T,L,q,le);$.rotateX(-Math.PI/2);const Pe=$.attributes.position.array;for(let _=0;_<Pe.length;_+=3){const ye=Pe[_],Re=Pe[_+2],Ue=R(ye*.3+m*5,Re*.3)*(1+m*.5);Pe[_+1]=Math.max(0,Ue)}$.computeVertexNormals();const Je=30-m*5,pt=30-m*5,dt=new Le({color:b(S,pt,Je),wireframe:!0,transparent:!0,opacity:.8-m*.12}),Mt=new De($,dt);Mt.position.z=y-15,Mt.position.y=-3,h.add(Mt),w.push({mesh:Mt,geometry:$,material:dt,layer:m})}const J=300,K=new Float32Array(J*3),te=[];for(let m=0;m<J;m++)K[m*3]=(Math.random()-.5)*40,K[m*3+1]=Math.random()*4,K[m*3+2]=(Math.random()-.5)*60-20,te.push({speed:.005+Math.random()*.01,phase:Math.random()*Math.PI*2});const ae=new He;ae.setAttribute("position",new Cn(K,3));const p=new kn({color:b(S,20,60),size:.15,transparent:!0,opacity:.35,blending:Xn}),x=new Rn(ae,p);h.add(x);const G=200,B=new Float32Array(G*3);for(let m=0;m<G;m++)B[m*3]=(Math.random()-.5)*100,B[m*3+1]=10+Math.random()*30,B[m*3+2]=-50-Math.random()*50;const F=new He;F.setAttribute("position",new Cn(B,3));const r=new kn({color:16777215,size:.05,transparent:!0,opacity:.4}),u=new Rn(F,r);h.add(u);let C=0,c=0,i=0,O=0,ce=0,M=0;const s=new An;let D,E=!0;const v=()=>{if(!E)return;D=requestAnimationFrame(v);const m=s.getElapsedTime(),y=ue(m);if(d.current.length>0){const L=d.current.find(q=>q.active)||d.current[0];if(L){O=(L.x/window.innerWidth-.5)*Math.PI*.3;const q=L.y/window.innerHeight;M=(q-.5)*.1,c=-(.005+(1-q)*.01)}}else O=Math.sin(m*.01)*.15,M=Math.sin(m*.008)*.02,c=-.004;i+=(O-i)*.005,ce+=(M-ce)*.005,C+=(c-C)*.008,f.position.x+=Math.sin(i)*C,f.position.z+=Math.cos(i)*C,f.position.y=2+Math.sin(m*.1)*.2,f.rotation.y=i,f.rotation.x=ce,w.forEach((L,q)=>{L.mesh.position.y=-3+y*.1,L.material.opacity=.25+y*.15-q*.04});const T=ae.attributes.position.array;for(let L=0;L<J;L++){const q=te[L];T[L*3]+=q.speed,T[L*3+1]+=Math.sin(m+q.phase)*.003+y*.002,T[L*3]>20&&(T[L*3]=-20)}ae.attributes.position.needsUpdate=!0,p.opacity=.1+y*.15,r.opacity=.25+y*.2+Math.sin(m*.5)*.1,a.render(h,f)};v();const U=()=>{f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",U),()=>{var m;E=!1,window.removeEventListener("resize",U),cancelAnimationFrame(D),w.forEach(y=>{y.geometry.dispose(),y.material.dispose()}),ae.dispose(),p.dispose(),F.dispose(),r.dispose(),(m=ne.current)!=null&&m.contains(a.domElement)&&ne.current.removeChild(a.domElement),a.dispose()}},[Z,S,ue]),et.useEffect(()=>{if(Z!=="maloka"||!ne.current||typeof Tn>"u")return;d.current=[];const h=new gn;h.fog=new On(0,.015);const f=new xn(75,window.innerWidth/window.innerHeight,.1,1e3);f.position.set(0,1.2,4),f.lookAt(0,1,0);const a=new bn({antialias:!0,alpha:!0});a.setSize(window.innerWidth,window.innerHeight),a.setPixelRatio(Math.min(window.devicePixelRatio,2)),ne.current.appendChild(a.domElement),a.domElement.style.pointerEvents="auto",ht.current=a;const b=(l,W,se)=>{W/=100,se/=100;const Te=W*Math.min(se,1-se),X=de=>{const Se=(de+l/30)%12;return se-Te*Math.max(Math.min(Se-3,9-Se,1),-1)};return(Math.round(X(0)*255)<<16)+(Math.round(X(8)*255)<<8)+Math.round(X(4)*255)},R=[],w=[],J=[],K=new Fe,te=12,ae=8,p=5;for(let l=0;l<te;l++){const W=l/te*Math.PI*2,se=Math.cos(W)*ae,Te=Math.sin(W)*ae,X=new Ht({color:b(S,50,45),transparent:!0,opacity:.5});w.push(X);const de=new He().setFromPoints([new g(se,0,Te),new g(se*.95,p,Te*.95)]);R.push(de);const Se=new rt(de,X);K.add(Se);const Xe=[];for(let it=0;it<=8;it++){const zt=it/8,lt=se*.95*(1-zt),ot=Te*.95*(1-zt),kt=p+zt*3;Xe.push(new g(lt,kt,ot))}const Qe=new He().setFromPoints(Xe);R.push(Qe);const $e=new Ht({color:b(S,45,40),transparent:!0,opacity:.35});w.push($e);const fe=new rt(Qe,$e);K.add(fe)}h.add(K);const x=[];for(let l=0;l<5;l++){const W=new Pa(.1,.15,32);W.rotateX(-Math.PI/2),R.push(W);const se=new Le({color:b(S,60,55),transparent:!0,opacity:0,side:ro});w.push(se);const Te=new De(W,se);Te.position.y=.02,x.push({mesh:Te,progress:l*.2,material:se}),h.add(Te)}const G=new Fe;for(let l=1;l<=20;l++){const W=l*.35,se=[],Te=80+l*4,X=.03+l%4*.015;for(let Qe=0;Qe<=Te;Qe++){const $e=Qe/Te*Math.PI*2,fe=Math.sin(Qe*.5+l)*X,it=W+fe;se.push(new g(Math.cos($e)*it,.01,Math.sin($e)*it))}const de=new He().setFromPoints(se);R.push(de);const Se=new Ht({color:b(S,60,50+l%3*5),transparent:!0,opacity:.4+l%4*.08});w.push(Se);const Xe=new rt(de,Se);Xe.userData.ring=l,Xe.userData.baseRadius=W,J.push(Xe),G.add(Xe)}for(let l=0;l<36;l++){const W=l/36*Math.PI*2,se=[];for(let Se=0;Se<40;Se++){const Xe=.3+Se*.18,Qe=Math.sin(Se*.3+l*.2)*.04,$e=W+Qe;se.push(new g(Math.cos($e)*Xe,.01,Math.sin($e)*Xe))}const Te=new He().setFromPoints(se);R.push(Te);const X=new Ht({color:b(S,55,50),transparent:!0,opacity:l%4===0?.5:.3});w.push(X);const de=new rt(Te,X);J.push(de),G.add(de)}h.add(G);const B=[],F=.4;for(let l=0;l<=24;l++){const W=l/24*Math.PI*2,se=Math.sin(l*3)*.05;B.push(new g(Math.cos(W)*(F+se),.02,Math.sin(W)*(F+se)))}const r=new He().setFromPoints(B);R.push(r);const u=new Ht({color:b(S,70,50),transparent:!0,opacity:.4});w.push(u);const C=new rt(r,u);h.add(C);const c=new Fe,i=new Un(.05,.06,.5,8);R.push(i);const O=new Le({color:b(S,30,25),transparent:!0,opacity:.8});w.push(O);for(let l=0;l<6;l++){const W=new De(i,O),se=l/6*Math.PI*2;W.position.x=Math.cos(se)*.12,W.position.z=Math.sin(se)*.12,W.position.y=.15,W.rotation.z=Math.PI*.15,W.rotation.y=se+Math.PI/2,W.rotation.x=Math.PI*.1,c.add(W)}h.add(c);const ce=new en(.06,16,16);R.push(ce);const M=new Le({color:b(S,80,60),transparent:!0,opacity:.5});w.push(M);const s=new De(ce,M);s.position.y=.12,h.add(s);const D=30,E=new Float32Array(D*3),v=[],U=[];for(let l=0;l<D;l++)E[l*3]=(Math.random()-.5)*.2,E[l*3+1]=Math.random()*.3,E[l*3+2]=(Math.random()-.5)*.2,v.push({x:(Math.random()-.5)*.003,y:.003+Math.random()*.005,z:(Math.random()-.5)*.003}),U.push(Math.random());const m=new He;m.setAttribute("position",new Cn(E,3)),R.push(m);const y=new kn({color:b(S,90,55),size:.04,transparent:!0,opacity:.8,blending:Xn});w.push(y);const T=new Rn(m,y);h.add(T);const L=15,q=new Float32Array(L*3),le=[],$=[];for(let l=0;l<L;l++)q[l*3]=(Math.random()-.5)*.15,q[l*3+1]=Math.random()*.2,q[l*3+2]=(Math.random()-.5)*.15,le.push({x:(Math.random()-.5)*.006,y:.006+Math.random()*.008,z:(Math.random()-.5)*.006}),$.push(Math.random());const Pe=new He;Pe.setAttribute("position",new Cn(q,3)),R.push(Pe);const Je=new kn({color:b(S,100,70),size:.02,transparent:!0,opacity:.9,blending:Xn});w.push(Je);const pt=new Rn(Pe,Je);h.add(pt);const dt=[],Mt=8,_=b(S,70,60),ye=16711935;for(let l=0;l<Mt;l++){const W=new Fe,se=l/Mt*Math.PI*2+Math.random()*.5,Te=2+Math.random()*4,X=1.5+Math.random()*3;W.position.set(Math.cos(se)*Te,X,Math.sin(se)*Te);const de=.15+Math.random()*.15,Se=l%4;if(Se===0){const Xe=[new g(0,de,0),new g(de,0,0),new g(0,-de,0),new g(-de,0,0),new g(0,de,0)],Qe=new He().setFromPoints(Xe);R.push(Qe);const $e=new Ht({color:l%2===0?ye:_,transparent:!0,opacity:0});w.push($e),W.add(new rt(Qe,$e));const fe=new He().setFromPoints([new g(-de*.5,0,0),new g(de*.5,0,0)]),it=new He().setFromPoints([new g(0,-de*.5,0),new g(0,de*.5,0)]);R.push(fe,it);const zt=new Ht({color:_,transparent:!0,opacity:0});w.push(zt),W.add(new rt(fe,zt)),W.add(new rt(it,zt))}else if(Se===1){const Xe=[];let Qe=-de,$e=-de;Xe.push(new g(Qe,$e,0));for(let zt=0;zt<6;zt++)zt%2===0?Qe+=de*.4:$e+=de*.4,Xe.push(new g(Qe,$e,0));const fe=new He().setFromPoints(Xe);R.push(fe);const it=new Ht({color:_,transparent:!0,opacity:0});w.push(it),W.add(new rt(fe,it))}else if(Se===2){const Xe=[];for(let zt=0;zt<=20;zt++){const lt=zt/20,ot=(lt-.5)*de*2,kt=Math.sin(lt*Math.PI)*de*.5;Xe.push(new g(ot,kt,0))}for(let zt=20;zt>=0;zt--){const lt=zt/20,ot=(lt-.5)*de*2,kt=-Math.sin(lt*Math.PI)*de*.5;Xe.push(new g(ot,kt,0))}const Qe=new He().setFromPoints(Xe);R.push(Qe);const $e=new Ht({color:ye,transparent:!0,opacity:0});w.push($e),W.add(new rt(Qe,$e));const fe=new en(de*.15,8,8);R.push(fe);const it=new Le({color:_,transparent:!0,opacity:0});w.push(it),W.add(new De(fe,it))}else for(let Xe=0;Xe<4;Xe++){const Qe=Xe/4*Math.PI*2,$e=[new g(0,0,0),new g(Math.cos(Qe)*de,Math.sin(Qe)*de,0)],fe=new He().setFromPoints($e);R.push(fe);const it=new Ht({color:_,transparent:!0,opacity:0});w.push(it),W.add(new rt(fe,it))}h.add(W),dt.push({group:W,baseY:X,baseAngle:se,dist:Te,phase:Math.random()*Math.PI*2,fadePhase:Math.random()*Math.PI*2,driftSpeed:3e-4+Math.random()*3e-4,bobSpeed:.3+Math.random()*.3})}const Re=new An;let Ue=0,ft=0,wt=0,Pt=0;const qt=1.2,Ft=4;let Wt,be=!0;const k=()=>{if(!be)return;Wt=requestAnimationFrame(k);const l=Re.getElapsedTime(),W=ue(l),se=d.current;if(se.length>0){const fe=se[0],it=(fe.x/window.innerWidth-.5)*2,zt=(fe.y/window.innerHeight-.5)*2;ft=it*Math.PI*.2,Ue=zt*Math.PI*.1}else ft*=.98,Ue*=.98;wt+=(Ue-wt)*.02,Pt+=(ft-Pt)*.02;const Te=Math.sin(l*.3)*.08,X=Math.sin(l*.25)*.15;f.position.y=qt+Te+W*.1,f.position.z=Ft+X-W*.2,f.fov=75+W*5,f.updateProjectionMatrix();const de=Math.sin(Pt)*5,Se=1-wt*2,Xe=-Math.cos(Pt)*5;f.lookAt(de,Se,Xe),s.scale.setScalar(1+W*.4+Math.sin(l*2)*.1),M.opacity=.5+W*.4;const Qe=T.geometry.attributes.position.array;for(let fe=0;fe<D;fe++)U[fe]+=.002,U[fe]>1&&(Qe[fe*3]=(Math.random()-.5)*.2,Qe[fe*3+1]=Math.random()*.1,Qe[fe*3+2]=(Math.random()-.5)*.2,v[fe]={x:(Math.random()-.5)*.003,y:.003+Math.random()*.005,z:(Math.random()-.5)*.003},U[fe]=0),Qe[fe*3]+=v[fe].x+Math.sin(l*.5+fe)*5e-4,Qe[fe*3+1]+=v[fe].y,Qe[fe*3+2]+=v[fe].z+Math.cos(l*.5+fe)*5e-4;T.geometry.attributes.position.needsUpdate=!0,y.opacity=.6+W*.3;const $e=pt.geometry.attributes.position.array;for(let fe=0;fe<L;fe++)$[fe]+=.004,$[fe]>1&&($e[fe*3]=(Math.random()-.5)*.15,$e[fe*3+1]=Math.random()*.15,$e[fe*3+2]=(Math.random()-.5)*.15,le[fe]={x:(Math.random()-.5)*.006,y:.006+Math.random()*.008,z:(Math.random()-.5)*.006},$[fe]=0),$e[fe*3]+=le[fe].x+Math.sin(l*.5+fe)*.001,$e[fe*3+1]+=le[fe].y,$e[fe*3+2]+=le[fe].z+Math.cos(l*.5+fe)*.001;pt.geometry.attributes.position.needsUpdate=!0,Je.opacity=.7+W*.2,J.forEach((fe,it)=>{if(fe.material&&fe.material.opacity!==void 0){const lt=Math.sin(l*.3+it*.1)*.1;fe.material.opacity=.4+W*.2+lt}if(fe.userData.baseRadius){const zt=1+W*.03+Math.sin(l*.2+fe.userData.ring*.1)*.01;fe.scale.setScalar(zt)}}),G.rotation.y+=1e-4,x.forEach(fe=>{fe.progress+=.002*(1+W*.3),fe.progress>1&&(fe.progress=0);const it=.5+fe.progress*6;fe.mesh.scale.setScalar(it),fe.material.opacity=(1-fe.progress)*.3*(.5+W*.5)}),dt.forEach(fe=>{fe.baseAngle+=fe.driftSpeed,fe.group.position.x=Math.cos(fe.baseAngle)*fe.dist,fe.group.position.z=Math.sin(fe.baseAngle)*fe.dist,fe.group.position.y=fe.baseY+Math.sin(l*fe.bobSpeed+fe.phase)*.3,fe.group.rotation.y=l*.1+fe.phase,fe.group.rotation.z=Math.sin(l*.2+fe.phase)*.1;const zt=(Math.sin(l*.15+fe.fadePhase)+1)*.5*.5*(.6+W*.4);fe.group.children.forEach(lt=>{lt.material&&(lt.material.opacity=zt)})}),a.render(h,f)};k();const j=()=>{f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",j),()=>{var l;be=!1,window.removeEventListener("resize",j),cancelAnimationFrame(Wt),R.forEach(W=>W.dispose()),w.forEach(W=>W.dispose()),(l=ne.current)!=null&&l.contains(a.domElement)&&ne.current.removeChild(a.domElement),a.dispose()}},[Z,S,ue]),et.useEffect(()=>{if(Z!=="underwater"||!ne.current||typeof Tn>"u")return;d.current=[];const h=new gn,f=new xn(70,window.innerWidth/window.innerHeight,.1,1e3);f.position.set(0,0,0);const a=new bn({antialias:!0,alpha:!0});a.setSize(window.innerWidth,window.innerHeight),a.setPixelRatio(Math.min(window.devicePixelRatio,2)),ne.current.appendChild(a.domElement),a.domElement.style.pointerEvents="auto",ht.current=a;const b=(E,v,U)=>{v/=100,U/=100;const m=v*Math.min(U,1-U),y=T=>{const L=(T+E/30)%12;return U-m*Math.max(Math.min(L-3,9-L,1),-1)};return(Math.round(y(0)*255)<<16)+(Math.round(y(8)*255)<<8)+Math.round(y(4)*255)},R=400,w=new Float32Array(R*3),J=[];for(let E=0;E<R;E++)w[E*3]=(Math.random()-.5)*20,w[E*3+1]=(Math.random()-.5)*15,w[E*3+2]=(Math.random()-.5)*20-5,J.push({velocity:{x:(Math.random()-.5)*.005,y:.002+Math.random()*.005,z:(Math.random()-.5)*.005},phase:Math.random()*Math.PI*2,pulseSpeed:.5+Math.random()*1});const K=new He;K.setAttribute("position",new Cn(w,3));const te=new kn({color:b(S,60,65),size:.06,transparent:!0,opacity:.5,blending:Xn}),ae=new Rn(K,te);h.add(ae);const p=[],x=5;for(let E=0;E<x;E++){const v=new Fe,U=new en(.4,16,12,0,Math.PI*2,0,Math.PI/2),m=new Le({color:b(S,50,55),wireframe:!0,transparent:!0,opacity:.4}),y=new De(U,m);v.add(y);const T=8,L=[];for(let q=0;q<T;q++){const le=[],$=q/T*Math.PI*2,Pe=1+Math.random()*.5;for(let _=0;_<=15;_++){const ye=_/15;le.push(new g(Math.cos($)*.2*(1-ye*.5),-ye*Pe,Math.sin($)*.2*(1-ye*.5)))}const Je=new Sn(le),pt=new zn(Je,15,.02,4,!1),dt=new Le({color:b(S,45,50),transparent:!0,opacity:.3}),Mt=new De(pt,dt);v.add(Mt),L.push({mesh:Mt,geometry:pt,material:dt,points:le})}v.position.set((Math.random()-.5)*12,(Math.random()-.5)*8,-5-Math.random()*10),v.userData={velocity:{x:(Math.random()-.5)*.01,y:.005+Math.random()*.01,z:(Math.random()-.5)*.01},pulsePhase:Math.random()*Math.PI*2,tendrils:L},h.add(v),p.push({group:v,bell:y,bellGeom:U,bellMat:m,tendrils:L})}const G=new Uo(50,50,20,20);G.rotateX(-Math.PI/2);const B=G.attributes.position.array;for(let E=0;E<B.length;E+=3)B[E+1]=Math.random()*.5;const F=new Le({color:b(S,30,20),wireframe:!0,transparent:!0,opacity:.15}),r=new De(G,F);r.position.y=-10,r.position.z=-10,h.add(r);let u=0,C=0,c=0,i=0;const O=new An;let ce,M=!0;const s=()=>{if(!M)return;ce=requestAnimationFrame(s);const E=O.getElapsedTime(),v=ue(E);if(d.current.length>0){const m=d.current.find(y=>y.active)||d.current[0];m&&(c=(m.x/window.innerWidth-.5)*Math.PI*.2,i=(m.y/window.innerHeight-.5)*Math.PI*.1)}else c=Math.sin(E*.015)*.1,i=Math.sin(E*.01)*.05;u+=(c-u)*.005,C+=(i-C)*.005,f.rotation.y=u,f.rotation.x=C;const U=K.attributes.position.array;for(let m=0;m<R;m++){const y=J[m];U[m*3]+=y.velocity.x+Math.sin(E+y.phase)*.002,U[m*3+1]+=y.velocity.y,U[m*3+2]+=y.velocity.z,U[m*3+1]>8&&(U[m*3+1]=-8,U[m*3]=(Math.random()-.5)*20,U[m*3+2]=(Math.random()-.5)*20-5)}K.attributes.position.needsUpdate=!0,te.opacity=.3+v*.3,p.forEach(m=>{const y=m.group.userData;m.group.position.x+=y.velocity.x,m.group.position.y+=y.velocity.y*(.5+v*.5),m.group.position.z+=y.velocity.z,m.group.position.y>6&&(m.group.position.y=-6,m.group.position.x=(Math.random()-.5)*12);const T=Math.sin(E*2+y.pulsePhase)*.5+.5,L=.9+v*.2;m.bell.scale.set((1+T*.2)*L,(1-T*.15)*L,(1+T*.2)*L),m.bellMat.opacity=.3+v*.2+T*.1}),F.opacity=.08+v*.1,a.render(h,f)};s();const D=()=>{f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",D),()=>{var E;window.removeEventListener("resize",D),M=!1,cancelAnimationFrame(ce),h.traverse(v=>{v.geometry&&v.geometry.dispose(),v.material&&(Array.isArray(v.material)?v.material.forEach(U=>U.dispose()):v.material.dispose())}),(E=ne.current)!=null&&E.contains(a.domElement)&&ne.current.removeChild(a.domElement),a.dispose()}},[Z,S,ue]),et.useEffect(()=>{if(Z!=="lotus"||!ne.current||typeof Tn>"u")return;const h=new gn,f=new xn(60,window.innerWidth/window.innerHeight,.1,1e3);f.position.set(0,4,5);const a=new bn({antialias:!0,alpha:!0});a.setSize(window.innerWidth,window.innerHeight),a.setPixelRatio(Math.min(window.devicePixelRatio,2)),ne.current.appendChild(a.domElement),a.domElement.style.pointerEvents="auto",ht.current=a;const b=new Qo(f,a.domElement);b.enableDamping=!0,b.dampingFactor=.08,b.rotateSpeed=.25,b.enableZoom=!0,b.minDistance=2,b.maxDistance=15,b.autoRotate=!0,b.autoRotateSpeed=.5;const R=(y,T,L)=>{T/=100,L/=100;const q=T*Math.min(L,1-L),le=$=>{const Pe=($+y/30)%12;return L-q*Math.max(Math.min(Pe-3,9-Pe,1),-1)};return(Math.round(le(0)*255)<<16)+(Math.round(le(8)*255)<<8)+Math.round(le(4)*255)},w=new is(4210752,.6);h.add(w);const J=new Vo(R(S,30,90),1.5,100);J.position.set(0,10,5),h.add(J);const K=new Vo(R(S,60,60),.8,50);K.position.set(-5,2,-5),h.add(K);const te=new Vo(R(S,50,50),.4,30);te.position.set(0,-5,0),h.add(te);const ae=new Fe;h.add(ae);function p(){const y=new ka;y.moveTo(0,0),y.bezierCurveTo(.15,.3,.12,.7,0,1),y.bezierCurveTo(-.12,.7,-.15,.3,0,0);const T={steps:1,depth:.02,bevelEnabled:!0,bevelThickness:.01,bevelSize:.02,bevelSegments:3};return new ls(y,T)}const x=p(),G=[x],B=[],F=[{count:8,radius:.3,height:0,scale:.8,baseAngle:75,lightness:55},{count:8,radius:.5,height:.1,scale:1,baseAngle:65,lightness:58},{count:12,radius:.7,height:.15,scale:1.1,baseAngle:55,lightness:62},{count:12,radius:.9,height:.2,scale:1.25,baseAngle:45,lightness:66},{count:16,radius:1.1,height:.22,scale:1.4,baseAngle:35,lightness:70},{count:16,radius:1.3,height:.2,scale:1.5,baseAngle:25,lightness:75}],r=[];F.forEach((y,T)=>{for(let L=0;L<y.count;L++){const q=L/y.count*Math.PI*2,le=T%2===0?0:Math.PI/y.count,$=new ko({color:R(S,50,y.lightness),side:ro,transparent:!0,opacity:.9,roughness:.3,metalness:.1,emissive:new yn(R(S,40,y.lightness*.3))});B.push($);const Pe=new De(x,$);Pe.position.set(Math.cos(q+le)*y.radius,y.height,Math.sin(q+le)*y.radius),Pe.scale.set(y.scale,y.scale,y.scale),Pe.userData={baseAngle:y.baseAngle,orbitAngle:q+le,radius:y.radius,layerIndex:T,petalIndex:L},Pe.rotation.y=-(q+le)+Math.PI,Pe.rotation.x=ta.degToRad(y.baseAngle),ae.add(Pe),r.push(Pe)}});const u=new Fe,C=30;for(let y=0;y<C;y++){const T=new Un(.015,.01,.3,8);G.push(T);const L=new ko({color:R(S,70,60),emissive:R(S,60,40),emissiveIntensity:.3,roughness:.4});B.push(L);const q=new De(T,L),le=y/C*Math.PI*2+Math.random()*.3,$=.08+Math.random()*.12,Pe=Math.random()*.1;q.position.set(Math.cos(le)*$,.15+Pe,Math.sin(le)*$),q.rotation.x=(Math.random()-.5)*.4,q.rotation.z=(Math.random()-.5)*.4;const Je=new en(.025,8,8);G.push(Je);const pt=new ko({color:R(S,65,65),emissive:R(S,55,50),emissiveIntensity:.5});B.push(pt);const dt=new De(Je,pt);dt.position.y=.15,q.add(dt),q.userData={baseHeight:.15+Pe},u.add(q)}ae.add(u);const c=new en(.15,32,32);G.push(c);const i=new Le({color:R(S,40,90),transparent:!0,opacity:.6});B.push(i);const O=new De(c,i);O.position.y=.1,ae.add(O);const ce=new Ca(5,64);G.push(ce);const M=new ko({color:R(S,30,10),transparent:!0,opacity:.8,roughness:.1,metalness:.9});B.push(M);const s=new De(ce,M);s.rotation.x=-Math.PI/2,s.position.y=-.3,h.add(s);const D=new An;let E,v=!0;const U=()=>{if(!v)return;E=requestAnimationFrame(U);const y=D.getElapsedTime(),T=ue(y);b.update();const L=.3+T*.7;r.forEach(q=>{const{baseAngle:le,layerIndex:$}=q.userData,Pe=le*(1-L*.6),Je=ta.degToRad(Pe),pt=Math.sin(y*1.5+$*.5+q.userData.petalIndex*.3)*.03;q.rotation.x=Je+pt,q.material.emissiveIntensity=.05+T*.15}),u.children.forEach((q,le)=>{const $=Math.sin(y*2+le*.5)*.015;q.position.y=q.userData.baseHeight+T*.08+$}),O.scale.setScalar(1+T*.3),i.opacity=.4+T*.4,K.intensity=.6+T*.4,te.intensity=.3+T*.3,a.render(h,f)};U();const m=()=>{f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",m),()=>{var y;window.removeEventListener("resize",m),b.dispose(),v=!1,cancelAnimationFrame(E),G.forEach(T=>T.dispose()),B.forEach(T=>T.dispose()),(y=ne.current)!=null&&y.contains(a.domElement)&&ne.current.removeChild(a.domElement),a.dispose()}},[Z,S,ue]);const[ie,We]=et.useState(0),[_e,Be]=et.useState(0),[At,Bt]=et.useState(0),[on,an]=et.useState(0),[un,hn]=et.useState(!1),[sn,ln]=et.useState(!1);et.useRef(null);const rn=et.useMemo(()=>[{id:"intro",guidance:["Put your attention on the breath for a few moments.","Let each inhale be so gentle it barely stirs the hairs in your nose.","Let the breath be smooth and natural."]},{id:"garden",guidance:["Imagine a garden growing.","An abundance of fruits and vegetables.","Tomatoes ripening in the sun. Leafy greens. Squash on the vine.","This garden is nourished by your attention and care.","Tend it gently. Watch it grow."]},{id:"self",guidance:["Walk through your garden and harvest something for yourself.","Choose whatever calls to you.","You have tended this garden. You deserve its fruits.","Let yourself be nourished by your own care."]},{id:"beloved",guidance:["Think of someone you love deeply.","Walk through your garden and harvest a gift for them.","Perhaps their favorite fruit. Something that would make them smile.","See yourself handing them this gift from the garden in your heart.","Notice how it feels to give."]},{id:"parents",guidance:["Think of your parents, or those who raised you.","Whether still alive or passed, they exist in your heart.","Harvest the ripest, most perfect offering from the garden in your heart.","Hand it to them with gratitude.","Even if complicated, offer this gift freely."]},{id:"friends",guidance:["Think of your good friends, your relatives.","For each one, harvest a gift from the garden in your heart.","The more you give, the more it grows.","See each person receiving with joy.","Feel the warmth spreading outward."]},{id:"neutral",guidance:["Think of people you see in daily life.","The mail carrier. The grocery clerk. A neighbor.","For each, harvest something from the garden in your heart.","They too need nourishment.","Offer freely, expecting nothing."]},{id:"difficult",guidance:["Now think of someone difficult in your life.","Or someone you feel indifferent toward.","This is the harder practice.","Harvest a gift for this person from the garden in your heart.","Hand it to them with respect.","Feel the relief of letting go."]},{id:"all",guidance:["Now let the garden expand beyond all boundaries.","Open the gates and let everyone enter.","All beings everywhere — human, animal, seen and unseen.","Each one receives what they need.","And the garden grows more abundant with every gift.","There is no scarcity here. Only overflow.","May all beings be nourished."]},{id:"return",guidance:["Bring your attention back to yourself.","Notice that the garden in your heart is undiminished.","Giving has only made it more abundant.","This garden lives within you always.","Tend it daily. It will nourish you in return."]}],[]);et.useMemo(()=>rn.reduce((h,f)=>h+f.guidance.length,0),[rn]),et.useEffect(()=>{Z==="heartGarden"?(We(0),Be(0),an(0),hn(!1),ln(!1),setTimeout(()=>Bt(1),500)):Bt(0)},[Z]);const Mn=et.useCallback(()=>{if(un||sn)return;const h=rn[ie];h&&(ln(!0),Bt(0),setTimeout(()=>{_e<h.guidance.length-1?Be(f=>f+1):ie<rn.length-1?(We(f=>f+1),Be(0)):hn(!0),an(f=>f+1),setTimeout(()=>{Bt(1),setTimeout(()=>ln(!1),800)},100)},800))},[ie,_e,un,sn,rn]),pn=et.useRef(0);return et.useEffect(()=>{pn.current=on},[on]),et.useEffect(()=>{if(Z!=="heartGarden"||!ne.current||typeof Tn>"u")return;d.current=[];const h=new gn;bt.current=h,h.fog=new On(0,4e-4);const f=new xn(50,window.innerWidth/window.innerHeight,.1,2e3);f.position.set(0,200,800),f.lookAt(0,-100,0);const a=new bn({antialias:!0,alpha:!0});a.setSize(window.innerWidth,window.innerHeight),a.setPixelRatio(Math.min(window.devicePixelRatio,2)),a.setClearColor(0,0),ne.current.appendChild(a.domElement),a.domElement.style.pointerEvents="none",ht.current=a,yt.current=new An;const b=(ze,st,xt)=>{st/=100,xt/=100;const Xt=st*Math.min(xt,1-xt),_t=Ut=>{const Nt=(Ut+ze/30)%12;return xt-Xt*Math.max(Math.min(Nt-3,9-Nt,1),-1)};return(Math.round(_t(0)*255)<<16)+(Math.round(_t(8)*255)<<8)+Math.round(_t(4)*255)},R=b(S,52,68),w=b(S,52,45),J=b(S,52,78),K=b(S,40,35),te=b(S,60,55),ae=new Ht({color:R,transparent:!0,opacity:1}),p=new Ht({color:w,transparent:!0,opacity:.8}),x=new Ht({color:J,transparent:!0,opacity:.6}),G=new Ta({color:J,transparent:!0,opacity:.5,dashSize:3,gapSize:2}),B=new Ht({color:R,transparent:!0,opacity:1}),F=new Ht({color:J,transparent:!0,opacity:.85}),r=new Ht({color:K,transparent:!0,opacity:.6});new Le({color:te,transparent:!0,opacity:.9});const u=new Fe;h.add(u);const C=(ze,st,xt=64,Xt=p)=>{const _t=[];for(let Nt=0;Nt<=xt;Nt++){const nn=Nt/xt*Math.PI*2;_t.push(new g(Math.cos(nn)*ze,st,Math.sin(nn)*ze))}const Ut=new He().setFromPoints(_t);return new rt(Ut,Xt)},c=(ze,st,xt,Xt=1.5,_t=R)=>{const Ut=new Le({color:_t,transparent:!0,opacity:.7}),Nt=new en(Xt,8,8),nn=new De(Nt,Ut);return nn.position.set(ze,st,xt),nn},i=(ze,st,xt,Xt=3,_t=R)=>{const Ut=new Le({color:_t,wireframe:!0,transparent:!0,opacity:.6}),Nt=new Ao(Xt,Xt,Xt),nn=new De(Nt,Ut);return nn.position.set(ze,st,xt),nn},O=(ze,st=B,xt=50)=>{const _t=new Sn(ze).getPoints(xt),Ut=new He().setFromPoints(_t);return new rt(Ut,st)},ce=(ze,st)=>{ze.traverse(xt=>{xt.material&&(Array.isArray(xt.material)?xt.material.forEach(Xt=>{Xt.userData.baseOpacity===void 0&&(Xt.userData.baseOpacity=Xt.opacity),Xt.opacity=Xt.userData.baseOpacity*st}):(xt.material.userData.baseOpacity===void 0&&(xt.material.userData.baseOpacity=xt.material.opacity),xt.material.opacity=xt.material.userData.baseOpacity*st))})},M={seed:1,seedOrbits:0,plantStem:0,plantLeaves:0,plantBud:0,pyramidMain:0,pyramidRings:0,baseBox:0,baseDetails:0,rootCoilMain:0,rootCoilDetails:0,rootsTaproot:0,rootsBranches:0,rootsOrbits:0,fernsLeft:0,fernsRight:0,torusMain:0,torusFlower:0,torusCore:0,vortexFunnels:0,vortexLines:0,flowers:0,particles:0},s=new Fe;s.position.y=220,u.add(s);const D=new Fe;s.add(D);const E=new Pn(80,35,16,40),v=new De(E,new Le({color:w,wireframe:!0,transparent:!0,opacity:.4}));D.add(v);const U=new Pn(80,35,12,32),m=new De(U,new Le({color:J,wireframe:!0,transparent:!0,opacity:.25}));m.rotation.y=Math.PI/4,D.add(m);const y=new Pn(80,35,10,28),T=new De(y,new Le({color:R,wireframe:!0,transparent:!0,opacity:.2}));T.rotation.y=Math.PI/2,T.rotation.x=.3,D.add(T);for(let ze=1;ze<=5;ze++)D.add(C(ze*10,0,48,x));const L=new Fe;s.add(L);const q=new en(10,16,16),le=new De(q,new Le({color:te,wireframe:!0,transparent:!0,opacity:.65}));L.add(le);const $=new Ro(6,0),Pe=new De($,new Le({color:te,wireframe:!0,transparent:!0,opacity:.85}));L.add(Pe),L.add(c(0,0,0,2.5,te));const Je=new Fe;s.add(Je);const pt=8;for(let ze=0;ze<pt;ze++){const st=ze/pt*Math.PI*2,xt=50,Xt=[new g(0,0,0),new g(Math.cos(st)*xt*.5,Math.sin(st+.3)*8,Math.sin(st)*xt*.5),new g(Math.cos(st)*xt,0,Math.sin(st)*xt)];Je.add(O(Xt,r,20)),Je.add(c(Math.cos(st)*xt,0,Math.sin(st)*xt,1.5,R))}for(let ze=0;ze<pt;ze++){const st=ze/pt*Math.PI*2+Math.PI/pt,xt=30,Xt=[new g(0,0,0),new g(Math.cos(st)*xt,4,Math.sin(st)*xt)],_t=new He().setFromPoints(Xt);Je.add(new rt(_t,x)),Je.add(c(Math.cos(st)*xt,4,Math.sin(st)*xt,1,J))}const dt=new Fe;u.add(dt);const Mt=new Fe;dt.add(Mt);const _=(ze,st)=>{const xt=new Fe;xt.position.set(ze,st,0);const Xt=10,_t=4,Ut=40,Nt=70;for(let nn=0;nn<=Xt;nn++){const Jt=nn/Xt,Kt=_t+(Ut-_t)*Jt,En=-Nt/2+Nt*Jt;xt.add(C(Kt,En,24,p))}for(let nn=0;nn<12;nn++){const Jt=nn/12*Math.PI*2,Kt=[];for(let Dn=0;Dn<=Xt;Dn++){const Vt=Dn/Xt,Bn=_t+(Ut-_t)*Vt,Yn=-Nt/2+Nt*Vt;Kt.push(new g(Math.cos(Jt)*Bn,Yn,Math.sin(Jt)*Bn))}const En=new He().setFromPoints(Kt);xt.add(new rt(En,x))}return xt};Mt.add(_(-160,320)),Mt.add(_(160,320));const ye=new Fe;dt.add(ye),ye.add(O([new g(-160,355,0),new g(-130,280,20),new g(-90,240,10),new g(-60,220,0)],ae)),ye.add(O([new g(160,355,0),new g(130,280,-20),new g(90,240,-10),new g(60,220,0)],ae)),ye.add(i(-160,355,0,4)),ye.add(i(160,355,0,4)),ye.add(i(-60,220,0,4)),ye.add(i(60,220,0,4));const Re=new Fe;u.add(Re);const Ue=180,ft=100,wt=150,Pt=wt-Ue,qt=new Fe;Re.add(qt);const Ft=new _o(ft,Ue,4,1,!0),Wt=new De(Ft,new Le({color:R,wireframe:!0,transparent:!0,opacity:.6}));Wt.position.y=wt-Ue/2,Wt.rotation.y=Math.PI/4,qt.add(Wt);const be=wt,k=[];for(let ze=0;ze<4;ze++){const st=ze/4*Math.PI*2+Math.PI/4;k.push(new g(Math.cos(st)*ft,Pt,Math.sin(st)*ft))}for(const ze of k){const st=[new g(0,be,0),ze],xt=new He().setFromPoints(st);qt.add(new rt(xt,ae))}for(let ze=0;ze<4;ze++){const st=[k[ze],k[(ze+1)%4]],xt=new He().setFromPoints(st);qt.add(new rt(xt,ae))}qt.add(i(0,be,0,5));for(const ze of k)qt.add(i(ze.x,ze.y,ze.z,5));const j=[new g(0,be+30,0),new g(0,Pt-30,0)],l=new He().setFromPoints(j),W=new rt(l,G);W.computeLineDistances(),qt.add(W);const se=new Fe;Re.add(se);for(let ze=1;ze<=4;ze++){const st=ze/5,xt=wt-st*Ue,Xt=ft*st;se.add(C(Xt,xt,32,x))}const Te=new Fe;Te.position.y=wt-Ue*.55,Re.add(Te);const X=new Fe;Te.add(X);const de=new en(18,16,16),Se=new De(de,new Le({color:w,wireframe:!0,transparent:!0,opacity:.6}));X.add(Se);const Xe=new en(10,12,12),Qe=new De(Xe,new Le({color:R,wireframe:!0,transparent:!0,opacity:.5}));X.add(Qe),X.add(c(0,0,0,3,te));const $e=new Fe;Te.add($e);for(let ze=0;ze<3;ze++){const st=new Pn(28+ze*6,.3,4,48),xt=new De(st,new Le({color:J,wireframe:!0,transparent:!0,opacity:.45}));xt.rotation.x=Math.PI/2+(ze-1)*.4,xt.rotation.z=ze*.5,$e.add(xt)}for(let ze=0;ze<6;ze++){const st=ze/6*Math.PI*2;$e.add(c(Math.cos(st)*30,Math.sin(st)*12,Math.sin(st)*30,1.5,w))}const fe=new Fe;Re.add(fe);const it=Te.position.y,zt=be+15,lt=new Fe;fe.add(lt);const ot=new Sn([new g(0,it-10,0),new g(2,it+20,1),new g(-1,it+50,-1),new g(1,it+80,2),new g(-1,it+110,-1),new g(0,zt,0)]),kt=new zn(ot,40,1.2,6,!1),mt=new De(kt,new Le({color:R,wireframe:!0,transparent:!0,opacity:.65}));lt.add(mt);const me=ot.getPoints(50),Ge=new He().setFromPoints(me);lt.add(new rt(Ge,B));const Ke=(ze,st,xt,Xt,_t,Ut=1)=>{const Nt=new Fe;Nt.position.set(ze,st,xt),Nt.rotation.y=Xt,Nt.rotation.z=_t,Nt.scale.setScalar(Ut);const nn=new ka;nn.moveTo(0,0),nn.bezierCurveTo(8,5,20,4,30,0),nn.bezierCurveTo(20,-4,8,-5,0,0);const Jt=new cs(nn,8),Kt=new De(Jt,new Le({color:J,wireframe:!0,transparent:!0,opacity:.55,side:ro}));Nt.add(Kt);const En=[new g(0,0,0),new g(28,0,0)],Dn=new He().setFromPoints(En);Nt.add(new rt(Dn,B));for(let Vt=.2;Vt<.9;Vt+=.2){const Bn=30*Vt,Yn=Math.sin(Vt*Math.PI)*4;Nt.add(new rt(new He().setFromPoints([new g(Bn,0,0),new g(Bn+3,Yn,0)]),r)),Nt.add(new rt(new He().setFromPoints([new g(Bn,0,0),new g(Bn+3,-Yn,0)]),r))}return Nt},Ve=new Fe;fe.add(Ve);const It=[{y:it+25,rz:-.8,rz2:.8},{y:it+50,rz:-1,rz2:.6},{y:it+75,rz:-.7,rz2:.9},{y:it+100,rz:-1.1,rz2:.5}];for(let ze=0;ze<It.length;ze++){const st=It[ze],xt=1.2-ze*.15;Ve.add(Ke(2,st.y,2,ze*1.2,st.rz,xt)),Ve.add(Ke(-2,st.y,-2,ze*1.2+Math.PI,st.rz2,xt*.9))}const Yt=new Fe;fe.add(Yt);const Zt=new en(5,8,8),dn=new De(Zt,new Le({color:R,wireframe:!0,transparent:!0,opacity:.6}));dn.position.set(0,zt+2,0),dn.scale.set(1,1.4,1),Yt.add(dn),Yt.add(c(0,zt+8,0,2,te));const fn=new Fe;u.add(fn);const $n=130,Gn=50,qn=80,In=Pt-Gn/2,to=new Fe;fn.add(to);const vo=new Ao($n*2,Gn,qn*2),la=new De(vo,new Le({color:R,wireframe:!0,transparent:!0,opacity:.5}));la.position.y=In,to.add(la);const Kn=new Fe;fn.add(Kn);const Wn=$n,Vn=Gn/2,Hn=qn,Ka=[[-Wn,In+Vn,-Hn],[Wn,In+Vn,-Hn],[-Wn,In+Vn,Hn],[Wn,In+Vn,Hn],[-Wn,In-Vn,-Hn],[Wn,In-Vn,-Hn],[-Wn,In-Vn,Hn],[Wn,In-Vn,Hn]];for(const ze of Ka)Kn.add(i(ze[0],ze[1],ze[2],4));Kn.add(c(-Wn,In,0,2.5)),Kn.add(c(Wn,In,0,2.5)),Kn.add(c(0,In,-Hn,2.5)),Kn.add(c(0,In,Hn,2.5));const Mo=new Fe;Mo.position.y=In,fn.add(Mo);const uo=new Fe;Mo.add(uo);const ca=[],ua=6,Nn=200,Co=18;for(let ze=0;ze<=300;ze++){const st=ze/300,xt=-Nn/2+Nn*st,Xt=st*ua*Math.PI*2,_t=Math.sin(Xt)*Co,Ut=Math.cos(Xt)*Co;ca.push(new g(xt,_t,Ut))}uo.add(new rt(new He().setFromPoints(ca),p));const da=[];for(let ze=0;ze<=300;ze++){const st=ze/300,xt=-Nn/2+Nn*st,Xt=st*ua*Math.PI*2+Math.PI,_t=Math.sin(Xt)*Co*.7,Ut=Math.cos(Xt)*Co*.7;da.push(new g(xt,_t,Ut))}uo.add(new rt(new He().setFromPoints(da),x)),uo.add(O([new g(-Nn/2-20,0,0),new g(-Nn/4,3,5),new g(0,-2,-3),new g(Nn/4,4,4),new g(Nn/2+20,0,0)],B,40));const mo=new Fe;Mo.add(mo);const Za=new en(10,10,10),Wo=new De(Za,new Le({color:w,wireframe:!0,transparent:!0,opacity:.6}));Wo.position.set(-Nn/2-20,0,0),Wo.scale.set(1.3,1,1),mo.add(Wo),mo.add(Ke(-40,5,8,0,-.5,.5)),mo.add(Ke(30,-3,-6,Math.PI,.4,.4));const po=new Fe;po.position.y=In-Gn/2,u.add(po);const Po=new Fe;po.add(Po),Po.add(O([new g(0,0,0),new g(-2,-40,3),new g(1,-80,-2),new g(0,-120,0)],ae,30)),Po.add(c(0,-140,0,3,w));const Ho=new Fe;po.add(Ho);const no=(ze,st,xt,Xt,_t,Ut=0,Nt=4)=>{if(Ut>Nt)return;const nn=ze+Math.cos(_t)*Xt,Jt=st-Xt*.8,Kt=xt+Math.sin(_t)*Xt*.3,En=[new g(ze,st,xt),new g((ze+nn)/2+(Math.random()-.5)*10,(st+Jt)/2,(xt+Kt)/2+(Math.random()-.5)*10),new g(nn,Jt,Kt)],Dn=.8-Ut*.12,Vt=new Ht({color:w,transparent:!0,opacity:Math.max(.25,Dn)});Ho.add(O(En,Vt,15));const Bn=Ut<2?3:2;for(let Yn=0;Yn<Bn;Yn++){const go=_t+(Math.random()-.5)*1.5;no(nn,Jt,Kt,Xt*.6,go,Ut+1,Nt)}};no(-20,-15,-15,40,-.8,0,3),no(20,-15,15,40,.8,0,3),no(-10,-50,10,30,-1.2,0,2),no(10,-50,-10,30,1.2,0,2),no(0,-90,0,25,0,0,2);const fo=new Fe;po.add(fo);for(let ze=0;ze<3;ze++){const st=120+ze*50,xt=[];for(let Nt=0;Nt<=64;Nt++){const nn=Nt/64*Math.PI*2;xt.push(new g(Math.cos(nn)*st,-60-ze*15,Math.sin(nn)*st*.4))}const Xt=new He().setFromPoints(xt),_t=new Ta({color:J,transparent:!0,opacity:.4-ze*.08,dashSize:5,gapSize:4}),Ut=new rt(Xt,_t);Ut.computeLineDistances(),fo.add(Ut)}for(let ze=0;ze<8;ze++){const st=ze/8*Math.PI*2;fo.add(c(Math.cos(st)*170,-75,Math.sin(st)*68,2,J))}for(let ze=0;ze<6;ze++){const st=ze/6*Math.PI*2+.3;fo.add(i(Math.cos(st)*120,-60,Math.sin(st)*48,3.5,J))}const oo=(ze,st,xt,Xt,_t=1)=>{const Ut=new Fe;Ut.position.set(ze,st,xt),Ut.rotation.y=Xt,Ut.scale.setScalar(_t);const Nt=80,nn=[new g(0,0,0),new g(Nt*.3,Nt*.15,0),new g(Nt*.7,Nt*.35,0),new g(Nt,Nt*.3,0)];Ut.add(O(nn,B,30));for(let Jt=.1;Jt<.95;Jt+=.08){const Kt=Jt,En=Nt*Kt,Dn=Nt*.35*Math.sin(Kt*Math.PI*.8),Vt=Nt*.25*Math.sin(Kt*Math.PI);Ut.add(O([new g(En,Dn,0),new g(En+Vt*.5,Dn+Vt*.6,Vt*.2),new g(En+Vt,Dn+Vt*.2,0)],F,8)),Ut.add(O([new g(En,Dn,0),new g(En+Vt*.5,Dn-Vt*.4,-Vt*.2),new g(En+Vt,Dn-Vt*.1,0)],r,8))}return Ut},Yo=new Fe;u.add(Yo);const yo=new Fe;Yo.add(yo),yo.add(oo(-180,60,40,-.3,1)),yo.add(oo(-200,30,-30,-.8,.85)),yo.add(oo(-160,0,60,.2,.7));const wo=new Fe;Yo.add(wo),wo.add(oo(180,60,-40,Math.PI+.3,1)),wo.add(oo(200,30,30,Math.PI+.8,.85)),wo.add(oo(160,0,-60,Math.PI-.2,.7));const ma=(ze,st,xt,Xt=1)=>{const _t=new Fe;_t.position.set(ze,st,xt),_t.scale.setScalar(Xt);const Ut=6,Nt=20;for(let nn=0;nn<Ut;nn++){const Jt=nn/Ut*Math.PI*2,Kt=Math.cos(Jt)*Nt,En=Math.sin(Jt)*Nt;_t.add(O([new g(0,0,0),new g(Kt*.5,5,En*.5),new g(Kt,0,En)],r,10)),_t.add(c(Kt,0,En,1.5,R))}return _t.add(C(Nt,0,24,r)),_t.add(C(Nt*.5,0,16,F)),_t.add(c(0,0,0,2.5,te)),_t},To=new Fe;u.add(To),To.add(ma(-250,300,-60,1.2)),To.add(ma(250,300,60,1.2));const Oo=80,pa=new He,So=new Float32Array(Oo*3),Eo=[];for(let ze=0;ze<Oo;ze++)So[ze*3]=(Math.random()-.5)*400,So[ze*3+1]=(Math.random()-.5)*600+50,So[ze*3+2]=(Math.random()-.5)*400,Eo.push({x:(Math.random()-.5)*.1,y:(Math.random()-.5)*.15+.05,z:(Math.random()-.5)*.1});pa.setAttribute("position",new Cn(So,3));const fa=new kn({color:te,size:1.5,transparent:!0,opacity:.7}),$o=new Rn(pa,fa);u.add($o);let qo=0;const ya=1100;let No=1,Xo=0;const Qa=.04,es=.88;let wa,ga=!0,_n=0;const xa=()=>{if(!ga)return;wa=requestAnimationFrame(xa),_n+=.005;const ze=yt.current.getElapsedTime(),st=ue(ze);qo+=.001,f.position.x=Math.sin(qo)*ya,f.position.y=200,f.position.z=Math.cos(qo)*ya,f.lookAt(0,-100,0);const Xt=(.95+st*.1-No)*Qa;Xo=(Xo+Xt)*es,No+=Xo,u.scale.setScalar(No),v.rotation.y=_n*.3,m.rotation.y=-_n*.2+Math.PI/4,T.rotation.y=_n*.15+Math.PI/2,T.rotation.x=.3+Math.sin(_n)*.1,Pe.rotation.x=_n*.5,Pe.rotation.y=_n*.7,$e.children.forEach((Vt,Bn)=>{Vt.geometry&&Vt.geometry.type==="TorusGeometry"&&(Vt.rotation.z=_n*(.3+Bn*.12))});const _t=1+st*.1;le.scale.setScalar(_t);const Ut=$o.geometry.attributes.position.array;for(let Vt=0;Vt<Oo;Vt++)Ut[Vt*3]+=Eo[Vt].x,Ut[Vt*3+1]+=Eo[Vt].y,Ut[Vt*3+2]+=Eo[Vt].z,Ut[Vt*3+1]>400&&(Ut[Vt*3+1]=-200,Ut[Vt*3]=(Math.random()-.5)*400,Ut[Vt*3+2]=(Math.random()-.5)*400);$o.geometry.attributes.position.needsUpdate=!0;const Nt=50,nn=pn.current,Jt=Math.min(nn/Nt,1),Kt=(Vt,Bn)=>{const Yn=Bn+.06;if(Vt<Bn)return 0;if(Vt>Yn)return 1;const go=(Vt-Bn)/(Yn-Bn);return go*go*(3-2*go)},En={seed:1,rootsTaproot:Kt(Jt,.02),rootsBranches:Kt(Jt,.06),rootsOrbits:Kt(Jt,.1),rootCoilMain:Kt(Jt,.14),rootCoilDetails:Kt(Jt,.18),baseBox:Kt(Jt,.22),baseDetails:Kt(Jt,.26),seedOrbits:Kt(Jt,.3),plantStem:Kt(Jt,.34),plantLeaves:Kt(Jt,.38),plantBud:Kt(Jt,.42),pyramidMain:Kt(Jt,.46),pyramidRings:Kt(Jt,.5),fernsLeft:Kt(Jt,.54),fernsRight:Kt(Jt,.58),torusMain:Kt(Jt,.62),torusFlower:Kt(Jt,.66),torusCore:Kt(Jt,.7),vortexFunnels:Kt(Jt,.74),vortexLines:Kt(Jt,.78),flowers:Kt(Jt,.84),particles:Kt(Jt,.92)},Dn=.08;for(const Vt in M)M[Vt]+=(En[Vt]-M[Vt])*Dn;ce(X,M.seed),ce($e,M.seedOrbits),ce(Po,M.rootsTaproot),ce(Ho,M.rootsBranches),ce(fo,M.rootsOrbits),ce(uo,M.rootCoilMain),ce(mo,M.rootCoilDetails),ce(to,M.baseBox),ce(Kn,M.baseDetails),ce(lt,M.plantStem),ce(Ve,M.plantLeaves),ce(Yt,M.plantBud),ce(qt,M.pyramidMain),ce(se,M.pyramidRings),ce(yo,M.fernsLeft),ce(wo,M.fernsRight),ce(D,M.torusMain),ce(Je,M.torusFlower),ce(L,M.torusCore),ce(Mt,M.vortexFunnels),ce(ye,M.vortexLines),ce(To,M.flowers),fa.opacity=M.particles,a.render(h,f)};xa();const ba=()=>{f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",ba),()=>{ga=!1,window.removeEventListener("resize",ba),cancelAnimationFrame(wa),h.traverse(ze=>{ze.geometry&&ze.geometry.dispose(),ze.material&&(Array.isArray(ze.material)?ze.material.forEach(st=>st.dispose()):ze.material.dispose())}),ne.current&&ne.current.contains(a.domElement)&&ne.current.removeChild(a.domElement),a.dispose()}},[Z,S,ue]),et.useEffect(()=>{if(Z!=="corpusStellae"||!ne.current||typeof Tn>"u")return;d.current=[];const h=ne.current,f=h.clientWidth||window.innerWidth,a=h.clientHeight||window.innerHeight,b=new gn;bt.current=b,b.background=null,b.fog=new On(0,35e-5);const R=new xn(50,f/a,.1,2e3);R.position.set(0,80,500),R.lookAt(0,80,0);const w=new bn({antialias:!0,alpha:!0});w.setSize(f,a),w.setPixelRatio(Math.min(window.devicePixelRatio,2)),w.setClearColor(0,0),h.appendChild(w.domElement),w.domElement.style.pointerEvents="none",ht.current=w;const J=(k,j,l)=>{j/=100,l/=100;const W=j*Math.min(l,1-l),se=Te=>{const X=(Te+k/30)%12;return l-W*Math.max(Math.min(X-3,9-X,1),-1)};return(Math.round(se(0)*255)<<16)+(Math.round(se(8)*255)<<8)+Math.round(se(4)*255)},K=J(S,70,60),te=J(S,60,40),ae=J(S,52,78),p=J(S,40,25),x=J(S,60,55),G=new Ht({color:K,transparent:!0,opacity:.7}),B=new Ht({color:te,transparent:!0,opacity:.5}),F=new Ht({color:p,transparent:!0,opacity:.3}),r=new Ht({color:ae,transparent:!0,opacity:.6}),u=new Le({color:ae,transparent:!0,opacity:.8}),C=new Le({color:x,transparent:!0,opacity:.9}),c=new Fe;b.add(c);function i(k,j,l=64,W=B){const se=[];for(let Te=0;Te<=l;Te++){const X=Te/l*Math.PI*2;se.push(new g(Math.cos(X)*k,j,Math.sin(X)*k))}return new rt(new He().setFromPoints(se),W)}function O(k,j,l,W=1.5,se=u){const Te=new De(new en(W,8,8),se);return Te.position.set(k,j,l),Te}function ce(k,j,l,W=3,se=K){const Te=new Le({color:se,wireframe:!0,transparent:!0,opacity:.5}),X=new De(new Ao(W,W,W),Te);return X.position.set(k,j,l),X}function M(k,j=G,l=50){const se=new Sn(k).getPoints(l);return new rt(new He().setFromPoints(se),j)}const s=new Fe;s.position.y=280,c.add(s);for(let k=0;k<3;k++){const j=k/3*Math.PI*2,l=[];for(let W=0;W<=60;W++){const se=W/60,Te=5+se*90,X=j+se*Math.PI*3;l.push(new g(Math.cos(X)*Te,0,Math.sin(X)*Te))}s.add(new rt(new He().setFromPoints(l),G))}for(let k=1;k<=6;k++)s.add(i(k*15,0,48,F));const D=new De(new en(12,16,16),new Le({color:ae,wireframe:!0,transparent:!0,opacity:.3}));s.add(D);const E=new De(new Sa(7,0),new Le({color:ae,wireframe:!0,transparent:!0,opacity:.5}));s.add(E),s.add(O(0,0,0,3,C));for(let k=0;k<15;k++){const j=Math.random()*Math.PI*2,l=20+Math.random()*70;s.add(O(Math.cos(j)*l,0,Math.sin(j)*l,1,u))}const v=new Fe;c.add(v);const U=new Sn([new g(0,260,0),new g(1,220,1),new g(-1,180,-1),new g(0,140,0),new g(1,100,1),new g(-1,60,-1),new g(0,35,0)]),m=new De(new zn(U,60,2,6,!1),new Le({color:K,wireframe:!0,transparent:!0,opacity:.2}));v.add(m),v.add(new rt(new He().setFromPoints(U.getPoints(80)),r));for(let k=0;k<24;k++){const j=k/23,l=260-j*280,W=6+Math.sin(j*Math.PI)*4;v.add(i(W,l,12,F))}const y=[{y:260,r:14},{y:225,r:12},{y:195,r:11},{y:155,r:16},{y:115,r:13},{y:75,r:11},{y:35,r:12}],T=[];y.forEach((k,j)=>{const l=new Fe;l.position.y=k.y,c.add(l);const W=new De(new en(k.r,12,12),new Le({color:te,wireframe:!0,transparent:!0,opacity:.15}));l.add(W);const se=new De(new Jo(k.r*.45,0),new Le({color:ae,wireframe:!0,transparent:!0,opacity:.4}));l.add(se);const Te=4+j;for(let X=0;X<Te;X++){const de=X/Te*Math.PI*2,Se=k.r*1.2;l.add(M([new g(0,0,0),new g(Math.cos(de)*Se*.6,3,Math.sin(de)*Se*.6),new g(Math.cos(de)*Se,0,Math.sin(de)*Se)],F,12)),l.add(O(Math.cos(de)*Se,0,Math.sin(de)*Se,1,u))}l.add(i(k.r*1.4,0,32,F)),l.add(O(0,0,0,2,C)),T.push({group:l,outerSphere:W,octa:se})});const L=[];for(let k=0;k<=80;k++){const j=k/80,l=260-j*230,W=j*Math.PI*3.5,se=25+Math.sin(j*Math.PI)*10;L.push(new g(Math.cos(W)*se,l,Math.sin(W)*se))}c.add(new rt(new He().setFromPoints(L),B));const q=[];for(let k=0;k<=80;k++){const j=k/80,l=260-j*230,W=j*Math.PI*3.5+Math.PI,se=25+Math.sin(j*Math.PI)*10;q.push(new g(Math.cos(W)*se,l,Math.sin(W)*se))}c.add(new rt(new He().setFromPoints(q),B));const le=new Fe;le.position.y=155,c.add(le);for(let k=0;k<12;k++){const j=(k-5.5)/6,l=j*50,W=(1-Math.abs(j)*.6)*70,se=(1-Math.abs(j)*.5)*40,Te=[];for(let X=0;X<=32;X++){const de=X/32*Math.PI;Te.push(new g(Math.sin(de)*W,l,-Math.cos(de)*se+se*.3))}le.add(new rt(new He().setFromPoints(Te),k%3===0?G:F))}const $=new Fe;$.position.y=180,c.add($);function Pe(k){const j=k,l=[new g(j*15,0,0),new g(j*50,-10,10),new g(j*90,-30,5),new g(j*120,-15,0)];$.add(M(l,G,30));const W=new Sn(l);$.add(new De(new zn(W,20,1.5,5,!1),new Le({color:te,wireframe:!0,transparent:!0,opacity:.12}))),l.forEach(se=>$.add(O(se.x,se.y,se.z,2,u)));for(let se=0;se<5;se++){const Te=(se-2)*.25,X=15+(se===2?5:0),de=l[3],Se=new g(de.x+j*Math.cos(Te)*X,de.y+Math.sin(Te)*X*.5-5,de.z+Math.sin(Te+j)*5);$.add(new rt(new He().setFromPoints([de,Se]),F)),$.add(O(Se.x,Se.y,Se.z,.8,u))}}Pe(1),Pe(-1);const Je=new Fe;Je.position.y=20,c.add(Je);function pt(k){const j=k,l=[new g(j*12,0,0),new g(j*18,-60,5),new g(j*15,-120,3),new g(j*15,-170,0),new g(j*20,-180,8)];Je.add(M(l,G,30));const W=new Sn(l);Je.add(new De(new zn(W,25,2,5,!1),new Le({color:te,wireframe:!0,transparent:!0,opacity:.12}))),[0,2,3].forEach(se=>Je.add(O(l[se].x,l[se].y,l[se].z,2.5,u))),Je.add(i(6,-120,12,F).translateX(j*15).translateZ(3))}pt(1),pt(-1);const dt=new Fe;dt.position.y=130,c.add(dt);const Mt=new De(new Pn(200,.8,4,80),new Le({color:K,wireframe:!0,transparent:!0,opacity:.18}));Mt.rotation.x=Math.PI/2,dt.add(Mt);for(let k=0;k<8;k++){const j=k/8*Math.PI*2;dt.add(ce(Math.cos(j)*200,0,Math.sin(j)*200,4,K))}const _=new De(new en(250,10,10),new Le({color:p,wireframe:!0,transparent:!0,opacity:.06}));_.position.y=130,c.add(_);const ye=50,Re=new He,Ue=new Float32Array(ye*3),ft=[];for(let k=0;k<ye;k++)Ue[k*3]=(Math.random()-.5)*500,Ue[k*3+1]=(Math.random()-.5)*600+100,Ue[k*3+2]=(Math.random()-.5)*500,ft.push({x:(Math.random()-.5)*.08,y:(Math.random()-.5)*.12+.06,z:(Math.random()-.5)*.08});Re.setAttribute("position",new Cn(Ue,3));const wt=new Rn(Re,new kn({color:ae,size:1.5,transparent:!0,opacity:.35}));c.add(wt);let Pt=0,qt,Ft=0;function Wt(){if(qt=requestAnimationFrame(Wt),Pt+=.005,Ft++,Ft>30&&d.current.length>0){const l=d.current.find(W=>W.active)||d.current[0];if(l){const W=(l.x/window.innerWidth-.5)*2,se=(l.y/window.innerHeight-.5)*2;c.rotation.y+=W*.02,c.rotation.x+=se*.01}}else Ft>30&&(c.rotation.y+=.001);D.rotation.y=Pt*.3,E.rotation.x=Pt*.5,E.rotation.y=Pt*.7;const k=Math.sin(Pt*2);T.forEach((l,W)=>{l.octa.rotation.x=Pt*(.3+W*.08),l.octa.rotation.y=Pt*(.2+W*.1),l.outerSphere.scale.setScalar(1+k*.08)}),_.rotation.y=Pt*.05;const j=wt.geometry.attributes.position.array;for(let l=0;l<ye;l++)j[l*3]+=ft[l].x,j[l*3+1]+=ft[l].y,j[l*3+2]+=ft[l].z,j[l*3+1]>450&&(j[l*3+1]=-150,j[l*3]=(Math.random()-.5)*500,j[l*3+2]=(Math.random()-.5)*500);wt.geometry.attributes.position.needsUpdate=!0,w.render(b,R)}Wt();const be=()=>{const k=h.clientWidth||window.innerWidth,j=h.clientHeight||window.innerHeight;R.aspect=k/j,R.updateProjectionMatrix(),w.setSize(k,j)};return window.addEventListener("resize",be),()=>{cancelAnimationFrame(qt),window.removeEventListener("resize",be),b.traverse(k=>{k.geometry&&k.geometry.dispose(),k.material&&(Array.isArray(k.material)?k.material.forEach(j=>j.dispose()):k.material.dispose())}),w.dispose(),h.contains(w.domElement)&&h.removeChild(w.domElement)}},[Z,S]),et.useEffect(()=>{if(Z!=="machinaTemporis"||!ne.current||typeof Tn>"u")return;d.current=[];const h=ne.current,f=h.clientWidth||window.innerWidth,a=h.clientHeight||window.innerHeight,b=new gn;bt.current=b,b.background=null,b.fog=new On(0,4e-4);const R=new xn(50,f/a,.1,2e3);R.position.set(0,60,500),R.lookAt(0,40,0);const w=new bn({antialias:!0,alpha:!0});w.setSize(f,a),w.setPixelRatio(Math.min(window.devicePixelRatio,2)),w.setClearColor(0,0),h.appendChild(w.domElement),w.domElement.style.pointerEvents="none",ht.current=w;const J=(ot,kt,mt)=>{kt/=100,mt/=100;const me=kt*Math.min(mt,1-mt),Ge=Ke=>{const Ve=(Ke+ot/30)%12;return mt-me*Math.max(Math.min(Ve-3,9-Ve,1),-1)};return(Math.round(Ge(0)*255)<<16)+(Math.round(Ge(8)*255)<<8)+Math.round(Ge(4)*255)},K=J(S,70,60),te=J(S,60,40),ae=J(S,52,78),p=J(S,40,25),x=J(S,60,55),G=new Ht({color:K,transparent:!0,opacity:.7}),B=new Ht({color:te,transparent:!0,opacity:.5}),F=new Ht({color:p,transparent:!0,opacity:.3}),r=new Ht({color:ae,transparent:!0,opacity:.6}),u=new Le({color:ae,transparent:!0,opacity:.8}),C=new Le({color:x,transparent:!0,opacity:.9}),c=new Fe;b.add(c);function i(ot,kt,mt=64,me=B){const Ge=[];for(let Ke=0;Ke<=mt;Ke++){const Ve=Ke/mt*Math.PI*2;Ge.push(new g(Math.cos(Ve)*ot,kt,Math.sin(Ve)*ot))}return new rt(new He().setFromPoints(Ge),me)}function O(ot,kt,mt,me=1.5,Ge=u){const Ke=new De(new en(me,8,8),Ge);return Ke.position.set(ot,kt,mt),Ke}function ce(ot,kt,mt,me=3,Ge=K){const Ke=new Le({color:Ge,wireframe:!0,transparent:!0,opacity:.5}),Ve=new De(new Ao(me,me,me),Ke);return Ve.position.set(ot,kt,mt),Ve}const M=new Fe;M.position.y=120,c.add(M);const s=[{r:100,tiltX:0,tiltZ:0},{r:100,tiltX:Math.PI/6,tiltZ:.3},{r:100,tiltX:-Math.PI/4,tiltZ:-.2},{r:95,tiltX:Math.PI/3,tiltZ:.5},{r:90,tiltX:-Math.PI/6,tiltZ:.8},{r:85,tiltX:Math.PI/2.5,tiltZ:-.4}],D=[];s.forEach((ot,kt)=>{const mt=new De(new Pn(ot.r,kt===0?1.2:.8,6,64),new Le({color:p,wireframe:!0,transparent:!0,opacity:.2}));mt.rotation.x=ot.tiltX,mt.rotation.z=ot.tiltZ,M.add(mt),D.push(mt)});const E=new De(new Pn(105,3,4,64),new Le({color:K,wireframe:!0,transparent:!0,opacity:.15}));E.rotation.x=.1,M.add(E);for(let ot=0;ot<12;ot++){const kt=ot/12*Math.PI*2;M.add(ce(Math.cos(kt)*108,0,Math.sin(kt)*108,4,ot%3===0?ae:K))}const v=new Un(1,1,220,6);M.add(new De(v,new Le({color:ae,wireframe:!0,transparent:!0,opacity:.2})));const U=new De(new en(15,14,14),new Le({color:te,wireframe:!0,transparent:!0,opacity:.2}));M.add(U);const m=new De(new Ro(8,0),new Le({color:ae,wireframe:!0,transparent:!0,opacity:.45}));M.add(m),M.add(O(0,0,0,3,C));const y=[];[{r:35,speed:1.2,size:3},{r:55,speed:.7,size:4},{r:75,speed:.4,size:3.5}].forEach(ot=>{M.add(i(ot.r,0,48,F));const kt=O(ot.r,0,0,ot.size,u);M.add(kt),y.push({mesh:kt,r:ot.r,speed:ot.speed,angle:Math.random()*Math.PI*2})});function L(ot,kt,mt,me,Ge,Ke=G){const Ve=new Fe;Ve.position.set(ot,kt,mt),Ve.add(i(me,0,48,Ke)),Ve.add(i(me*.4,0,24,F));for(let It=0;It<6;It++){const Yt=It/6*Math.PI*2,Zt=[new g(Math.cos(Yt)*me*.4,0,Math.sin(Yt)*me*.4),new g(Math.cos(Yt)*me,0,Math.sin(Yt)*me)];Ve.add(new rt(new He().setFromPoints(Zt),F))}for(let It=0;It<Ge;It++){const Yt=It/Ge*Math.PI*2,Zt=me,dn=me+4,fn=[new g(Math.cos(Yt-.04)*Zt,0,Math.sin(Yt-.04)*Zt),new g(Math.cos(Yt-.02)*dn,0,Math.sin(Yt-.02)*dn),new g(Math.cos(Yt+.02)*dn,0,Math.sin(Yt+.02)*dn),new g(Math.cos(Yt+.04)*Zt,0,Math.sin(Yt+.04)*Zt)];Ve.add(new rt(new He().setFromPoints(fn),Ke))}return Ve.add(O(0,0,0,2,u)),Ve}const q=new Fe;q.position.set(-180,120,0),c.add(q);const le=L(0,0,0,40,20,G),$=L(0,-70,0,28,14,B),Pe=L(0,-120,0,18,10,F);q.add(le,$,Pe);const Je=new Fe;Je.position.set(180,120,0),c.add(Je);const pt=L(0,0,0,35,18,G),dt=L(0,-60,0,25,12,B),Mt=L(0,-105,0,20,10,F),_=L(0,-140,0,14,8,F);Je.add(pt,dt,Mt,_);const ye=new Fe;ye.position.y=-80,c.add(ye);const Re=80,Ue=40,ft=5;function wt(ot){const kt=[];for(let mt=0;mt<=30;mt++){const me=mt/30,Ge=ft+(Ue-ft)*Math.pow(me,.7);kt.push(new cn(Ge,me*Re*ot))}return new De(new Ea(kt,16),new Le({color:K,wireframe:!0,transparent:!0,opacity:.15}))}ye.add(wt(1)),ye.add(wt(-1)),ye.add(i(ft,0,16,r)),ye.add(O(0,0,0,2,C));const Pt=60,qt=new He,Ft=new Float32Array(Pt*3),Wt=[];for(let ot=0;ot<Pt;ot++){const kt=Math.random()*Math.PI*2,mt=Math.random()*3;Ft[ot*3]=Math.cos(kt)*mt,Ft[ot*3+1]=Math.random()*Re*.8,Ft[ot*3+2]=Math.sin(kt)*mt,Wt.push({speed:.3+Math.random()*.5})}qt.setAttribute("position",new Cn(Ft,3));const be=new Rn(qt,new kn({color:ae,size:1.2,transparent:!0,opacity:.6}));ye.add(be);const k=new Fe;k.position.y=-180,c.add(k),k.add(O(0,50,0,3,u)),k.add(new rt(new He().setFromPoints([new g(0,50,0),new g(0,-50,0)]),G));const j=new De(new Un(15,15,3,16),new Le({color:te,wireframe:!0,transparent:!0,opacity:.25}));j.position.y=-50,k.add(j),k.add(O(0,-50,0,2.5,C));function l(ot,kt,mt,me,Ge){const Ke=new Fe;Ke.position.set(ot,kt,mt),Ke.add(i(me,0,64,G)),Ke.add(i(me*.85,0,48,B));for(let It=0;It<Ge;It++){const Yt=It/Ge*Math.PI*2,Zt=It%(Ge/4)===0?me*.7:me*.82,dn=[new g(Math.cos(Yt)*Zt,0,Math.sin(Yt)*Zt),new g(Math.cos(Yt)*me,0,Math.sin(Yt)*me)];Ke.add(new rt(new He().setFromPoints(dn),It%(Ge/4)===0?r:F))}const Ve=new rt(new He().setFromPoints([new g(0,0,0),new g(0,0,me*.75)]),r);return Ke.add(Ve),Ke.userData.hand=Ve,Ke.add(O(0,0,0,2.5,C)),Ke}const W=l(-200,280,0,45,24),se=l(200,280,0,35,60),Te=l(0,-300,0,50,12);c.add(W,se,Te);const X=80,de=new He,Se=new Float32Array(X*3),Xe=[];for(let ot=0;ot<X;ot++)Se[ot*3]=(Math.random()-.5)*400,Se[ot*3+1]=(Math.random()-.5)*700+50,Se[ot*3+2]=(Math.random()-.5)*400,Xe.push({x:(Math.random()-.5)*.08,y:(Math.random()-.5)*.1+.04,z:(Math.random()-.5)*.08});de.setAttribute("position",new Cn(Se,3));const Qe=new Rn(de,new kn({color:ae,size:1.5,transparent:!0,opacity:.35}));c.add(Qe);let $e=0,fe,it=0;function zt(){if(fe=requestAnimationFrame(zt),$e+=.005,it++,it>30&&d.current.length>0){const mt=d.current.find(me=>me.active)||d.current[0];if(mt){const me=(mt.x/window.innerWidth-.5)*2,Ge=(mt.y/window.innerHeight-.5)*2;c.rotation.y+=me*.02,c.rotation.x+=Ge*.01}}else it>30&&(c.rotation.y+=.001);D.forEach((mt,me)=>mt.rotation.y+=.001*(1+me*.3)*(me%2===0?1:-1)),E.rotation.y+=5e-4,m.rotation.x=$e*.5,m.rotation.y=$e*.7,U.scale.setScalar(1+Math.sin($e*2)*.08),y.forEach(mt=>{mt.angle+=mt.speed*.003,mt.mesh.position.x=Math.cos(mt.angle)*mt.r,mt.mesh.position.z=Math.sin(mt.angle)*mt.r}),le.rotation.y=$e*.4,$.rotation.y=-$e*.57,Pe.rotation.y=$e*.8,pt.rotation.y=-$e*.35,dt.rotation.y=$e*.5,Mt.rotation.y=-$e*.7,_.rotation.y=$e*1,W.userData.hand.rotation.y=$e*.1,se.userData.hand.rotation.y=$e*1.2,Te.userData.hand.rotation.y=$e*.008,k.rotation.z=Math.sin($e*1.5)*.25;const ot=be.geometry.attributes.position.array;for(let mt=0;mt<Pt;mt++)if(ot[mt*3+1]-=Wt[mt].speed*.3,ot[mt*3+1]<-Re*.7){ot[mt*3+1]=Re*.6;const me=Math.random()*Math.PI*2,Ge=Math.random()*3;ot[mt*3]=Math.cos(me)*Ge,ot[mt*3+2]=Math.sin(me)*Ge}be.geometry.attributes.position.needsUpdate=!0;const kt=Qe.geometry.attributes.position.array;for(let mt=0;mt<X;mt++)kt[mt*3]+=Xe[mt].x,kt[mt*3+1]+=Xe[mt].y,kt[mt*3+2]+=Xe[mt].z,kt[mt*3+1]>400&&(kt[mt*3+1]=-250,kt[mt*3]=(Math.random()-.5)*400,kt[mt*3+2]=(Math.random()-.5)*400);Qe.geometry.attributes.position.needsUpdate=!0,w.render(b,R)}zt();const lt=()=>{const ot=h.clientWidth||window.innerWidth,kt=h.clientHeight||window.innerHeight;R.aspect=ot/kt,R.updateProjectionMatrix(),w.setSize(ot,kt)};return window.addEventListener("resize",lt),()=>{cancelAnimationFrame(fe),window.removeEventListener("resize",lt),b.traverse(ot=>{ot.geometry&&ot.geometry.dispose(),ot.material&&(Array.isArray(ot.material)?ot.material.forEach(kt=>kt.dispose()):ot.material.dispose())}),w.dispose(),h.contains(w.domElement)&&h.removeChild(w.domElement)}},[Z,S]),et.useEffect(()=>{if(Z!=="oceanusProfundus"||!ne.current||typeof Tn>"u")return;d.current=[];const h=ne.current,f=h.clientWidth||window.innerWidth,a=h.clientHeight||window.innerHeight,b=new gn;bt.current=b,b.background=null,b.fog=new On(517,3e-4);const R=new xn(50,f/a,.1,2e3);R.position.set(0,60,500),R.lookAt(0,20,0);const w=new bn({antialias:!0,alpha:!0});w.setSize(f,a),w.setPixelRatio(Math.min(window.devicePixelRatio,2)),w.setClearColor(0,0),h.appendChild(w.domElement),w.domElement.style.pointerEvents="none",ht.current=w;const J=(be,k,j)=>{k/=100,j/=100;const l=k*Math.min(j,1-j),W=se=>{const Te=(se+be/30)%12;return j-l*Math.max(Math.min(Te-3,9-Te,1),-1)};return(Math.round(W(0)*255)<<16)+(Math.round(W(8)*255)<<8)+Math.round(W(4)*255)},K=J(S,70,60),te=J(S,60,40),ae=J(S,52,78),p=J(S,40,25),x=J(S,60,55),G=new Ht({color:K,transparent:!0,opacity:.7}),B=new Ht({color:te,transparent:!0,opacity:.5}),F=new Ht({color:p,transparent:!0,opacity:.3}),r=new Ht({color:ae,transparent:!0,opacity:.6}),u=new Le({color:ae,transparent:!0,opacity:.8}),C=new Le({color:x,transparent:!0,opacity:.9}),c=new Fe;b.add(c);function i(be,k,j=64,l=B){const W=[];for(let se=0;se<=j;se++){const Te=se/j*Math.PI*2;W.push(new g(Math.cos(Te)*be,k,Math.sin(Te)*be))}return new rt(new He().setFromPoints(W),l)}function O(be,k,j,l=1.5,W=u){const se=new De(new en(l,8,8),W);return se.position.set(be,k,j),se}function ce(be,k=G,j=50){const l=new Sn(be);return new rt(new He().setFromPoints(l.getPoints(j)),k)}let M=42;function s(){return M=M*16807%2147483647,(M-1)/2147483646}const D=new Fe;D.position.y=180,c.add(D);for(let be=0;be<4;be++){const k=70-be*8,j=new De(new en(k,16-be*2,12,0,Math.PI*2,0,Math.PI*.6),new Le({color:be===0?K:be===1?te:p,wireframe:!0,transparent:!0,opacity:.15-be*.03}));D.add(j)}for(let be=0;be<12;be++){const k=be/12*Math.PI*2,j=[];for(let l=0;l<=20;l++){const se=l/20*Math.PI*.6,Te=70;j.push(new g(Math.sin(se)*Math.cos(k)*Te,Math.cos(se)*Te,Math.sin(se)*Math.sin(k)*Te))}D.add(new rt(new He().setFromPoints(j),B))}for(let be=1;be<=5;be++){const k=be/8*Math.PI*.6,j=Math.sin(k)*70,l=Math.cos(k)*70;D.add(i(j,l,32,F))}for(let be=0;be<8;be++){const k=be/8*Math.PI*2,j=40;D.add(ce([new g(0,50,0),new g(Math.cos(k)*j*.4,30,Math.sin(k)*j*.4),new g(Math.cos(k)*j,5,Math.sin(k)*j)],F,15)),D.add(O(Math.cos(k)*j,5,Math.sin(k)*j,2,u))}const E=new De(new en(10,12,12),new Le({color:ae,wireframe:!0,transparent:!0,opacity:.3}));E.position.y=40,D.add(E),D.add(O(0,40,0,3,C));for(let be=0;be<16;be++){const k=be/16*Math.PI*2,j=55+s()*15,l=120+s()*80,W=[];for(let se=0;se<=8;se++){const Te=se/8;W.push(new g(Math.cos(k)*j*(1-Te*.3)+s()*15*Te,-Te*l,Math.sin(k)*j*(1-Te*.3)+s()*15*Te))}D.add(ce(W,be%3===0?G:B,20))}for(let be=0;be<4;be++){const k=be/4*Math.PI*2+Math.PI/8,j=[];for(let l=0;l<=12;l++){const W=l/12,se=Math.sin(W*Math.PI*4)*15*W;j.push(new g(Math.cos(k)*(30+se)*(1-W*.2),-W*150,Math.sin(k)*(30+se)*(1-W*.2)))}D.add(ce(j,r,30))}const v=new Fe;v.position.set(-200,60,0),c.add(v);const U=[];for(let be=0;be<=300;be++){const k=be/300,j=k*Math.PI*5,l=Math.pow(1.618,k*3)*3;U.push(new g(Math.cos(j)*l,Math.sin(j)*l,0))}v.add(new rt(new He().setFromPoints(U),G)),v.add(O(0,0,0,2.5,C));const m=new Fe;m.position.y=-120,c.add(m);const y=300,T=15;for(let be=-T/2;be<=T/2;be++){const k=be/(T/2)*y;m.add(new rt(new He().setFromPoints([new g(k,0,-y),new g(k,0,y)]),new Ht({color:p,transparent:!0,opacity:.1}))),m.add(new rt(new He().setFromPoints([new g(-y,0,k),new g(y,0,k)]),new Ht({color:p,transparent:!0,opacity:.1})))}function L(be,k,j,l=0,W=3){if(l>W)return;const se=(s()-.5)*10;m.add(ce([new g(be,0,k),new g(be+se*.5,j*.5,k+se*.3),new g(be+se,j,k+se*.5)],l===0?G:B,10)),m.add(O(be+se,j,k+se*.5,1.5-l*.3,u));const Te=l<1?3:2;for(let X=0;X<Te;X++){const de=s()*Math.PI*2;L(be+se+Math.cos(de)*8,k+se*.5+Math.sin(de)*8,j*.6,l+1,W)}}L(-100,-40,50,0,3),L(-60,30,40,0,2),L(80,-30,55,0,3),L(120,20,35,0,2);const q=new Fe;q.position.y=100,c.add(q);const le=[];for(let be=0;be<3;be++){const k=be/3*Math.PI*2,j=140+be*20,l=20-be*30;for(let W=0;W<8;W++){const se={x:(s()-.5)*30,y:(s()-.5)*15,z:(s()-.5)*30},Te=new De(new Jo(3+s()*2,0),new Le({color:K,wireframe:!0,transparent:!0,opacity:.35}));Te.scale.set(2,.8,.6),q.add(Te),le.push({mesh:Te,baseAngle:k,radius:j,baseY:l,offset:se,speed:.2+s()*.15,phase:s()*Math.PI*2})}}const $=new Fe;$.position.y=-120,c.add($);const Pe=[{x:-180,z:-60},{x:170,z:70},{x:-20,z:-100}],Je=[];Pe.forEach(be=>{const k=[new cn(8,0),new cn(6,15),new cn(5,30),new cn(4,45),new cn(3.5,55)],j=new De(new Ea(k,8),new Le({color:te,wireframe:!0,transparent:!0,opacity:.2}));j.position.set(be.x,0,be.z),$.add(j),$.add(O(be.x,55,be.z,2,C));for(let l=0;l<20;l++)Je.push({x:be.x,z:be.z,y:Math.random()*100+55,speed:.3+Math.random()*.5,drift:(Math.random()-.5)*.2,driftZ:(Math.random()-.5)*.2})});const pt=new He,dt=new Float32Array(Je.length*3);Je.forEach((be,k)=>{dt[k*3]=be.x+(Math.random()-.5)*5,dt[k*3+1]=be.y,dt[k*3+2]=be.z+(Math.random()-.5)*5}),pt.setAttribute("position",new Cn(dt,3));const Mt=new Rn(pt,new kn({color:ae,size:2,transparent:!0,opacity:.5}));$.add(Mt);const _=120,ye=new He,Re=new Float32Array(_*3),Ue=[];for(let be=0;be<_;be++)Re[be*3]=(Math.random()-.5)*500,Re[be*3+1]=(Math.random()-.5)*600+50,Re[be*3+2]=(Math.random()-.5)*500,Ue.push({x:(Math.random()-.5)*.06,y:-(.03+Math.random()*.08),z:(Math.random()-.5)*.06});ye.setAttribute("position",new Cn(Re,3));const ft=new Rn(ye,new kn({color:ae,size:1.2,transparent:!0,opacity:.3}));c.add(ft);let wt=0,Pt,qt=0;function Ft(){if(Pt=requestAnimationFrame(Ft),wt+=.005,qt++,qt>30&&d.current.length>0){const l=d.current.find(W=>W.active)||d.current[0];if(l){const W=(l.x/window.innerWidth-.5)*2,se=(l.y/window.innerHeight-.5)*2;c.rotation.y+=W*.02,c.rotation.x+=se*.01}}else qt>30&&(c.rotation.y+=.001);const be=1+Math.sin(wt*1.5)*.06;D.children.forEach(l=>{l.geometry&&l.geometry.type==="SphereGeometry"&&l!==E&&l.scale.set(be,1,be)}),E.rotation.y=wt*.5,E.scale.setScalar(1+Math.sin(wt*2)*.1),le.forEach(l=>{l.baseAngle+=l.speed*.003;const W=Math.cos(l.baseAngle+l.phase)*l.radius+l.offset.x,se=l.baseY+Math.sin(wt*2+l.phase)*5+l.offset.y,Te=Math.sin(l.baseAngle+l.phase)*l.radius*.6+l.offset.z;l.mesh.position.set(W,se,Te),l.mesh.rotation.y=l.baseAngle+l.phase+Math.PI/2});const k=Mt.geometry.attributes.position.array;Je.forEach((l,W)=>{k[W*3]+=l.drift,k[W*3+1]+=l.speed,k[W*3+2]+=l.driftZ,k[W*3+1]>200&&(k[W*3]=l.x+(Math.random()-.5)*5,k[W*3+1]=55,k[W*3+2]=l.z+(Math.random()-.5)*5)}),Mt.geometry.attributes.position.needsUpdate=!0;const j=ft.geometry.attributes.position.array;for(let l=0;l<_;l++)j[l*3]+=Ue[l].x+Math.sin(wt+l)*.02,j[l*3+1]+=Ue[l].y,j[l*3+2]+=Ue[l].z,j[l*3+1]<-300&&(j[l*3+1]=350,j[l*3]=(Math.random()-.5)*500,j[l*3+2]=(Math.random()-.5)*500);ft.geometry.attributes.position.needsUpdate=!0,w.render(b,R)}Ft();const Wt=()=>{const be=h.clientWidth||window.innerWidth,k=h.clientHeight||window.innerHeight;R.aspect=be/k,R.updateProjectionMatrix(),w.setSize(be,k)};return window.addEventListener("resize",Wt),()=>{cancelAnimationFrame(Pt),window.removeEventListener("resize",Wt),b.traverse(be=>{be.geometry&&be.geometry.dispose(),be.material&&(Array.isArray(be.material)?be.material.forEach(k=>k.dispose()):be.material.dispose())}),w.dispose(),h.contains(w.domElement)&&h.removeChild(w.domElement)}},[Z,S]),et.useEffect(()=>{if(Z!=="arborMundi"||!ne.current||typeof Tn>"u")return;d.current=[];const h=ne.current,f=h.clientWidth||window.innerWidth,a=h.clientHeight||window.innerHeight,b=new gn;bt.current=b,b.background=null,b.fog=new On(0,35e-5);const R=new xn(50,f/a,.1,2e3);R.position.set(0,100,550),R.lookAt(0,80,0);const w=new bn({antialias:!0,alpha:!0});w.setSize(f,a),w.setPixelRatio(Math.min(window.devicePixelRatio,2)),w.setClearColor(0,0),h.appendChild(w.domElement),w.domElement.style.pointerEvents="none",ht.current=w;const J=(_,ye,Re)=>{ye/=100,Re/=100;const Ue=ye*Math.min(Re,1-Re),ft=wt=>{const Pt=(wt+_/30)%12;return Re-Ue*Math.max(Math.min(Pt-3,9-Pt,1),-1)};return(Math.round(ft(0)*255)<<16)+(Math.round(ft(8)*255)<<8)+Math.round(ft(4)*255)},K=J(S,70,60),te=J(S,60,40),ae=J(S,52,78),p=J(S,40,25),x=J(S,60,55),G=new Ht({color:K,transparent:!0,opacity:.7}),B=new Ht({color:te,transparent:!0,opacity:.5}),F=new Ht({color:p,transparent:!0,opacity:.3}),r=new Ht({color:ae,transparent:!0,opacity:.6}),u=new Le({color:ae,transparent:!0,opacity:.8}),C=new Le({color:x,transparent:!0,opacity:.9}),c=new Fe;b.add(c);let i=123;function O(){return i=i*16807%2147483647,(i-1)/2147483646}function ce(_,ye,Re=64,Ue=B){const ft=[];for(let wt=0;wt<=Re;wt++){const Pt=wt/Re*Math.PI*2;ft.push(new g(Math.cos(Pt)*_,ye,Math.sin(Pt)*_))}return new rt(new He().setFromPoints(ft),Ue)}function M(_,ye,Re,Ue=1.5,ft=u){const wt=new De(new en(Ue,8,8),ft);return wt.position.set(_,ye,Re),wt}function s(_,ye=G,Re=50){const Ue=new Sn(_);return new rt(new He().setFromPoints(Ue.getPoints(Re)),ye)}c.add(ce(200,-100,64,F)),c.add(ce(220,0,64,B)),c.add(ce(180,280,64,F));const D=new Fe;c.add(D);const E=new Sn([new g(0,-80,0),new g(3,-40,2),new g(-2,0,-3),new g(4,50,2),new g(-3,100,-2),new g(2,150,3),new g(0,200,0)]);for(let _=0;_<3;_++){const ye=25-_*5;D.add(new De(new zn(E,40,ye,12,!1),new Le({color:_===0?K:_===1?te:p,wireframe:!0,transparent:!0,opacity:.12-_*.03})))}D.add(new rt(new He().setFromPoints(E.getPoints(60)),r));for(let _=1;_<=8;_++)D.add(ce(_*3,-80,24,_%2===0?B:F));D.add(M(0,-80,0,3,C));const v=new Fe;v.position.y=180,c.add(v);function U(_,ye,Re,Ue,ft,wt,Pt=0,qt=4){if(Pt>qt)return;const Ft=_+Math.cos(ft)*Math.cos(wt)*Ue,Wt=ye+Math.sin(wt)*Ue,be=Re+Math.sin(ft)*Math.cos(wt)*Ue,k=(_+Ft)/2+(O()-.5)*Ue*.2,j=(ye+Wt)/2+O()*Ue*.1,l=(Re+be)/2+(O()-.5)*Ue*.2,W=.5-Pt*.1,se=new Ht({color:Pt<2?K:te,transparent:!0,opacity:Math.max(.1,W)});v.add(s([new g(_,ye,Re),new g(k,j,l),new g(Ft,Wt,be)],se,12)),Pt<qt&&v.add(M(Ft,Wt,be,1.5-Pt*.2,u));const Te=Pt<2?3:2;for(let X=0;X<Te;X++)U(Ft,Wt,be,Ue*.65,ft+(O()-.5)*1.2,wt*.7+(O()-.3)*.4,Pt+1,qt)}for(let _=0;_<8;_++)U(0,20,0,50,_/8*Math.PI*2,.5+O()*.3,0,4);const m=new Fe;m.position.y=350,c.add(m);const y=new De(new en(20,16,16),new Le({color:ae,wireframe:!0,transparent:!0,opacity:.25}));m.add(y),m.add(M(0,0,0,4,C));const T=100,L=new He,q=new Float32Array(T*3),le=[];for(let _=0;_<T;_++){const ye=O()*Math.PI*2,Re=30+O()*120;q[_*3]=Math.cos(ye)*Re,q[_*3+1]=200+O()*150,q[_*3+2]=Math.sin(ye)*Re,le.push({x:(O()-.5)*.15,y:-(.05+O()*.1),z:(O()-.5)*.15,phase:O()*Math.PI*2})}L.setAttribute("position",new Cn(q,3));const $=new Rn(L,new kn({color:ae,size:2,transparent:!0,opacity:.5}));c.add($);let Pe=0,Je,pt=0;function dt(){if(Je=requestAnimationFrame(dt),Pe+=.005,pt++,pt>30&&d.current.length>0){const ye=d.current.find(Re=>Re.active)||d.current[0];if(ye){const Re=(ye.x/window.innerWidth-.5)*2,Ue=(ye.y/window.innerHeight-.5)*2;c.rotation.y+=Re*.02,c.rotation.x+=Ue*.01}}else pt>30&&(c.rotation.y+=.001);y.scale.setScalar(1+Math.sin(Pe*2)*.08);const _=$.geometry.attributes.position.array;for(let ye=0;ye<T;ye++)if(_[ye*3]+=le[ye].x+Math.sin(Pe*2+le[ye].phase)*.1,_[ye*3+1]+=le[ye].y,_[ye*3+2]+=le[ye].z,_[ye*3+1]<-100){_[ye*3+1]=350;const Re=O()*Math.PI*2,Ue=30+O()*100;_[ye*3]=Math.cos(Re)*Ue,_[ye*3+2]=Math.sin(Re)*Ue}$.geometry.attributes.position.needsUpdate=!0,w.render(b,R)}dt();const Mt=()=>{R.aspect=(h.clientWidth||window.innerWidth)/(h.clientHeight||window.innerHeight),R.updateProjectionMatrix(),w.setSize(h.clientWidth||window.innerWidth,h.clientHeight||window.innerHeight)};return window.addEventListener("resize",Mt),()=>{cancelAnimationFrame(Je),window.removeEventListener("resize",Mt),b.traverse(_=>{_.geometry&&_.geometry.dispose(),_.material&&(Array.isArray(_.material)?_.material.forEach(ye=>ye.dispose()):_.material.dispose())}),w.dispose(),h.contains(w.domElement)&&h.removeChild(w.domElement)}},[Z,S]),et.useEffect(()=>{if(Z!=="portaDimensionum"||!ne.current||typeof Tn>"u")return;d.current=[];const h=ne.current,f=h.clientWidth||window.innerWidth,a=h.clientHeight||window.innerHeight,b=new gn;bt.current=b,b.background=null,b.fog=new On(0,2e-4);const R=new xn(50,f/a,.1,2e3);R.position.set(0,100,500),R.lookAt(0,50,0);const w=new bn({antialias:!0,alpha:!0});w.setSize(f,a),w.setPixelRatio(Math.min(window.devicePixelRatio,2)),w.setClearColor(0,0),h.appendChild(w.domElement),w.domElement.style.pointerEvents="none",ht.current=w;const J=(_,ye,Re)=>{ye/=100,Re/=100;const Ue=ye*Math.min(Re,1-Re),ft=wt=>{const Pt=(wt+_/30)%12;return Re-Ue*Math.max(Math.min(Pt-3,9-Pt,1),-1)};return(Math.round(ft(0)*255)<<16)+(Math.round(ft(8)*255)<<8)+Math.round(ft(4)*255)},K=J(S,70,60);J(S,60,40);const te=J(S,52,78),ae=J(S,40,25),p=J(S,60,55),x=new Ht({color:K,transparent:!0,opacity:.6}),G=new Ht({color:ae,transparent:!0,opacity:.25}),B=new Ht({color:te,transparent:!0,opacity:.6}),F=new Le({color:te,transparent:!0,opacity:.8}),r=new Le({color:p,transparent:!0,opacity:.9}),u=new Fe;b.add(u);let C=666;function c(){return C=C*16807%2147483647,(C-1)/2147483646}function i(_,ye,Re=64,Ue=x){const ft=[];for(let wt=0;wt<=Re;wt++){const Pt=wt/Re*Math.PI*2;ft.push(new g(Math.cos(Pt)*_,ye,Math.sin(Pt)*_))}return new rt(new He().setFromPoints(ft),Ue)}function O(_,ye,Re,Ue=1.5,ft=F){const wt=new De(new en(Ue,8,8),ft);return wt.position.set(_,ye,Re),wt}const ce=new Fe;ce.position.y=80,u.add(ce);const M=new De(new Pn(80,25,16,48),new Le({color:K,wireframe:!0,transparent:!0,opacity:.2}));ce.add(M);const s=new De(new Pn(80,15,12,36),new Le({color:te,wireframe:!0,transparent:!0,opacity:.15}));ce.add(s);for(let _=1;_<=5;_++)ce.add(i(_*10,0,32,_===5?B:G));ce.add(O(0,0,0,5,r));const D=new Fe;D.position.y=80,u.add(D);const E=40,v=[];for(let _=-1;_<=1;_+=2)for(let ye=-1;ye<=1;ye+=2)for(let Re=-1;Re<=1;Re+=2)for(let Ue=-1;Ue<=1;Ue+=2){const ft=1/(2-_*.3);v.push(new g(ye*E*ft,Re*E*ft,Ue*E*ft))}const U=new Set;v.forEach((_,ye)=>{v.forEach((Re,Ue)=>{if(ye>=Ue)return;const ft=_.distanceTo(Re),wt=`${Math.min(ye,Ue)}-${Math.max(ye,Ue)}`;ft<E*1.5&&!U.has(wt)&&(U.add(wt),D.add(new rt(new He().setFromPoints([_,Re]),ft<E*.9?x:G)))}),D.add(O(_.x,_.y,_.z,1.5,F))});const m=new Fe;m.position.y=80,u.add(m);const y=[];for(let _=0;_<20;_++){const ye=-_*15,Re=50+Math.abs(ye)*.3,Ue=new De(new Pn(Re,1,4,32),new Le({color:_<5?te:_<12?K:ae,wireframe:!0,transparent:!0,opacity:.3-_*.012}));Ue.position.z=ye,m.add(Ue),y.push({mesh:Ue,baseZ:ye,baseRadius:Re})}const T=150,L=new He,q=new Float32Array(T*3),le=[];for(let _=0;_<T;_++){const ye=c()>.5?"orbit":"stream";if(ye==="orbit"){const Re=c()*Math.PI*2,Ue=60+c()*60;q[_*3]=Math.cos(Re)*Ue,q[_*3+1]=80+(c()-.5)*40,q[_*3+2]=Math.sin(Re)*Ue,le.push({type:ye,angle:Re,radius:Ue,speed:.01+c()*.02})}else q[_*3]=(c()-.5)*20,q[_*3+1]=80+(c()-.5)*100,q[_*3+2]=-c()*200,le.push({type:ye,speed:1+c()*3})}L.setAttribute("position",new Cn(q,3));const $=new Rn(L,new kn({color:te,size:2,transparent:!0,opacity:.6}));u.add($);let Pe=0,Je,pt=0;function dt(){if(Je=requestAnimationFrame(dt),Pe+=.006,pt++,pt>30&&d.current.length>0){const ye=d.current.find(Re=>Re.active)||d.current[0];if(ye){const Re=(ye.x/window.innerWidth-.5)*2,Ue=(ye.y/window.innerHeight-.5)*2;u.rotation.y+=Re*.02,u.rotation.x+=Ue*.01}}else pt>30&&(u.rotation.y+=.001);M.rotation.x=Pe*.2,M.rotation.y=Pe*.3,s.rotation.x=-Pe*.3,s.rotation.y=-Pe*.2,D.rotation.x=Pe*.15,D.rotation.y=Pe*.2,D.rotation.z=Pe*.1,y.forEach((ye,Re)=>ye.mesh.scale.setScalar(1+Math.sin(Pe*2-Re*.3)*.1));const _=$.geometry.attributes.position.array;for(let ye=0;ye<T;ye++){const Re=le[ye];Re.type==="orbit"?(Re.angle+=Re.speed,_[ye*3]=Math.cos(Re.angle)*Re.radius,_[ye*3+2]=Math.sin(Re.angle)*Re.radius):(_[ye*3+2]-=Re.speed,_[ye*3+2]<-300&&(_[ye*3]=(c()-.5)*20,_[ye*3+1]=80+(c()-.5)*100,_[ye*3+2]=0))}$.geometry.attributes.position.needsUpdate=!0,w.render(b,R)}dt();const Mt=()=>{R.aspect=(h.clientWidth||window.innerWidth)/(h.clientHeight||window.innerHeight),R.updateProjectionMatrix(),w.setSize(h.clientWidth||window.innerWidth,h.clientHeight||window.innerHeight)};return window.addEventListener("resize",Mt),()=>{cancelAnimationFrame(Je),window.removeEventListener("resize",Mt),b.traverse(_=>{_.geometry&&_.geometry.dispose(),_.material&&(Array.isArray(_.material)?_.material.forEach(ye=>ye.dispose()):_.material.dispose())}),w.dispose(),h.contains(w.domElement)&&h.removeChild(w.domElement)}},[Z,S]),et.useEffect(()=>{if(Z!=="fungusDimensio"||!ne.current||typeof Tn>"u")return;d.current=[];const h=ne.current,f=h.clientWidth||window.innerWidth,a=h.clientHeight||window.innerHeight,b=new gn;bt.current=b,b.background=null,b.fog=new On(0,8e-4);const R=new xn(50,f/a,.1,2e3);R.position.set(0,100,350),R.lookAt(0,80,0);const w=new bn({antialias:!0,alpha:!0});w.setSize(f,a),w.setPixelRatio(Math.min(window.devicePixelRatio,2)),w.setClearColor(0,0),h.appendChild(w.domElement),w.domElement.style.pointerEvents="none",ht.current=w;const J=(me,Ge,Ke)=>{Ge/=100,Ke/=100;const Ve=Ge*Math.min(Ke,1-Ke),It=Yt=>{const Zt=(Yt+me/30)%12;return Ke-Ve*Math.max(Math.min(Zt-3,9-Zt,1),-1)};return(Math.round(It(0)*255)<<16)+(Math.round(It(8)*255)<<8)+Math.round(It(4)*255)},K=[],te=new Fe;b.add(te);const ae=J(S,52,68),p=J(S,52,45),x=J(S,52,78),G=J(S,40,35);J(S,35,25);const B=J(S,60,85),F=new Ht({color:ae,transparent:!0,opacity:.6}),r=new Ht({color:p,transparent:!0,opacity:.5}),u=new Ht({color:G,transparent:!0,opacity:.3}),C=new Ht({color:x,transparent:!0,opacity:.7});K.push(F,r,u,C);let c=5555;function i(){return c=c*16807%2147483647,(c-1)/2147483646}function O(me,Ge,Ke,Ve=1.5,It=x){const Yt=new en(Ve,8,8),Zt=new Le({color:It,transparent:!0,opacity:.8});K.push(Yt,Zt);const dn=new De(Yt,Zt);return dn.position.set(me,Ge,Ke),dn}function ce(me,Ge,Ke=32,Ve=r){const It=[];for(let Zt=0;Zt<=Ke;Zt++){const dn=Zt/Ke*Math.PI*2;It.push(new g(Math.cos(dn)*me,Ge,Math.sin(dn)*me))}const Yt=new He().setFromPoints(It);return K.push(Yt),new rt(Yt,Ve)}const M=new Fe;te.add(M);const s=new Sn([new g(0,0,0),new g(3,30,2),new g(-2,60,-1),new g(1,90,2),new g(0,120,0)]),D=new zn(s,30,12,12,!1),E=new Le({color:ae,wireframe:!0,transparent:!0,opacity:.15});K.push(D,E),M.add(new De(D,E));const v=new He().setFromPoints(s.getPoints(40));K.push(v),M.add(new rt(v,C));for(let me=0;me<8;me++){const Ge=me/8,Ke=s.getPoint(Ge);M.add(ce(12-Ge*3,Ke.y,16,me%2===0?F:u))}const U=new Fe;U.position.y=120,M.add(U);const m=50,y=new en(m,24,16,0,Math.PI*2,0,Math.PI*.5),T=new Le({color:p,wireframe:!0,transparent:!0,opacity:.15});K.push(y,T),U.add(new De(y,T));for(let me=0;me<6;me++){const Ge=me/6,Ke=Math.cos(Ge*Math.PI*.5)*m*.3,Ve=Math.sin(Ge*Math.PI*.5)*m+m*.3;U.add(ce(Ve,Ke,32,me%2===0?F:u))}for(let me=0;me<12;me++){const Ge=me/12*Math.PI*2,Ke=[];for(let It=0;It<=15;It++){const Zt=It/15*Math.PI*.5;Ke.push(new g(Math.cos(Ge)*Math.sin(Zt)*m,Math.cos(Zt)*m*.3,Math.sin(Ge)*Math.sin(Zt)*m))}const Ve=new He().setFromPoints(Ke);K.push(Ve),U.add(new rt(Ve,u))}const L=new Fe;L.position.y=115,M.add(L);for(let me=0;me<48;me++){const Ge=me/48*Math.PI*2,Ke=[];for(let It=0;It<=10;It++){const Yt=It/10,Zt=15+Yt*35,dn=-Yt*15-Math.sin(Yt*Math.PI)*5;Ke.push(new g(Math.cos(Ge)*Zt,dn,Math.sin(Ge)*Zt))}const Ve=new He().setFromPoints(Ke);K.push(Ve),L.add(new rt(Ve,me%4===0?F:u))}L.add(ce(50,-15,48,r)),[{x:-100,z:60,h:80,s:.7},{x:80,z:-50,h:60,s:.5},{x:-60,z:-80,h:70,s:.6},{x:120,z:40,h:50,s:.45},{x:-130,z:-30,h:40,s:.35},{x:50,z:90,h:55,s:.5}].forEach(me=>{const Ge=new Fe;Ge.position.set(me.x,0,me.z),Ge.scale.setScalar(me.s);const Ke=[];for(let dn=0;dn<=20;dn++){const fn=dn/20;Ke.push(new g(Math.sin(fn*3)*3,fn*me.h,Math.cos(fn*2)*2))}const Ve=new He().setFromPoints(Ke);K.push(Ve),Ge.add(new rt(Ve,F));const It=new en(25,12,8,0,Math.PI*2,0,Math.PI*.5),Yt=new Le({color:p,wireframe:!0,transparent:!0,opacity:.15});K.push(It,Yt);const Zt=new De(It,Yt);Zt.position.y=me.h,Ge.add(Zt),Ge.add(O(0,me.h+10,0,3,x)),te.add(Ge)});const le=new Fe;le.position.set(0,250,0),te.add(le);const $=[];for(let me=0;me<=6;me++){const Ge=me/6*Math.PI*2;$.push(new g(Math.cos(Ge)*20,0,Math.sin(Ge)*20))}const Pe=new He().setFromPoints($);K.push(Pe),le.add(new rt(Pe,C));const Je=[],pt=$[1].clone();for(let me=0;me<=5;me++){const Ge=me/5*Math.PI*2+Math.PI/3;Je.push(new g(pt.x+Math.cos(Ge)*16,0,pt.z+Math.sin(Ge)*16))}const dt=new He().setFromPoints(Je),Mt=new Ht({color:p,transparent:!0,opacity:.5});K.push(dt,Mt),le.add(new rt(dt,Mt)),$.slice(0,6).forEach((me,Ge)=>{le.add(O(me.x,me.y,me.z,3,Ge===0?B:x))});const _=Je[2],ye=new g(_.x+20,10,_.z+10),Re=new g(_.x+20,-10,_.z-10),Ue=new Ht({color:ae,transparent:!0,opacity:.5});K.push(Ue);const ft=new He().setFromPoints([_,ye]),wt=new He().setFromPoints([_,Re]);K.push(ft,wt),le.add(new rt(ft,Ue)),le.add(new rt(wt,Ue)),le.add(O(ye.x,ye.y,ye.z,2.5,ae)),le.add(O(Re.x,Re.y,Re.z,2.5,ae)),le.add(O(_.x,_.y,_.z,4,B));const Pt=new Fe;Pt.position.y=350,te.add(Pt);const qt=[p,ae,x,B];for(let me=0;me<8;me++){const Ge=new Ht({color:qt[me%4],transparent:!0,opacity:.4-me*.03});K.push(Ge),Pt.add(ce(30+me*20,0,48,Ge))}const Ft=[];for(let me=0;me<=200;me++){const Ge=me/200;Ft.push(new g(Math.cos(Ge*Math.PI*8)*Ge*150,Ge*30,Math.sin(Ge*Math.PI*8)*Ge*150))}const Wt=new He().setFromPoints(Ft),be=new Ht({color:x,transparent:!0,opacity:.3});K.push(Wt,be),Pt.add(new rt(Wt,be)),Pt.add(O(0,0,0,6,x));const k=new Fe;te.add(k),[{x:-150,y:200,z:100,type:"tetra"},{x:150,y:180,z:-80,type:"octa"},{x:-80,y:280,z:-120,type:"icosa"},{x:100,y:320,z:60,type:"dodeca"}].forEach(me=>{let Ge;switch(me.type){case"tetra":Ge=new hs(15);break;case"octa":Ge=new Jo(15);break;case"icosa":Ge=new Ro(15);break;case"dodeca":Ge=new Sa(15);break}const Ke=new Le({color:qt[Math.floor(i()*4)],wireframe:!0,transparent:!0,opacity:.3});K.push(Ge,Ke);const Ve=new De(Ge,Ke);Ve.position.set(me.x,me.y,me.z),Ve.userData={rotSpeed:.01+i()*.02,floatPhase:i()*Math.PI*2,baseY:me.y},k.add(Ve)});const l=new Fe;l.position.y=-20,te.add(l);const W=[];for(let me=0;me<30;me++){const Ge=i()*Math.PI*2,Ke=30+i()*150;W.push({x:Math.cos(Ge)*Ke,y:-i()*40,z:Math.sin(Ge)*Ke})}W.forEach((me,Ge)=>{l.add(O(me.x,me.y,me.z,1.5,ae));const Ke=W.map((Ve,It)=>({j:It,d:Math.sqrt((me.x-Ve.x)**2+(me.z-Ve.z)**2)})).filter(Ve=>Ve.j!==Ge).sort((Ve,It)=>Ve.d-It.d);for(let Ve=0;Ve<2&&Ve<Ke.length;Ve++)if(Ke[Ve].d<80){const It=W[Ke[Ve].j],Yt=[];for(let dn=0;dn<=10;dn++){const fn=dn/10;Yt.push(new g(me.x+(It.x-me.x)*fn,me.y+(It.y-me.y)*fn+Math.sin(fn*Math.PI)*5,me.z+(It.z-me.z)*fn))}const Zt=new He().setFromPoints(Yt);K.push(Zt),l.add(new rt(Zt,u))}});const se=jo?100:200,Te=new Float32Array(se*3),X=new Float32Array(se*3),de=[],Se=[x,B,ae,p];for(let me=0;me<se;me++){const Ge=i()*Math.PI*2,Ke=i()*200;Te[me*3]=Math.cos(Ge)*Ke,Te[me*3+1]=100+i()*250,Te[me*3+2]=Math.sin(Ge)*Ke;const Ve=new yn(Se[Math.floor(i()*Se.length)]);X[me*3]=Ve.r,X[me*3+1]=Ve.g,X[me*3+2]=Ve.b,de.push({x:(i()-.5)*.3,y:.1+i()*.3,z:(i()-.5)*.3,phase:i()*Math.PI*2})}const Xe=new He;Xe.setAttribute("position",new Cn(Te,3)),Xe.setAttribute("color",new Cn(X,3));const Qe=new kn({size:2,transparent:!0,opacity:.6,vertexColors:!0});K.push(Xe,Qe);const $e=new Rn(Xe,Qe);te.add($e);const fe=new Fe;fe.position.y=180,te.add(fe);function it(me,Ge,Ke,Ve,It,Yt,Zt){if(Yt>Zt)return;const dn=me+Math.cos(It)*Ve,fn=Ge+Ve*.7,$n=Ke+Math.sin(It)*Ve,Gn=new Ht({color:Yt%2===0?p:x,transparent:!0,opacity:.4-Yt*.05}),qn=new He().setFromPoints([new g(me,Ge,Ke),new g(dn,fn,$n)]);K.push(Gn,qn),fe.add(new rt(qn,Gn)),it(dn,fn,$n,Ve*.65,It+.5,Yt+1,Zt),it(dn,fn,$n,Ve*.65,It-.5,Yt+1,Zt)}for(let me=0;me<6;me++){const Ge=me/6*Math.PI*2;it(Math.cos(Ge)*60,0,Math.sin(Ge)*60,30,Ge,0,4)}let zt,lt=0,ot=0;function kt(){zt=requestAnimationFrame(kt),lt+=.005,ot++;const me=Math.sin(lt*ea*5);le.rotation.y=lt*.4,le.rotation.z=Math.sin(lt*.3)*.2,Pt.rotation.y=lt*.2,Pt.scale.setScalar(1+me*.1),k.children.forEach(Ke=>{Ke.rotation.x+=Ke.userData.rotSpeed,Ke.rotation.y+=Ke.userData.rotSpeed*.7,Ke.position.y=Ke.userData.baseY+Math.sin(lt*2+Ke.userData.floatPhase)*5}),fe.rotation.y=lt*.1;const Ge=$e.geometry.attributes.position.array;if(de.forEach((Ke,Ve)=>{if(Ge[Ve*3]+=Ke.x+Math.sin(lt+Ke.phase)*.1,Ge[Ve*3+1]+=Ke.y,Ge[Ve*3+2]+=Ke.z+Math.cos(lt+Ke.phase)*.1,Ge[Ve*3+1]>450){Ge[Ve*3+1]=100;const It=i()*Math.PI*2,Yt=i()*100;Ge[Ve*3]=Math.cos(It)*Yt,Ge[Ve*3+2]=Math.sin(It)*Yt}}),$e.geometry.attributes.position.needsUpdate=!0,U.scale.setScalar(1+Math.sin(lt)*.02),ot>30&&d.current.length>0){const Ke=d.current.find(Ve=>Ve.active)||d.current[0];if(Ke){const Ve=(Ke.x/window.innerWidth-.5)*2,It=(Ke.y/window.innerHeight-.5)*2;te.rotation.y+=Ve*.015,te.rotation.x=Math.max(-.5,Math.min(.5,te.rotation.x+It*.008))}}else ot>30&&(te.rotation.y+=8e-4);w.render(b,R)}kt();const mt=()=>{R.aspect=(h.clientWidth||window.innerWidth)/(h.clientHeight||window.innerHeight),R.updateProjectionMatrix(),w.setSize(h.clientWidth||window.innerWidth,h.clientHeight||window.innerHeight)};return window.addEventListener("resize",mt),()=>{cancelAnimationFrame(zt),window.removeEventListener("resize",mt),K.forEach(me=>me.dispose()),w.dispose(),h.contains(w.domElement)&&h.removeChild(w.domElement)}},[Z,S]),et.useEffect(()=>{if(Z!=="peyoteVisio"||!ne.current||typeof Tn>"u")return;d.current=[];const h=ne.current,f=h.clientWidth||window.innerWidth,a=h.clientHeight||window.innerHeight,b=new gn;bt.current=b,b.background=null,b.fog=new On(0,.001);const R=new xn(50,f/a,.1,2e3);R.position.set(0,80,300),R.lookAt(0,50,0);const w=new bn({antialias:!0,alpha:!0});w.setSize(f,a),w.setPixelRatio(Math.min(window.devicePixelRatio,2)),w.setClearColor(0,0),h.appendChild(w.domElement),w.domElement.style.pointerEvents="none",ht.current=w;const J=(X,de,Se)=>{de/=100,Se/=100;const Xe=de*Math.min(Se,1-Se),Qe=$e=>{const fe=($e+X/30)%12;return Se-Xe*Math.max(Math.min(fe-3,9-fe,1),-1)};return(Math.round(Qe(0)*255)<<16)+(Math.round(Qe(8)*255)<<8)+Math.round(Qe(4)*255)},K=[],te=new Fe;b.add(te);const ae=J(S,52,68),p=J(S,52,45),x=J(S,52,78),G=J(S,40,35);J(S,35,25);const B=J(S,60,85),F=new Ht({color:ae,transparent:!0,opacity:.6}),r=new Ht({color:p,transparent:!0,opacity:.5}),u=new Ht({color:G,transparent:!0,opacity:.3}),C=new Ht({color:x,transparent:!0,opacity:.7});K.push(F,r,u,C);let c=420;function i(){return c=c*16807%2147483647,(c-1)/2147483646}function O(X,de,Se,Xe=1.5,Qe=x){const $e=new en(Xe,8,8),fe=new Le({color:Qe,transparent:!0,opacity:.8});K.push($e,fe);const it=new De($e,fe);return it.position.set(X,de,Se),it}function ce(X,de,Se=32,Xe=r){const Qe=[];for(let fe=0;fe<=Se;fe++){const it=fe/Se*Math.PI*2;Qe.push(new g(Math.cos(it)*X,de,Math.sin(it)*X))}const $e=new He().setFromPoints(Qe);return K.push($e),new rt($e,Xe)}const M=new Fe;te.add(M);const s=40,D=8;for(let X=0;X<D;X++){const de=X/D*Math.PI*2,Se=[];for(let Qe=0;Qe<=20;Qe++){const $e=Qe/20,fe=Math.sin($e*Math.PI*.5)*25,it=s*Math.cos($e*Math.PI*.5)+5,zt=Math.sin($e*Math.PI)*8;Se.push(new g(Math.cos(de)*(it+zt),fe,Math.sin(de)*(it+zt)))}const Xe=new He().setFromPoints(Se);K.push(Xe),M.add(new rt(Xe,X%2===0?F:r))}for(let X=0;X<6;X++){const de=X/6,Se=Math.sin(de*Math.PI*.5)*25,Xe=s*Math.cos(de*Math.PI*.5)+5,Qe=[];for(let fe=0;fe<=32;fe++){const it=fe/32*Math.PI*2,zt=Math.sin(it*D)*5;Qe.push(new g(Math.cos(it)*(Xe+zt),Se,Math.sin(it)*(Xe+zt)))}const $e=new He().setFromPoints(Qe);K.push($e),M.add(new rt($e,u))}const E=new Fe;E.position.y=25,M.add(E);for(let X=0;X<20;X++){const de=i()*Math.PI*2,Se=i()*8,Xe=3+i()*5,Qe=new Ht({color:B,transparent:!0,opacity:.4}),$e=new He().setFromPoints([new g(Math.cos(de)*Se,0,Math.sin(de)*Se),new g(Math.cos(de)*Se*.5,Xe,Math.sin(de)*Se*.5)]);K.push(Qe,$e),E.add(new rt($e,Qe))}E.add(O(0,5,0,3,B));for(let X=0;X<D;X++){const de=X/D*Math.PI*2;for(let Se=0;Se<3;Se++){const Xe=.2+Se*.25,Qe=Math.sin(Xe*Math.PI*.5)*25,$e=s*Math.cos(Xe*Math.PI*.5)+8,fe=Math.cos(de)*$e,it=Math.sin(de)*$e;M.add(O(fe,Qe,it,1.5,x));for(let zt=0;zt<4;zt++){const lt=de+(zt-1.5)*.2,ot=5+i()*3,kt=new He().setFromPoints([new g(fe,Qe,it),new g(fe+Math.cos(lt)*ot,Qe+ot*.3,it+Math.sin(lt)*ot)]);K.push(kt),M.add(new rt(kt,u))}}}[{x:-80,z:40,s:.5},{x:70,z:-30,s:.6},{x:-50,z:-70,s:.4},{x:90,z:50,s:.45},{x:-100,z:-20,s:.35}].forEach(X=>{const de=new Fe;de.position.set(X.x,0,X.z),de.scale.setScalar(X.s);const Se=new en(30,8,6,0,Math.PI*2,0,Math.PI*.5),Xe=new Le({color:p,wireframe:!0,transparent:!0,opacity:.2});K.push(Se,Xe),de.add(new De(Se,Xe));for(let Qe=0;Qe<8;Qe++){const $e=Qe/8*Math.PI*2,fe=new He().setFromPoints([new g(Math.cos($e)*30,0,Math.sin($e)*30),new g(0,20,0)]);K.push(fe),de.add(new rt(fe,u))}de.add(O(0,20,0,2,x)),te.add(de)});const U=new Fe;U.position.y=120,te.add(U);const m=20,y=[];for(let X=0;X<=6;X++){const de=X/6*Math.PI*2;y.push(new g(Math.cos(de)*m,0,Math.sin(de)*m))}const T=new He().setFromPoints(y);K.push(T),U.add(new rt(T,C));const L=[];for(let X=0;X<=6;X++){const de=X/6*Math.PI*2;L.push(new g(Math.cos(de)*m*.7,0,Math.sin(de)*m*.7))}const q=new He().setFromPoints(L);K.push(q),U.add(new rt(q,u));for(let X=0;X<6;X++){const de=X/6*Math.PI*2;U.add(O(Math.cos(de)*m,0,Math.sin(de)*m,3,x))}const le=new Ht({color:p,transparent:!0,opacity:.5});K.push(le),[0,2,4].forEach(X=>{const de=X/6*Math.PI*2,Se=Math.cos(de)*m,Xe=Math.sin(de)*m,Qe=Math.cos(de)*(m+15),$e=Math.sin(de)*(m+15),fe=new He().setFromPoints([new g(Se,0,Xe),new g(Qe,0,$e)]);K.push(fe),U.add(new rt(fe,le)),U.add(O(Qe,0,$e,3,p));const it=Math.cos(de)*(m+28),zt=Math.sin(de)*(m+28),lt=new He().setFromPoints([new g(Qe,0,$e),new g(it,0,zt)]);K.push(lt),U.add(new rt(lt,u)),U.add(O(it,0,zt,2,ae))});const $={x:Math.cos(Math.PI/6)*m,z:Math.sin(Math.PI/6)*m},Pe=[new g($.x,0,$.z),new g($.x+15,10,$.z+10),new g($.x+30,5,$.z+20)],Je=new He().setFromPoints(Pe);K.push(Je),U.add(new rt(Je,F)),Pe.forEach((X,de)=>U.add(O(X.x,X.y,X.z,de===2?4:2.5,de===2?B:x)));const pt=new Fe;te.add(pt);for(let X=0;X<4;X++){const de=[],Se=X/4*Math.PI*2,Xe=100+X*30;for(let fe=0;fe<=100;fe++){const it=fe/100,zt=Se+it*Math.PI*4,lt=Xe*(1-it*.3),ot=50+it*150+Math.sin(it*Math.PI*6)*10;de.push(new g(Math.cos(zt)*lt,ot,Math.sin(zt)*lt))}const Qe=new Ht({color:X%2===0?p:ae,transparent:!0,opacity:.3-X*.05}),$e=new He().setFromPoints(de);K.push(Qe,$e),pt.add(new rt($e,Qe))}const dt=new Fe;dt.position.y=200,te.add(dt);const Mt=30;for(let X=0;X<6;X++){const de=X/6*Math.PI*2,Se=Math.cos(de)*Mt,Xe=Math.sin(de)*Mt,Qe=[];for(let fe=0;fe<=32;fe++){const it=fe/32*Math.PI*2;Qe.push(new g(Se+Math.cos(it)*Mt,0,Xe+Math.sin(it)*Mt))}const $e=new He().setFromPoints(Qe);K.push($e),dt.add(new rt($e,u))}dt.add(ce(Mt,0,32,F)),dt.add(O(0,0,0,4,B));const _=new Fe;_.position.y=-5,te.add(_);for(let X=-5;X<=5;X++){const de=new He().setFromPoints([new g(-200,0,X*40),new g(200,0,X*40)]),Se=new He().setFromPoints([new g(X*40,0,-200),new g(X*40,0,200)]);K.push(de,Se),_.add(new rt(de,u)),_.add(new rt(Se,u))}const ye=[];for(let X=0;X<=40;X++){const de=X/40*600-300;ye.push(new g(de,Math.sin(X*.5)*30+Math.sin(X*.2)*50+20,-250))}const Re=new He().setFromPoints(ye);K.push(Re),_.add(new rt(Re,u));const Ue=jo?75:150,ft=new Float32Array(Ue*3),wt=new Float32Array(Ue*3),Pt=[],qt=[x,p,ae,B];for(let X=0;X<Ue;X++){const de=i()*Math.PI*2,Se=50+i()*150;ft[X*3]=Math.cos(de)*Se,ft[X*3+1]=i()*250+30,ft[X*3+2]=Math.sin(de)*Se;const Xe=new yn(qt[Math.floor(i()*qt.length)]);wt[X*3]=Xe.r,wt[X*3+1]=Xe.g,wt[X*3+2]=Xe.b,Pt.push({angle:de,speed:.002+i()*.005,ySpeed:(i()-.5)*.2,radius:Se})}const Ft=new He;Ft.setAttribute("position",new Cn(ft,3)),Ft.setAttribute("color",new Cn(wt,3));const Wt=new kn({size:2.5,transparent:!0,opacity:.6,vertexColors:!0});K.push(Ft,Wt);const be=new Rn(Ft,Wt);te.add(be);const k=[];for(let X=0;X<5;X++){const de=new Ht({color:X%2===0?p:ae,transparent:!0,opacity:.2});K.push(de);const Se=ce(60+X*25,50+X*30,48,de);te.add(Se),k.push({mesh:Se,baseY:50+X*30,speed:.5+X*.2})}let j,l=0,W=0;function se(){j=requestAnimationFrame(se),l+=.005,W++;const X=Math.sin(l*ea*5);U.rotation.y=l*.3,U.rotation.x=Math.sin(l*.5)*.1,dt.rotation.y=-l*.2,pt.rotation.y=l*.1,k.forEach((Se,Xe)=>{Se.mesh.position.y=Se.baseY+Math.sin(l*Se.speed+Xe)*10,Se.mesh.scale.setScalar(1+X*.08)});const de=be.geometry.attributes.position.array;if(Pt.forEach((Se,Xe)=>{Se.angle+=Se.speed,de[Xe*3]=Math.cos(Se.angle)*Se.radius,de[Xe*3+1]+=Se.ySpeed,de[Xe*3+2]=Math.sin(Se.angle)*Se.radius,(de[Xe*3+1]>280||de[Xe*3+1]<30)&&(Se.ySpeed*=-1)}),be.geometry.attributes.position.needsUpdate=!0,E.rotation.z=Math.sin(l)*.05,W>30&&d.current.length>0){const Se=d.current.find(Xe=>Xe.active)||d.current[0];if(Se){const Xe=(Se.x/window.innerWidth-.5)*2,Qe=(Se.y/window.innerHeight-.5)*2;te.rotation.y+=Xe*.015,te.rotation.x=Math.max(-.5,Math.min(.5,te.rotation.x+Qe*.008))}}else W>30&&(te.rotation.y+=.001);w.render(b,R)}se();const Te=()=>{R.aspect=(h.clientWidth||window.innerWidth)/(h.clientHeight||window.innerHeight),R.updateProjectionMatrix(),w.setSize(h.clientWidth||window.innerWidth,h.clientHeight||window.innerHeight)};return window.addEventListener("resize",Te),()=>{cancelAnimationFrame(j),window.removeEventListener("resize",Te),K.forEach(X=>X.dispose()),w.dispose(),h.contains(w.domElement)&&h.removeChild(w.domElement)}},[Z,S]),et.useEffect(()=>{const h=Dt.current;if(!h)return;const f=h.getContext("2d"),a=Math.min(window.devicePixelRatio,2),b=()=>{h.width=window.innerWidth*a,h.height=window.innerHeight*a,f.scale(a,a)};b(),window.addEventListener("resize",b);const R=120,w=[];for(let te=0;te<R;te++)w.push({x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,vx:(Math.random()-.5)*.2,vy:(Math.random()-.5)*.2,size:Math.random()*1.2+.3,opacity:Math.random()*.4+.1,phase:Math.random()*Math.PI*2,twinkleSpeed:Math.random()*.015+.005});Gt.current=w;let J;const K=()=>{J=requestAnimationFrame(K),f.clearRect(0,0,window.innerWidth,window.innerHeight);const te=Date.now()*.001;w.forEach(ae=>{ae.x+=ae.vx+Math.sin(te*.3+ae.phase)*.05,ae.y+=ae.vy+Math.cos(te*.2+ae.phase)*.05,ae.x<0&&(ae.x=window.innerWidth),ae.x>window.innerWidth&&(ae.x=0),ae.y<0&&(ae.y=window.innerHeight),ae.y>window.innerHeight&&(ae.y=0);const p=.5+Math.sin(te*ae.twinkleSpeed*10+ae.phase)*.5,x=ae.opacity*p,G=f.createRadialGradient(ae.x,ae.y,0,ae.x,ae.y,ae.size*2);G.addColorStop(0,`hsla(${S}, 52%, 68%, ${x})`),G.addColorStop(1,`hsla(${S}, 52%, 68%, 0)`),f.beginPath(),f.arc(ae.x,ae.y,ae.size*2,0,Math.PI*2),f.fillStyle=G,f.fill()})};return K(),()=>{cancelAnimationFrame(J),window.removeEventListener("resize",b)}},[S]),I.jsxs("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:n?0:2,cursor:n?"default":"pointer",background:n?"transparent":"#000",touchAction:"none",opacity:we,pointerEvents:n?"none":"auto",transition:"opacity 1s ease"},onMouseDown:n?void 0:Ae,onMouseMove:n?void 0:ee,onMouseUp:n?void 0:he,onMouseLeave:n?void 0:he,onTouchStart:n?void 0:Ae,onTouchMove:n?void 0:ee,onTouchEnd:n?void 0:he,children:[(Z==="geometry"||Z==="jellyfish"||Z==="flowerOfLife"||Z==="tree"||Z==="fern"||Z==="dandelion"||Z==="succulent"||Z==="ripples"||Z==="lungs"||Z==="koiPond"||Z==="lavaTouch"||Z==="mountains"||Z==="maloka"||Z==="underwater"||Z==="lotus"||Z==="heartGarden"||Z==="corpusStellae"||Z==="machinaTemporis"||Z==="oceanusProfundus"||Z==="arborMundi"||Z==="portaDimensionum"||Z==="fungusDimensio"||Z==="peyoteVisio")&&I.jsx("div",{ref:ne,style:{width:"100%",height:"100%",pointerEvents:"none",animation:"fadeInSmooth 0.4s ease-out"}}),Z==="heartGarden"&&I.jsx("div",{onClick:Mn,style:{position:"absolute",inset:0,pointerEvents:"auto",cursor:"pointer"}}),Z==="heartGarden"&&I.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",pointerEvents:"none",paddingBottom:"calc(12rem + env(safe-area-inset-bottom, 0px))"},children:[I.jsx("div",{style:{color:`hsla(${S}, 52%, 78%, 0.95)`,fontSize:"1.5rem",fontFamily:'"Jost", sans-serif',fontWeight:300,lineHeight:1.8,textAlign:"center",maxWidth:"90%",padding:"0 1.5rem",opacity:At,transition:"opacity 0.8s ease-in-out",textShadow:"0 2px 20px rgba(0,0,0,0.7)"},children:un?"The garden lives within you always.":((wn=rn[ie])==null?void 0:wn.guidance[_e])||""}),un&&I.jsx("div",{style:{color:`hsla(${S}, 40%, 60%, 0.6)`,fontSize:"0.7rem",fontFamily:'"Jost", sans-serif',fontStyle:"italic",marginTop:"1.5rem",opacity:At,transition:"opacity 0.8s ease-in-out",textShadow:"0 2px 10px rgba(0,0,0,0.5)"},children:"Adapted from Ayya Khema's Flower Garden meditation"}),!un&&on===0&&I.jsx("div",{style:{position:"absolute",bottom:"calc(5rem + env(safe-area-inset-bottom, 0px))",color:`hsla(${S}, 52%, 68%, 0.5)`,fontSize:"0.75rem",fontFamily:'"Jost", sans-serif',letterSpacing:"0.15em"},children:"tap to continue"}),typeof window<"u"&&((Qt=(Ct=window.Capacitor)==null?void 0:Ct.isNativePlatform)==null?void 0:Qt.call(Ct))&&I.jsx("div",{style:{position:"absolute",bottom:"calc(2rem + env(safe-area-inset-bottom, 0px))",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"0.5rem"},children:rn.map((h,f)=>I.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:f<=ie?`hsla(${S}, 52%, 68%, ${f===ie?.9:.5})`:`hsla(${S}, 52%, 68%, 0.2)`,transition:"background-color 0.5s ease"}},h.id))})]}),I.jsx("canvas",{ref:Dt,style:{position:"absolute",inset:0,width:"100%",height:"100%",pointerEvents:"none",opacity:.5}}),Z!=="geometry"&&Z!=="jellyfish"&&Z!=="flowerOfLife"&&Z!=="mushrooms"&&Z!=="tree"&&Z!=="fern"&&Z!=="dandelion"&&Z!=="succulent"&&Z!=="ripples"&&Z!=="lungs"&&Z!=="koiPond"&&Z!=="lavaTouch"&&Z!=="mountains"&&Z!=="maloka"&&Z!=="underwater"&&Z!=="lotus"&&Z!=="corpusStellae"&&Z!=="machinaTemporis"&&Z!=="oceanusProfundus"&&Z!=="arborMundi"&&Z!=="portaDimensionum"&&Z!=="caelumMechanicum"&&I.jsx("canvas",{ref:jt,style:{width:"100%",height:"100%",display:"block",pointerEvents:"none"}}),!n&&I.jsx("div",{style:{position:"absolute",top:"calc(4rem + env(safe-area-inset-top, 0px))",left:"50%",transform:"translateX(-50%)",pointerEvents:"none",opacity:Oe?1:0,transition:"opacity 0.4s ease-in-out",zIndex:100},children:I.jsx("span",{style:{color:`hsla(${S}, 52%, 68%, 0.85)`,fontSize:"0.85rem",fontFamily:'"Jost", sans-serif',letterSpacing:"0.2em",textTransform:"uppercase",textShadow:"0 2px 10px rgba(0,0,0,0.5)"},children:((A=Fn.find(h=>h.key===Z))==null?void 0:A.name)||""})}),I.jsx("style",{children:`
        @keyframes slideUpDrawer {
          from { transform: translateY(100%); }
          to { transform: translateY(0); }
        }
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes fadeInSmooth {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes gazeTextPulse {
          0% { opacity: 0; }
          20% { opacity: 1; }
          80% { opacity: 1; }
          100% { opacity: 0; }
        }
      `})]})}function $s({primaryHue:t=220}){const e=Ce.useRef(null),o=Ce.useRef(null),n=Ce.useRef(null),z=Ce.useRef(null),N=Ce.useRef(null),ve=Ce.useRef(null),Q=Ce.useRef(null),S=Ce.useRef(null),we=Ce.useRef(null),ut=Ce.useRef(null),ne=Ce.useRef(null),jt=Ce.useRef([]),Dt=Ce.useRef(null),Gt=Ce.useRef(0),bt=Ce.useRef(0),ht=Ce.useRef(0),gt=Ce.useRef(0),yt=Ce.useRef(!1),tt=Ce.useRef({x:0,y:0}),Ye=Ce.useRef(0),Rt=Ce.useRef(0),St=Ce.useRef(new yn),at=Ce.useRef(new yn),Z=Ce.useRef(null),qe=Ce.useRef(null),Ot=Ce.useRef(null),pe=Ce.useRef([]),re=Ce.useRef(null),Ee=Ce.useRef([{freq:174,ratio:1,amplitude:0,maxAmp:.3,decay:.997,baseBuildRate:.003,name:"fundamental"},{freq:174*2,ratio:2,amplitude:0,maxAmp:.18,decay:.995,baseBuildRate:.002,name:"octave"},{freq:174*3,ratio:3,amplitude:0,maxAmp:.12,decay:.993,baseBuildRate:.0012,name:"fifth"},{freq:174*4.16,ratio:4.16,amplitude:0,maxAmp:.07,decay:.991,baseBuildRate:8e-4,name:"high partial"},{freq:174*5.43,ratio:5.43,amplitude:0,maxAmp:.04,decay:.988,baseBuildRate:5e-4,name:"shimmer"}]),[oe,ge]=Ce.useState(!1),[Oe,$t]=Ce.useState(!1),ct=Ce.useRef(!1);Ce.useEffect(()=>{St.current=new yn(`hsl(${t}, 52%, 68%)`),at.current=new yn(`hsl(${t}, 52%, 82%)`),Z.current&&Z.current.material.color.copy(St.current),qe.current&&qe.current.material.color.copy(St.current),Ot.current&&Ot.current.material.color.copy(at.current),pe.current.forEach(ie=>{ie.material.color.copy(at.current)})},[t]);const Tt=Ce.useCallback(()=>{if(ut.current)return;const ie=new(window.AudioContext||window.webkitAudioContext);ut.current=ie;const We=4.5,_e=ie.sampleRate,Be=_e*We,At=ie.createBuffer(2,Be,_e);for(let sn=0;sn<2;sn++){const ln=At.getChannelData(sn);for(let rn=0;rn<Be;rn++)ln[rn]=(Math.random()*2-1)*Math.pow(1-rn/Be,2.5)}const Bt=ie.createConvolver();Bt.buffer=At,Dt.current=Bt;const on=ie.createGain();on.gain.value=.3,Bt.connect(on),on.connect(ie.destination);const an=ie.createGain();an.gain.value=0,an.connect(ie.destination),an.connect(Bt),ne.current=an,an.gain.setTargetAtTime(.7,ie.currentTime,2);const un=Ee.current,hn=[];un.forEach((sn,ln)=>{const rn=ie.createOscillator();rn.type="sine",rn.frequency.value=sn.freq;const Mn=ie.createOscillator();Mn.type="sine",Mn.frequency.value=sn.freq+(.3+Math.random()*.5);const pn=ie.createGain();pn.gain.value=0;const wn=ie.createGain();wn.gain.value=0;const Ct=ie.createStereoPanner?ie.createStereoPanner():null,Qt=ie.createStereoPanner?ie.createStereoPanner():null;Ct&&(Ct.pan.value=-.2-ln*.1,Qt.pan.value=.2+ln*.1),rn.connect(pn),Mn.connect(wn),Ct?(pn.connect(Ct),wn.connect(Qt),Ct.connect(an),Qt.connect(an)):(pn.connect(an),wn.connect(an)),rn.start(),Mn.start(),hn.push({osc:rn,osc2:Mn,gain:pn,gain2:wn,harmonic:sn})}),jt.current=hn,$t(!0)},[]),vt=Ce.useCallback(()=>{const ie=ut.current;if(!ie)return;const We=ie.currentTime,_e=Ee.current;jt.current.forEach(({gain:Be,gain2:At},Bt)=>{const on=_e[Bt],an=on.amplitude*on.maxAmp;Be.gain.setTargetAtTime(an,We,.08),At.gain.setTargetAtTime(an*.7,We,.08)})},[]),d=Ce.useCallback(ie=>{const We=ut.current,_e=ne.current;if(!We||!_e)return;const Be=We.currentTime,Bt=We.createBuffer(1,We.sampleRate*.18,We.sampleRate),on=Bt.getChannelData(0);for(let hn=0;hn<on.length;hn++){const sn=hn/We.sampleRate,ln=Math.exp(-sn*25);on[hn]=ln*ie*.5*(Math.sin(2*Math.PI*174*sn)*.4+Math.sin(2*Math.PI*348*sn)*.25+Math.sin(2*Math.PI*522*sn)*.15+Math.sin(2*Math.PI*724*sn)*.1+(Math.random()*2-1)*.08*Math.exp(-sn*50))}const an=We.createBufferSource();an.buffer=Bt;const un=We.createGain();un.gain.value=.6,an.connect(un),un.connect(_e),an.start(Be)},[]),Ie=Ce.useCallback((ie,We)=>{const _e=ut.current,Be=ne.current;if(!_e||!Be)return;const At=_e.currentTime,Bt=.05,on=_e.createBuffer(1,_e.sampleRate*Bt,_e.sampleRate),an=on.getChannelData(0);for(let ln=0;ln<an.length;ln++){const rn=ln/_e.sampleRate,Mn=Math.sin(Math.PI*rn/Bt);an[ln]=(Math.random()*2-1)*Mn*ie*.03}const un=_e.createBufferSource();un.buffer=on;const hn=_e.createBiquadFilter();hn.type="bandpass",hn.frequency.value=1500+ie*2e3+We*2e3,hn.Q.value=1.5;const sn=_e.createGain();sn.gain.value=Math.min(ie*.2+We*.1,.15),un.connect(hn),hn.connect(sn),sn.connect(Be),un.start(At)},[]),P=Ce.useCallback((ie,We)=>{const _e=We-Ye.current,Be=.15,At=.8,Bt=At-(At-Be)*Math.pow(ie,.7);_e>=Bt&&ie>.08&&(ie>.7?tn.medium():ie>.4?tn.soft():tn.selection(),Ye.current=We)},[]);Ce.useEffect(()=>{const ie=e.current;if(!ie)return;const We=window.innerWidth,_e=window.innerHeight,Be=new gn;o.current=Be;const At=new xn(45,We/_e,.1,100);At.position.set(0,6,4.5),At.lookAt(0,0,0),n.current=At;const Bt=new bn({antialias:!0,alpha:!0});Bt.setSize(We,_e),Bt.setPixelRatio(Math.min(window.devicePixelRatio,2)),Bt.setClearColor(0,0),ie.appendChild(Bt.domElement),z.current=Bt;const on=new Va(Bt),an=new _a(Be,At);on.addPass(an);const un=new eo(new cn(We,_e),.4,.5,.2);on.addPass(un),N.current=on,Q.current=un,S.current=new An;const hn=new yn(`hsl(${t}, 52%, 68%)`),sn=new yn(`hsl(${t}, 52%, 82%)`);St.current=hn,at.current=sn;const ln=new Fe;Be.add(ln),ve.current=ln;const rn=new en(1.95,72,36,0,Math.PI*2,Math.PI*.52,Math.PI*.48),Mn=new Le({color:hn,wireframe:!0,transparent:!0,opacity:.18}),pn=new De(rn,Mn);pn.rotation.x=Math.PI,ln.add(pn),qe.current=pn;const wn=new Pn(1.95,.06,16,100),Ct=new Le({color:hn,transparent:!0,opacity:.7}),Qt=new De(wn,Ct);Qt.rotation.x=Math.PI/2,Qt.position.y=.05,ln.add(Qt),Z.current=Qt;const A=new Pn(1.5,.03,12,80),h=new Le({color:sn,transparent:!0,opacity:.4}),f=new De(A,h);f.rotation.x=Math.PI/2,f.position.y=-.15,ln.add(f),Ot.current=f;const a=[];for(let p=0;p<3;p++){const x=1-p*.3,G=new Pn(x,.02,8,48),B=new Le({color:sn,transparent:!0,opacity:0}),F=new De(G,B);F.rotation.x=Math.PI/2,F.position.y=-.3-p*.15,ln.add(F),a.push(F)}pe.current=a;const b=400,R=new He,w=new Float32Array(b*3);for(let p=0;p<b;p++){const x=Math.random()*Math.PI*2,G=Math.acos(2*Math.random()-1),B=25+Math.random()*35;w[p*3]=B*Math.sin(G)*Math.cos(x),w[p*3+1]=B*Math.sin(G)*Math.sin(x)*.6-5,w[p*3+2]=B*Math.cos(G)}R.setAttribute("position",new Cn(w,3));const J=new kn({color:16777215,size:.08,transparent:!0,opacity:.5}),K=new Rn(R,J);Be.add(K),re.current=K;const te=()=>{const p=window.innerWidth,x=window.innerHeight;At.aspect=p/x,At.updateProjectionMatrix(),Bt.setSize(p,x),on.setSize(p,x)};window.addEventListener("resize",te);const ae=()=>{we.current=requestAnimationFrame(ae);const p=S.current.getDelta(),x=S.current.getElapsedTime();Rt.current=x;const G=Ee.current,B=yt.current;!ct.current&&x>3&&Gt.current<.05&&(ge(!0),ct.current=!0),G.forEach(c=>{B||(c.amplitude*=c.decay,c.amplitude<.001&&(c.amplitude=0))});const F=G.reduce((c,i)=>c+i.amplitude*i.maxAmp,0),r=G.reduce((c,i)=>c+i.maxAmp,0);bt.current=F/r,Gt.current+=(bt.current-Gt.current)*p*2.5;const u=Gt.current;vt(),P(u,x);const C=.5+Math.sin(x*.5)*.1;if(ve.current){const c=.96+C*.08+u*.04;ve.current.scale.setScalar(c),ve.current.rotation.y+=.001+u*.003}if(Z.current){const c=Math.sin(x*G[0].freq*.02)*u*.015,i=Math.cos(x*G[0].freq*.02)*u*.015;Z.current.position.x=c,Z.current.position.z=i,Z.current.material.opacity=.7+u*.3}qe.current&&(qe.current.material.opacity=.18+u*.2),Ot.current&&(Ot.current.material.opacity=.4+u*.4,Ot.current.rotation.z=x*.1),pe.current.forEach((c,i)=>{const O=.15+i*.2,ce=Math.max(0,(u-O)*2);c.material.opacity=ce*.5,c.rotation.z=x*(.1+i*.05)*(i%2===0?1:-1),c.scale.setScalar(1+Math.sin(x*2+i)*u*.1)}),Q.current&&(Q.current.strength=.35+u*.6),on.render()};return ae(),()=>{window.removeEventListener("resize",te),we.current&&cancelAnimationFrame(we.current),Bt.dispose(),ie.removeChild(Bt.domElement),jt.current.forEach(({osc:p,osc2:x})=>{try{p.stop()}catch{}try{x.stop()}catch{}}),ut.current&&ut.current.close()}},[t,vt,P]);const Y=Ce.useCallback((ie,We)=>{const _e=n.current,Be=z.current;if(!_e||!Be)return{x:0,y:0};const At=Be.domElement.getBoundingClientRect(),Bt=(ie-At.left)/At.width*2-1,on=-((We-At.top)/At.height)*2+1;return{x:Bt,y:on}},[]),ke=Ce.useCallback((ie,We)=>{const{x:_e,y:Be}=Y(ie,We),At=.65,Bt=Math.sqrt(_e*_e+(Be-.15)*(Be-.15)*4);return Bt>At*.7&&Bt<At*1.3},[Y]),H=Ce.useCallback((ie,We)=>{const{x:_e,y:Be}=Y(ie,We);return Math.sqrt(_e*_e+(Be-.15)*(Be-.15)*4)<.65*.7},[Y]),V=Ce.useCallback((ie,We)=>{const{x:_e,y:Be}=Y(ie,We);return Math.atan2(Be-.15,_e)},[Y]),Ae=Ce.useCallback(ie=>{Oe||Tt(),Ee.current.forEach((_e,Be)=>{const At=ie*(Be===0?.7:.35/(Be+1));_e.amplitude=Math.min(_e.amplitude+At,1)}),bt.current=Math.min(bt.current+ie*.35,1),d(ie),tn.medium()},[Oe,Tt,d]),ee=Ce.useCallback((ie,We)=>{Oe||Tt(),tt.current={x:ie,y:We},ke(ie,We)?(yt.current=!0,ht.current=V(ie,We),ge(!1),tn.soft()):H(ie,We)&&Ae(.7)},[Oe,Tt,ke,H,V,Ae]),he=Ce.useCallback((ie,We)=>{if(!yt.current)return;tt.current={x:ie,y:We};const _e=V(ie,We);let Be=_e-ht.current;if(Be>Math.PI&&(Be-=Math.PI*2),Be<-Math.PI&&(Be+=Math.PI*2),gt.current=gt.current*.7+Math.abs(Be)*.3,ht.current=_e,!ke(ie,We)){yt.current=!1,gt.current=0;return}const At=gt.current,Bt=Gt.current;if(At>.002){const an=1-Math.min(Math.abs(At-.035)/.035,1),un=.5+Bt*3.5;Ee.current.forEach((ln,rn)=>{const Mn=rn===0?1:rn<3?.5+At*6:At*12,pn=ln.baseBuildRate*un*Mn*an;ln.amplitude=Math.min(ln.amplitude+pn,1)});const sn=(an*.004+.001)*un;bt.current=Math.min(bt.current+sn,1),Math.random()<At*6+Bt*.2&&Ie(At,Bt)}},[V,ke,Ie]),Me=Ce.useCallback(()=>{yt.current=!1,gt.current=0},[]),nt=Ce.useCallback(ie=>{ie.preventDefault();const We=ie.touches[0];ee(We.clientX,We.clientY)},[ee]),Ze=Ce.useCallback(ie=>{ie.preventDefault();const We=ie.touches[0];he(We.clientX,We.clientY)},[he]),xe=Ce.useCallback(ie=>{ie.preventDefault(),Me()},[Me]),Et=Ce.useCallback(ie=>{ee(ie.clientX,ie.clientY)},[ee]),je=Ce.useCallback(ie=>{ie.buttons===1&&he(ie.clientX,ie.clientY)},[he]),ue=Ce.useCallback(()=>{Me()},[Me]);return I.jsxs("div",{style:{position:"absolute",inset:0,background:"#030306",touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},children:[I.jsx("div",{ref:e,style:{width:"100%",height:"100%",position:"fixed",top:0,left:0,zIndex:1},onTouchStart:nt,onTouchMove:Ze,onTouchEnd:xe,onMouseDown:Et,onMouseMove:je,onMouseUp:ue,onMouseLeave:ue}),I.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:5,pointerEvents:"none",background:"radial-gradient(ellipse at 50% 50%, transparent 30%, rgba(3,3,6,0.6) 60%, rgba(3,3,6,0.98) 85%)"}}),I.jsx("div",{style:{position:"fixed",top:"18%",left:"50%",transform:"translateX(-50%)",zIndex:10,textAlign:"center",pointerEvents:"none",opacity:.7,transition:"opacity 1s ease"},children:I.jsx("div",{style:{fontSize:"clamp(1.5rem, 5vw, 2.2rem)",letterSpacing:"0.3em",textTransform:"lowercase",color:`hsla(${t}, 52%, 68%, 0.9)`,fontFamily:'"Jost", sans-serif',fontWeight:300},children:"singing bowl"})}),I.jsx("div",{style:{position:"fixed",bottom:36,left:"50%",transform:"translateX(-50%)",zIndex:20,fontWeight:300,fontSize:13,color:`hsla(${t}, 30%, 50%, 0.6)`,letterSpacing:"0.22em",opacity:oe?.6:0,transition:"opacity 2.5s ease",pointerEvents:"none",textAlign:"center",fontFamily:'"Jost", sans-serif'},children:"trace the rim slowly"})]})}function qs({primaryHue:t=220,musicKey:e=3,musicScaleType:o=13}){const n=Ce.useRef(null),z=Ce.useRef(null),N=Ce.useRef(null),ve=Ce.useRef(null),Q=Ce.useRef(null),S=Ce.useRef(null),we=Ce.useRef(0),ut=Ce.useRef([]),ne=Ce.useRef({W:0,H:0}),jt=Ce.useRef(new Map),Dt=Ce.useRef(new Map),[Gt,bt]=Ce.useState(!0),ht=Ce.useRef(null),gt=Ce.useCallback((d,Ie,P=2)=>{const Y=Jn[d],ke=ia[Y],H=Qn[Ie].intervals,V=[];for(let Ae=0;Ae<P;Ae++)for(const ee of H){const he=ee+Ae*12,Me=ke*Math.pow(2,he/12);V.push(Me)}return V.push(ke*Math.pow(2,P)),V},[]),yt=Ce.useCallback(()=>{const{W:d,H:Ie}=ne.current;if(d===0||Ie===0)return;const P=gt(e,o,2),Y=P.length,ke=[],H=d*.08,Ae=(d-H*2)/(Y-1),ee=Ie*.08,he=Ie*.92;P.forEach((Me,nt)=>{const Ze=H+nt*Ae,xe=nt/(Y-1),Et=ee+xe*Ie*.2,je=he-xe*Ie*.05,ue=48;ke.push({x:Ze,topY:Et,bottomY:je,freq:Me,index:nt,normalizedIndex:xe,energy:0,glowIntensity:0,decay:.9985+xe*8e-4,pluckPoint:.5,segments:ue,displacement:new Float32Array(ue).fill(0),prevDisplacement:new Float32Array(ue).fill(0),thickness:2.5-xe*1.5,ripples:[]})}),ut.current=ke},[e,o,gt]),tt=Ce.useCallback(()=>{if(z.current)return;const d=new(window.AudioContext||window.webkitAudioContext);z.current=d;const Ie=d.createGain();Ie.gain.value=0,Ie.connect(d.destination),N.current=Ie,fetch("harp.mp3").then(ee=>ee.arrayBuffer()).then(ee=>d.decodeAudioData(ee)).then(ee=>{Q.current=ee}).catch(()=>{});const P=5,Y=d.sampleRate,ke=Y*P,H=d.createBuffer(2,ke,Y);for(let ee=0;ee<2;ee++){const he=H.getChannelData(ee);for(let Me=0;Me<ke;Me++){const nt=Math.pow(1-Me/ke,2.2);he[Me]=(Math.random()*2-1)*nt*.6,Me<Y*.08&&(he[Me]+=(Math.random()*2-1)*.15*(1-Me/(Y*.08)))}}const V=d.createConvolver();V.buffer=H,ve.current=V;const Ae=d.createGain();Ae.gain.value=.35,V.connect(Ae),Ae.connect(d.destination),Ie.connect(V),Ie.gain.setTargetAtTime(.65,d.currentTime,1.5)},[]),Ye=Ce.useCallback((d,Ie)=>{const P=z.current,Y=N.current,ke=Q.current;if(!P||!Y||!ke)return;P.state==="suspended"&&P.resume();const H=P.currentTime,ee=d.freq/130.81,he=P.createBufferSource();he.buffer=ke,he.playbackRate.value=ee;const Me=P.createBiquadFilter();Me.type="lowpass",Me.frequency.value=2e3+d.normalizedIndex*6e3+Ie*2e3,Me.Q.value=.5;const nt=P.createGain();nt.gain.value=0,nt.gain.setTargetAtTime(1*Ie,H,.01),nt.gain.setTargetAtTime(.7*Ie,H+.1,.3),nt.gain.setTargetAtTime(0,H+.5,3);let Ze=nt;if(P.createStereoPanner){const xe=P.createStereoPanner();xe.pan.value=(d.normalizedIndex-.5)*1.2,nt.connect(xe),Ze=xe}he.connect(Me),Me.connect(nt),Ze.connect(Y),he.start(H),ut.current.forEach(xe=>{if(xe===d)return;const Et=xe.freq/d.freq,je=Math.round(Et);je>0&&je<=4&&Math.abs(Et-je)<.05&&setTimeout(()=>{xe.energy=Math.min(xe.energy+Ie*.08,.3),xe.glowIntensity=Math.min(xe.glowIntensity+.15,.3),Rt(xe,Ie*.15)},30+Math.random()*60)})},[]),Rt=Ce.useCallback((d,Ie)=>{const P=Math.floor(d.pluckPoint*d.segments);for(let Y=0;Y<d.segments;Y++){const ke=Math.abs(Y-P)/d.segments,H=Ie*12*Math.max(0,1-ke*2.5);d.displacement[Y]+=H*(Math.random()>.5?1:-1)}},[]),St=Ce.useCallback((d,Ie,P)=>{d.pluckPoint=Math.max(.1,Math.min(.9,(Ie-d.topY)/(d.bottomY-d.topY))),d.energy=Math.min(d.energy+P,1),d.glowIntensity=Math.min(P+.2,1),Rt(d,P),d.ripples.push({y:Ie,spread:0,maxSpread:(d.bottomY-d.topY)*.8,life:1,velocity:P}),Ye(d,P),d.normalizedIndex<.33?tn.medium():d.normalizedIndex<.66?tn.soft():tn.tap()},[Ye,Rt]),at=Ce.useCallback(d=>{const Ie=ut.current,{W:P}=ne.current;let Y=null,ke=1/0;Ie.forEach(V=>{const Ae=Math.abs(d-V.x);Ae<ke&&(ke=Ae,Y=V)});const H=P/Ie.length*.8;return ke<H?Y:null},[]),Z=Ce.useCallback((d,Ie,P)=>{z.current||tt(),jt.current.set(d,{x:Ie,y:P});const Y=at(Ie);Y&&P>Y.topY&&P<Y.bottomY&&(St(Y,P,.6),Dt.current.set(Y.index,performance.now()))},[tt,at,St]),qe=Ce.useCallback((d,Ie,P)=>{const Y=jt.current.get(d);if(!Y)return;const ke=Ie-Y.x;ut.current.forEach(V=>{const Ae=Y.x<V.x&&Ie>=V.x,ee=Y.x>V.x&&Ie<=V.x;if((Ae||ee)&&P>V.topY&&P<V.bottomY){const he=Dt.current.get(V.index)||0;if(performance.now()-he<100)return;Dt.current.set(V.index,performance.now());const Me=Math.min(Math.abs(ke)/30,1)*.5+.3;St(V,P,Me)}}),jt.current.set(d,{x:Ie,y:P})},[St]),Ot=Ce.useCallback(d=>{jt.current.delete(d)},[]),pe=Ce.useCallback(d=>{const Ie=ut.current,P=.4;Ie.forEach(Y=>{const ke=.985+Y.normalizedIndex*.008,H=new Float32Array(Y.segments);for(let V=1;V<Y.segments-1;V++){const Ae=P*P*(Y.displacement[V-1]+Y.displacement[V+1]-2*Y.displacement[V]);H[V]=2*Y.displacement[V]-Y.prevDisplacement[V]+Ae,H[V]*=ke}H[0]=0,H[Y.segments-1]=0,Y.prevDisplacement=new Float32Array(Y.displacement),Y.displacement=H,Y.energy*=Y.decay,Y.energy<.001&&(Y.energy=0),Y.glowIntensity*=.97,Y.glowIntensity<.005&&(Y.glowIntensity=0);for(let V=Y.ripples.length-1;V>=0;V--){const Ae=Y.ripples[V];Ae.spread+=d*400,Ae.life-=d*.5,Ae.life<=0&&Y.ripples.splice(V,1)}})},[]),re=Ce.useCallback(d=>{const{W:Ie,H:P}=ne.current,Y=ut.current,ke=t,H=35,V=50;d.clearRect(0,0,Ie,P);const Ae=Y.reduce((he,Me)=>he+Me.energy,0)/Math.max(Y.length,1),ee=1.5+Ae*3;if(d.fillStyle=`hsl(${ke}, ${H*.3}%, ${ee}%)`,d.fillRect(0,0,Ie,P),Ae>.01){const he=d.createRadialGradient(Ie/2,P/2,0,Ie/2,P/2,Math.max(Ie,P)*.6),Me=Ae*.06;he.addColorStop(0,`hsla(${ke}, ${H}%, ${V}%, ${Me})`),he.addColorStop(1,"hsla(0, 0%, 0%, 0)"),d.fillStyle=he,d.fillRect(0,0,Ie,P)}Y.forEach(he=>{if(he.glowIntensity>.01){d.save(),d.globalAlpha=he.glowIntensity*.25,d.shadowColor=`hsla(${ke}, ${H+20}%, ${V+20}%, 0.8)`,d.shadowBlur=15+he.glowIntensity*20,d.beginPath(),d.moveTo(he.x,he.topY);for(let Ze=0;Ze<he.segments;Ze++){const xe=he.topY+Ze/(he.segments-1)*(he.bottomY-he.topY),Et=he.x+he.displacement[Ze];d.lineTo(Et,xe)}d.strokeStyle=`hsla(${ke}, ${H+20}%, ${V+25}%, ${.3+he.glowIntensity*.5})`,d.lineWidth=he.thickness+he.glowIntensity*4,d.stroke(),d.restore()}d.beginPath(),d.moveTo(he.x,he.topY);for(let Ze=0;Ze<he.segments;Ze++){const xe=Ze/(he.segments-1),Et=he.topY+xe*(he.bottomY-he.topY),je=he.x+he.displacement[Ze];d.lineTo(je,Et)}const Me=V*.4+he.glowIntensity*V*.6+10,nt=.35+he.energy*.5+he.glowIntensity*.15;d.strokeStyle=`hsla(${ke}, ${H}%, ${Me}%, ${nt})`,d.lineWidth=he.thickness,d.lineCap="round",d.stroke(),he.ripples.forEach(Ze=>{if(Ze.life<=0)return;const xe=Ze.life*.4*Ze.velocity;d.beginPath(),d.ellipse(he.x,Ze.y,3+Ze.spread*.1,Ze.spread,0,0,Math.PI*2),d.strokeStyle=`hsla(${ke}, ${H+15}%, ${V+15}%, ${xe})`,d.lineWidth=.5+Ze.velocity,d.stroke()}),d.beginPath(),d.arc(he.x,he.topY,2,0,Math.PI*2),d.fillStyle=`hsla(${ke}, ${H-10}%, ${V+20}%, 0.3)`,d.fill(),d.beginPath(),d.arc(he.x,he.bottomY,1.5,0,Math.PI*2),d.fillStyle=`hsla(${ke}, ${H-10}%, ${V+15}%, 0.2)`,d.fill()}),Ae>.05&&Y.forEach(he=>{if(he.energy>.1&&Math.random()<he.energy*.08){const Me=Math.random(),nt=he.topY+Me*(he.bottomY-he.topY),Ze=Math.floor(Me*(he.segments-1)),xe=he.x+(he.displacement[Ze]||0);d.beginPath(),d.arc(xe+(Math.random()-.5)*8,nt+(Math.random()-.5)*4,.5+Math.random()*1.5,0,Math.PI*2),d.fillStyle=`hsla(${ke}, ${H+10}%, ${V+20}%, ${he.energy*.4})`,d.fill()}})},[t]),Ee=Ce.useCallback(d=>{const Ie=n.current;if(!Ie)return;const P=Ie.getContext("2d");we.current||(we.current=d);const Y=Math.min((d-we.current)/1e3,.05);we.current=d;const ke=3,H=Y/ke;for(let V=0;V<ke;V++)pe(H);re(P),S.current=requestAnimationFrame(Ee)},[pe,re]),oe=Ce.useCallback(()=>{const d=n.current;if(!d)return;const Ie=Math.min(window.devicePixelRatio||1,2),P=window.innerWidth,Y=window.innerHeight;d.width=P*Ie,d.height=Y*Ie,d.style.width=P+"px",d.style.height=Y+"px",d.getContext("2d").setTransform(Ie,0,0,Ie,0,0),ne.current={W:P,H:Y},yt()},[yt]);Ce.useEffect(()=>(oe(),window.addEventListener("resize",oe),S.current=requestAnimationFrame(Ee),ht.current=setTimeout(()=>bt(!1),2500),()=>{window.removeEventListener("resize",oe),S.current&&cancelAnimationFrame(S.current),ht.current&&clearTimeout(ht.current),z.current&&z.current.close()}),[oe,Ee]),Ce.useEffect(()=>{yt()},[e,o,yt]);const ge=Ce.useCallback(d=>{d.preventDefault();for(const Ie of d.changedTouches)Z(Ie.identifier,Ie.clientX,Ie.clientY)},[Z]),Oe=Ce.useCallback(d=>{d.preventDefault();for(const Ie of d.changedTouches)qe(Ie.identifier,Ie.clientX,Ie.clientY)},[qe]),$t=Ce.useCallback(d=>{d.preventDefault();for(const Ie of d.changedTouches)Ot(Ie.identifier)},[Ot]),ct=Ce.useCallback(d=>{Z("mouse",d.clientX,d.clientY)},[Z]),Tt=Ce.useCallback(d=>{d.buttons===1&&qe("mouse",d.clientX,d.clientY)},[qe]),vt=Ce.useCallback(()=>{Ot("mouse")},[Ot]);return I.jsxs("div",{style:{position:"absolute",inset:0,background:"#030306",touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},children:[I.jsx("canvas",{ref:n,style:{display:"block",width:"100%",height:"100%",position:"fixed",top:0,left:0,zIndex:1},onTouchStart:ge,onTouchMove:Oe,onTouchEnd:$t,onMouseDown:ct,onMouseMove:Tt,onMouseUp:vt,onMouseLeave:vt}),I.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:5,pointerEvents:"none",background:"radial-gradient(ellipse at 50% 50%, transparent 30%, rgba(3,3,6,0.6) 60%, rgba(3,3,6,0.98) 85%)"}}),I.jsxs("div",{style:{position:"fixed",top:"18%",left:"50%",transform:"translateX(-50%)",zIndex:10,textAlign:"center",pointerEvents:"none",opacity:Gt?.8:0,transition:"opacity 1s ease"},children:[I.jsx("div",{style:{fontSize:"clamp(1.5rem, 5vw, 2.2rem)",letterSpacing:"0.3em",textTransform:"lowercase",color:`hsla(${t}, 52%, 68%, 0.9)`,fontFamily:'"Jost", sans-serif',fontWeight:300,marginBottom:"0.5rem"},children:"harp"}),I.jsxs("div",{style:{fontSize:"clamp(0.7rem, 2.5vw, 0.9rem)",letterSpacing:"0.2em",textTransform:"lowercase",color:`hsla(${t}, 52%, 68%, 0.6)`,fontFamily:'"Jost", sans-serif'},children:[Jn[e].toLowerCase()," ",Qn[o].name]})]})]})}function Ns({primaryHue:t=120}){const e=Ce.useRef(null),o=Ce.useRef(null),n=Ce.useRef(null),z=Ce.useRef(null),N=Ce.useRef(null),ve=Ce.useRef(null),Q=Ce.useRef(0),S=Ce.useRef(0),we=Ce.useRef({W:0,H:0}),ut=Ce.useRef({top:0,bottom:0,left:0,right:0,centerX:0}),ne=Ce.useRef({x:0,y:0}),jt=Ce.useRef(!1),Dt=Ce.useRef([]),Gt=Ce.useRef([]),bt=Ce.useRef([]),ht=Ce.useRef(0),[gt,yt]=Ce.useState(!1),[tt,Ye]=Ce.useState(!1),Rt=Ce.useRef(!1),St=120,at=18,Z=4,qe=Ce.useCallback(()=>{const P=e.current;if(!P)return;const Y=Math.min(window.devicePixelRatio||1,2),ke=window.innerWidth,H=window.innerHeight;P.width=ke*Y,P.height=H*Y,P.style.width=ke+"px",P.style.height=H+"px",P.getContext("2d").setTransform(Y,0,0,Y,0,0),we.current={W:ke,H};const Ae=ke*.14,ee=ke/2,he=H*.08,Me=H*.92;ut.current={top:he,bottom:Me,left:ee-Ae,right:ee+Ae,centerX:ee,width:Ae*2,height:Me-he},Ot(),Dt.current.length===0&&pe()},[]),Ot=Ce.useCallback(()=>{const P=ut.current,Y=[];for(let ke=0;ke<at;ke++){const H=P.top+(ke+1)/(at+1)*P.height,V=ke%2===0?0:.5,Ae=Z-(ke%2===0?0:1);for(let ee=0;ee<Ae;ee++){const he=(ee+.5+V)/Z,Me=P.left+P.width*.1+he*P.width*.8;Y.push({x:Me,y:H,radius:2.5,lastHit:0})}}Gt.current=Y},[]),pe=Ce.useCallback(()=>{const P=ut.current,Y=[];for(let ke=0;ke<St;ke++){const H=P.left+P.width*.15+Math.random()*P.width*.7,V=P.bottom-10-Math.random()*P.height*.15;Y.push({x:H,y:V,vx:0,vy:0,radius:1.2+Math.random()*1.8,mass:.5+Math.random()*.5,hue:t-20+Math.random()*40,sat:25+Math.random()*25,lightness:35+Math.random()*20,lastBounce:0,trail:[]})}Dt.current=Y},[t]),re=Ce.useCallback(()=>{if(o.current)return;const P=new(window.AudioContext||window.webkitAudioContext);o.current=P;const Y=P.createGain();Y.gain.value=0,Y.connect(P.destination),n.current=Y,fetch("samples/rainstick-c3.m4a").then(Me=>Me.arrayBuffer()).then(Me=>P.decodeAudioData(Me)).then(Me=>{N.current=Me}).catch(()=>{});const ke=3,H=P.sampleRate,V=H*ke,Ae=P.createBuffer(2,V,H);for(let Me=0;Me<2;Me++){const nt=Ae.getChannelData(Me);for(let Ze=0;Ze<V;Ze++){const xe=Math.pow(1-Ze/V,1.8);if(nt[Ze]=(Math.random()*2-1)*xe*.4,Ze<H*.05){const Et=1-Ze/(H*.05);nt[Ze]+=Math.sin(Ze/H*Math.PI*600)*Et*.05}}}const ee=P.createConvolver();ee.buffer=Ae,z.current=ee;const he=P.createGain();he.gain.value=.35,ee.connect(he),he.connect(P.destination),Y.connect(ee),Y.gain.setTargetAtTime(.7,P.currentTime,1.5),Ye(!0)},[]),Ee=Ce.useCallback((P,Y,ke)=>{const H=o.current,V=n.current;if(!H||!V)return;H.state==="suspended"&&H.resume();const Ae=H.currentTime;if(Ae-ht.current<.008)return;ht.current=Ae;const ee=ut.current,nt=2e3+(1-(ke-ee.top)/ee.height)*5e3+Math.random()*800,Ze=.015+Math.random()*.02,xe=H.createBuffer(1,Math.round(H.sampleRate*Ze),H.sampleRate),Et=xe.getChannelData(0);for(let _e=0;_e<Et.length;_e++){const Be=_e/H.sampleRate,At=Math.exp(-Be*(40+Math.random()*30));Et[_e]=At*Y*((Math.random()*2-1)*.25+Math.sin(2*Math.PI*nt*Be)*.4+Math.sin(2*Math.PI*nt*1.5*Be)*.15)}const je=H.createBufferSource();je.buffer=xe;const ue=H.createBiquadFilter();ue.type="bandpass",ue.frequency.value=nt,ue.Q.value=1.5+Math.random()*2;const ie=H.createGain();ie.gain.value=.1+Y*.12;let We=ie;if(H.createStereoPanner){const _e=H.createStereoPanner(),Be=(P.x-ee.centerX)/ee.width*2;_e.pan.value=Math.max(-1,Math.min(1,Be)),ie.connect(_e),We=_e}je.connect(ue),ue.connect(ie),We.connect(V),je.start(Ae)},[]),oe=Ce.useCallback(P=>{const Y=o.current,ke=n.current;if(!Y||!ke)return;const H=Y.currentTime;if(H-ht.current<.005)return;ht.current=H;const Ae=Y.createBuffer(1,Math.round(Y.sampleRate*.025),Y.sampleRate),ee=Ae.getChannelData(0);for(let Ze=0;Ze<ee.length;Ze++){const xe=Ze/Y.sampleRate,Et=Math.exp(-xe*50);ee[Ze]=Et*P*.4*(Math.sin(2*Math.PI*300*xe)*.3+(Math.random()*2-1)*.5)}const he=Y.createBufferSource();he.buffer=Ae;const Me=Y.createBiquadFilter();Me.type="lowpass",Me.frequency.value=800;const nt=Y.createGain();nt.gain.value=.05+P*.06,he.connect(Me),Me.connect(nt),nt.connect(ke),he.start(H)},[]),ge=Ce.useCallback(P=>{jt.current=!0;const Y=P.beta||0,ke=P.gamma||0;ne.current.y=Math.max(-1,Math.min(1,(Y-30)/50)),ne.current.x=Math.max(-1,Math.min(1,ke/40))},[]),Oe=Ce.useCallback(()=>{typeof DeviceOrientationEvent<"u"&&typeof DeviceOrientationEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(P=>{P==="granted"&&(window.addEventListener("deviceorientation",ge),jt.current=!0)}).catch(()=>{}):"DeviceOrientationEvent"in window&&(window.addEventListener("deviceorientation",ge),jt.current=!0)},[ge]);Ce.useEffect(()=>(typeof DeviceOrientationEvent<"u"&&typeof DeviceOrientationEvent.requestPermission!="function"&&window.addEventListener("deviceorientation",ge),()=>{window.removeEventListener("deviceorientation",ge)}),[ge]);const $t=Ce.useCallback(P=>{const Y=ut.current,ke=Dt.current,H=Gt.current,V=ne.current,Ae=800,ee=V.x*Ae*.3,he=V.y*Ae+Ae*.15,Me=.988,nt=.92,Ze=.22;ke.forEach(xe=>{if(xe.vx+=ee*P*xe.mass,xe.vy+=he*P*xe.mass,xe.vx*=Me,xe.vy*=Me,xe.x+=xe.vx*P,xe.y+=xe.vy*P,Math.sqrt(xe.vx*xe.vx+xe.vy*xe.vy)>25&&(xe.trail.push({x:xe.x,y:xe.y,life:1}),xe.trail.length>5&&xe.trail.shift()),xe.trail.forEach(je=>je.life-=P*5),xe.trail=xe.trail.filter(je=>je.life>0),xe.x-xe.radius<Y.left){xe.x=Y.left+xe.radius;const je=Math.abs(xe.vx);xe.vx=-xe.vx*Ze,xe.vy*=nt,je>12&&(oe(Math.min(je/180,1)),je>30&&tn.selection())}if(xe.x+xe.radius>Y.right){xe.x=Y.right-xe.radius;const je=Math.abs(xe.vx);xe.vx=-xe.vx*Ze,xe.vy*=nt,je>12&&(oe(Math.min(je/180,1)),je>30&&tn.selection())}if(xe.y-xe.radius<Y.top){xe.y=Y.top+xe.radius;const je=Math.abs(xe.vy);xe.vy=-xe.vy*Ze,xe.vx+=(Math.random()-.5)*15,je>15&&(oe(Math.min(je/150,1)),tn.soft())}if(xe.y+xe.radius>Y.bottom){xe.y=Y.bottom-xe.radius;const je=Math.abs(xe.vy);xe.vy=-xe.vy*Ze*.4,xe.vx*=nt,je>8&&(oe(Math.min(je/180,.7)),je>25&&tn.selection())}H.forEach(je=>{const ue=xe.x-je.x,ie=xe.y-je.y,We=Math.sqrt(ue*ue+ie*ie),_e=xe.radius+je.radius;if(We<_e&&We>0){const Be=_e-We,At=ue/We,Bt=ie/We;xe.x+=At*Be,xe.y+=Bt*Be;const on=xe.vx*At+xe.vy*Bt;xe.vx-=2*on*At*(1-Ze),xe.vy-=2*on*Bt*(1-Ze),xe.vx+=(Math.random()-.5)*12,xe.vy+=(Math.random()-.5)*8;const an=Math.abs(on),un=performance.now();if(an>6&&un-xe.lastBounce>25){xe.lastBounce=un,je.lastHit=un;const hn=Math.min(an/140,1);Ee(xe,hn,je.y),hn>.3&&tn.selection(),ct(je.x,je.y,hn)}}})})},[Ee,oe]),ct=Ce.useCallback((P,Y,ke)=>{const H=1+Math.floor(ke*2);for(let V=0;V<H;V++)bt.current.push({x:P+(Math.random()-.5)*6,y:Y+(Math.random()-.5)*6,vx:(Math.random()-.5)*15*ke,vy:(Math.random()-.5)*15*ke-8,life:1,decay:.025+Math.random()*.03,size:1+Math.random()*2.5,hue:t})},[t]),Tt=Ce.useCallback((P,Y)=>{const{W:ke,H}=we.current,V=ut.current,Ae=Dt.current,ee=Gt.current,he=bt.current,Me=t;P.clearRect(0,0,ke,H);const nt=Ae.reduce((ue,ie)=>ue+Math.min(Math.sqrt(ie.vx*ie.vx+ie.vy*ie.vy)/100,1),0)/Ae.length,Ze=2+nt*3;if(P.fillStyle=`hsl(${Me}, 15%, ${Ze}%)`,P.fillRect(0,0,ke,H),nt>.01){const ue=P.createRadialGradient(ke/2,H/2,0,ke/2,H/2,Math.max(ke,H)*.6);ue.addColorStop(0,`hsla(${Me}, 35%, 40%, ${nt*.05})`),ue.addColorStop(1,"hsla(0, 0%, 0%, 0)"),P.fillStyle=ue,P.fillRect(0,0,ke,H)}const xe=V.width*.5;P.save(),P.shadowColor=`hsla(${Me}, 30%, 40%, ${.05+nt*.08})`,P.shadowBlur=25,P.beginPath(),P.roundRect(V.left-2,V.top-2,V.width+4,V.height+4,xe);const Et=P.createLinearGradient(V.left,0,V.right,0);if(Et.addColorStop(0,`hsla(${Me}, 20%, 12%, 0.6)`),Et.addColorStop(.3,`hsla(${Me}, 15%, 8%, 0.8)`),Et.addColorStop(.5,`hsla(${Me}, 10%, 5%, 0.9)`),Et.addColorStop(.7,`hsla(${Me}, 15%, 8%, 0.8)`),Et.addColorStop(1,`hsla(${Me}, 20%, 12%, 0.6)`),P.fillStyle=Et,P.fill(),P.restore(),P.beginPath(),P.roundRect(V.left,V.top,V.width,V.height,xe),P.strokeStyle=`hsla(${Me}, 35%, 45%, ${.12+nt*.12})`,P.lineWidth=1,P.stroke(),nt>.02){const ue=P.createRadialGradient(V.centerX,(V.top+V.bottom)/2,V.width*.3,V.centerX,(V.top+V.bottom)/2,V.height*.5);ue.addColorStop(0,`hsla(${Me}, 40%, 50%, ${nt*.05})`),ue.addColorStop(1,"rgba(0,0,0,0)"),P.fillStyle=ue,P.fillRect(V.left,V.top,V.width,V.height)}P.beginPath(),P.ellipse(V.centerX,V.top,V.width/2,V.width*.1,0,0,Math.PI*2),P.fillStyle=`hsla(${Me}, 15%, 15%, 0.8)`,P.fill(),P.strokeStyle=`hsla(${Me}, 30%, 40%, 0.15)`,P.lineWidth=.5,P.stroke(),P.beginPath(),P.ellipse(V.centerX,V.bottom,V.width/2,V.width*.1,0,0,Math.PI*2),P.fillStyle=`hsla(${Me}, 15%, 15%, 0.8)`,P.fill(),P.stroke();const je=performance.now();ee.forEach(ue=>{const ie=je-ue.lastHit,We=ie<250?1-ie/250:0;P.beginPath(),P.arc(ue.x,ue.y,ue.radius,0,Math.PI*2);const _e=18+We*35;if(P.fillStyle=`hsla(${Me}, 30%, ${_e}%, ${.25+We*.5})`,P.fill(),We>.01){const Be=P.createRadialGradient(ue.x,ue.y,0,ue.x,ue.y,10+We*8);Be.addColorStop(0,`hsla(${Me}, 45%, 55%, ${We*.25})`),Be.addColorStop(1,"rgba(0,0,0,0)"),P.beginPath(),P.arc(ue.x,ue.y,10+We*8,0,Math.PI*2),P.fillStyle=Be,P.fill()}}),Ae.forEach(ue=>{const ie=Math.sqrt(ue.vx*ue.vx+ue.vy*ue.vy),We=Math.min(ie/180,1);if(ue.trail.forEach(Be=>{Be.life<=0||(P.beginPath(),P.arc(Be.x,Be.y,ue.radius*.5*Be.life,0,Math.PI*2),P.fillStyle=`hsla(${ue.hue}, ${ue.sat}%, ${ue.lightness}%, ${Be.life*.12})`,P.fill())}),We>.1){const Be=P.createRadialGradient(ue.x,ue.y,0,ue.x,ue.y,ue.radius*3.5);Be.addColorStop(0,`hsla(${ue.hue}, ${ue.sat+10}%, ${ue.lightness+15}%, ${We*.12})`),Be.addColorStop(1,"hsla(0,0%,0%,0)"),P.beginPath(),P.arc(ue.x,ue.y,ue.radius*3.5,0,Math.PI*2),P.fillStyle=Be,P.fill()}P.beginPath(),P.arc(ue.x,ue.y,ue.radius,0,Math.PI*2);const _e=ue.lightness+We*18;P.fillStyle=`hsla(${ue.hue}, ${ue.sat}%, ${_e}%, ${.55+We*.3})`,P.fill()});for(let ue=he.length-1;ue>=0;ue--){const ie=he[ue];if(ie.x+=ie.vx*Y,ie.y+=ie.vy*Y,ie.vy-=12*Y,ie.life-=ie.decay,ie.life<=0){he.splice(ue,1);continue}P.beginPath(),P.arc(ie.x,ie.y,ie.size*ie.life,0,Math.PI*2),P.fillStyle=`hsla(${ie.hue}, 30%, 50%, ${ie.life*.25})`,P.fill()}},[t]),vt=Ce.useCallback(P=>{const Y=e.current;if(!Y)return;const ke=Y.getContext("2d"),{W:H,H:V}=we.current;Q.current||(Q.current=P);const Ae=Math.min((P-Q.current)/1e3,.033);Q.current=P,S.current+=Ae,!Rt.current&&S.current>2&&S.current<8?yt(!0):S.current>=8&&(yt(!1),Rt.current=!0);const ee=3,he=Ae/ee;for(let Me=0;Me<ee;Me++)$t(he);Tt(ke,Ae),ve.current=requestAnimationFrame(vt)},[$t,Tt]),d=Ce.useCallback(P=>{if(jt.current)return;tt||re();const{W:Y,H:ke}=we.current,H=P.touches?P.touches[0]:P;ne.current.x=(H.clientX/Y-.5)*2,ne.current.y=(H.clientY/ke-.5)*2},[tt,re]),Ie=Ce.useCallback(P=>{P.preventDefault(),tt?o.current&&o.current.state==="suspended"&&o.current.resume():(re(),Oe()),d(P)},[tt,re,Oe,d]);return Ce.useEffect(()=>(qe(),window.addEventListener("resize",qe),ve.current=requestAnimationFrame(vt),()=>{window.removeEventListener("resize",qe),ve.current&&cancelAnimationFrame(ve.current),o.current&&o.current.close()}),[qe,vt]),I.jsxs("div",{style:{position:"absolute",inset:0,background:"#030306",touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},children:[I.jsx("canvas",{ref:e,style:{display:"block",width:"100%",height:"100%",position:"fixed",top:0,left:0,zIndex:1},onTouchStart:Ie,onTouchMove:d,onMouseDown:Ie,onMouseMove:P=>P.buttons===1&&d(P)}),I.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:5,pointerEvents:"none",background:"radial-gradient(ellipse at 50% 50%, transparent 25%, rgba(3,3,6,0.55) 55%, rgba(3,3,6,0.98) 82%)"}}),I.jsx("div",{style:{position:"fixed",top:"6%",left:"50%",transform:"translateX(-50%)",zIndex:10,textAlign:"center",pointerEvents:"none",opacity:.7},children:I.jsx("div",{style:{fontSize:"clamp(1.4rem, 4.5vw, 2rem)",letterSpacing:"0.3em",textTransform:"lowercase",color:`hsla(${t}, 45%, 60%, 0.9)`,fontFamily:'"Jost", sans-serif',fontWeight:300},children:"rain stick"})}),I.jsx("div",{style:{position:"fixed",bottom:32,left:"50%",transform:"translateX(-50%)",zIndex:20,fontWeight:300,fontSize:12,color:`hsla(${t}, 30%, 45%, 0.5)`,letterSpacing:"0.2em",opacity:gt?.5:0,transition:"opacity 2s ease",pointerEvents:"none",textAlign:"center",fontFamily:'"Jost", sans-serif'},children:"tilt slowly"})]})}const{useState:Lt,useEffect:mn,useRef:Ne,useCallback:vn}=et,Xs=t=>1-Math.pow(1-t,4),Us=(t,e)=>{const o=[];o.push({type:"circle",x:t,y:e+20,radius:45});for(let z=0;z<6;z++){const N=-Math.PI+z/5*Math.PI,ve=50,Q=90;o.push({type:"line",x1:t+Math.cos(N)*ve,y1:e+20+Math.sin(N)*ve,x2:t+Math.cos(N)*Q,y2:e+20+Math.sin(N)*Q})}return o.push({type:"line",x1:t-130,y1:e+40,x2:t-80,y2:e-30}),o.push({type:"line",x1:t-80,y1:e-30,x2:t-50,y2:e+20}),o.push({type:"line",x1:t-50,y1:e+20,x2:t-10,y2:e-50}),o.push({type:"line",x1:t-10,y1:e-50,x2:t+30,y2:e+10}),o.push({type:"line",x1:t+30,y1:e+10,x2:t+70,y2:e-25}),o.push({type:"line",x1:t+70,y1:e-25,x2:t+130,y2:e+40}),[{x:-50,y:-80},{x:20,y:-95},{x:60,y:-75},{x:-20,y:-110}].forEach(z=>{o.push({type:"line",x1:t+z.x-12,y1:e+z.y+5,x2:t+z.x,y2:e+z.y}),o.push({type:"line",x1:t+z.x,y1:e+z.y,x2:t+z.x+12,y2:e+z.y+5})}),o.push({type:"line",x1:t-130,y1:e+40,x2:t+130,y2:e+40}),o.push({type:"dot",x:t+80,y:e-100,radius:3}),o.push({type:"dot",x:t,y:e+20,radius:8,isCenter:!0}),o},Vs=(t,e)=>{const o=[];return o.push({type:"line",x1:t-8,y1:e+80,x2:t-5,y2:e+20}),o.push({type:"line",x1:t+8,y1:e+80,x2:t+5,y2:e+20}),o.push({type:"branch",x1:t,y1:e+20,angle:-Math.PI/2-.8,length:55,curve:-.3,thickness:2}),o.push({type:"branch",x1:t,y1:e+20,angle:-Math.PI/2+.8,length:55,curve:.3,thickness:2}),o.push({type:"branch",x1:t,y1:e,angle:-Math.PI/2-.4,length:70,curve:-.2,thickness:2}),o.push({type:"branch",x1:t,y1:e,angle:-Math.PI/2+.4,length:70,curve:.2,thickness:2}),o.push({type:"branch",x1:t,y1:e-15,angle:-Math.PI/2-.15,length:50,curve:-.1,thickness:1.5}),o.push({type:"branch",x1:t,y1:e-15,angle:-Math.PI/2+.15,length:50,curve:.1,thickness:1.5}),[{x:-70,y:-40},{x:-55,y:-65},{x:-35,y:-50},{x:-45,y:-85},{x:70,y:-40},{x:55,y:-70},{x:35,y:-55},{x:50,y:-90},{x:-15,y:-75},{x:15,y:-80},{x:0,y:-95},{x:-25,y:-100},{x:25,y:-105},{x:-60,y:-80},{x:60,y:-85},{x:0,y:-65}].forEach(z=>{o.push({type:"circle",x:t+z.x,y:e+z.y,radius:10})}),o.push({type:"petal",cx:t-60,cy:e-55,angle:Math.PI*.3,innerRadius:0,outerRadius:12,width:.4}),o.push({type:"petal",cx:t+65,cy:e-55,angle:Math.PI*.7,innerRadius:0,outerRadius:12,width:.4}),o.push({type:"petal",cx:t-30,cy:e-90,angle:Math.PI*.4,innerRadius:0,outerRadius:10,width:.4}),o.push({type:"petal",cx:t+30,cy:e-95,angle:Math.PI*.6,innerRadius:0,outerRadius:10,width:.4}),o.push({type:"petal",cx:t,cy:e-110,angle:-Math.PI/2,innerRadius:0,outerRadius:8,width:.4}),o.push({type:"petal",cx:t+20,cy:e-105,angle:Math.PI*.55,innerRadius:0,outerRadius:9,width:.4}),o.push({type:"line",x1:t-50,y1:e+85,x2:t+50,y2:e+85}),o.push({type:"dot",x:t,y:e+80,radius:7,isCenter:!0}),o},_s=(t,e)=>{const o=[];for(let n=0;n<5;n++){const z=n/5*Math.PI*2-Math.PI/2;o.push({type:"petal",cx:t,cy:e,angle:z,innerRadius:15,outerRadius:40,width:.5})}for(let n=0;n<8;n++){const z=n/8*Math.PI*2-Math.PI/2;o.push({type:"petal",cx:t,cy:e,angle:z,innerRadius:45,outerRadius:95,width:.4})}return o.push({type:"line",x1:t,y1:e+50,x2:t-5,y2:e+100}),o.push({type:"line",x1:t-5,y1:e+100,x2:t-8,y2:e+140}),o.push({type:"petal",cx:t-25,cy:e+95,angle:Math.PI*.8,innerRadius:0,outerRadius:20,width:.5}),o.push({type:"petal",cx:t+15,cy:e+110,angle:Math.PI*.2,innerRadius:0,outerRadius:18,width:.5}),o.push({type:"dot",x:t+8,y:e+85,radius:2}),o.push({type:"dot",x:t-6,y:e+105,radius:2}),o.push({type:"dot",x:t,y:e,radius:6,isCenter:!0}),o},Js=(t,e)=>{const o=[];o.push({type:"line",x1:t-100,y1:e,x2:t+100,y2:e});for(let n=0;n<3;n++){const z=-Math.PI/2+(n-1)*.4;o.push({type:"petal",cx:t,cy:e-15,angle:z,innerRadius:8,outerRadius:50,width:.4})}o.push({type:"circle",x:t,y:e-15,radius:15});for(let n=0;n<3;n++){const z=Math.PI/2+(n-1)*.4;o.push({type:"petal",cx:t,cy:e+15,angle:z,innerRadius:8,outerRadius:45,width:.35})}return o.push({type:"circle",x:t,y:e+15,radius:12}),o.push({type:"circle",x:t,y:e,radius:70}),o.push({type:"circle",x:t,y:e,radius:100}),o.push({type:"dot",x:t,y:e,radius:6,isCenter:!0}),o},Ks=(t,e)=>{const o=[];return o.push({type:"line",x1:t-120,y1:e+80,x2:t-30,y2:e-60}),o.push({type:"line",x1:t-30,y1:e-60,x2:t,y2:e-100}),o.push({type:"line",x1:t,y1:e-100,x2:t+25,y2:e-55}),o.push({type:"line",x1:t+25,y1:e-55,x2:t+120,y2:e+80}),o.push({type:"line",x1:t-40,y1:e-45,x2:t-15,y2:e-70}),o.push({type:"line",x1:t-15,y1:e-70,x2:t+12,y2:e-42}),o.push({type:"line",x1:t-130,y1:e+80,x2:t-100,y2:e+30}),o.push({type:"line",x1:t+80,y1:e+40,x2:t+130,y2:e+80}),o.push({type:"line",x1:t-130,y1:e+80,x2:t+130,y2:e+80}),o.push({type:"circle",x:t-75,y:e-25,radius:12}),o.push({type:"circle",x:t+80,y:e-20,radius:11}),o.push({type:"line",x1:t-85,y1:e+80,x2:t-80,y2:e+55}),o.push({type:"line",x1:t-80,y1:e+55,x2:t-75,y2:e+80}),o.push({type:"line",x1:t+70,y1:e+80,x2:t+75,y2:e+52}),o.push({type:"line",x1:t+75,y1:e+52,x2:t+80,y2:e+80}),o.push({type:"dot",x:t-100,y:e-80,radius:2}),o.push({type:"dot",x:t+95,y:e-85,radius:2.5}),o.push({type:"dot",x:t-50,y:e-110,radius:2}),o.push({type:"dot",x:t,y:e-100,radius:7,isCenter:!0}),o},Zs=(t,e)=>{const o=[];return o.push({type:"line",x1:t-25,y1:e,x2:t-50,y2:e-25}),o.push({type:"line",x1:t-50,y1:e-25,x2:t-70,y2:e}),o.push({type:"line",x1:t-70,y1:e,x2:t-50,y2:e+25}),o.push({type:"line",x1:t-50,y1:e+25,x2:t-25,y2:e}),o.push({type:"line",x1:t+25,y1:e,x2:t+50,y2:e+25}),o.push({type:"line",x1:t+50,y1:e+25,x2:t+70,y2:e}),o.push({type:"line",x1:t+70,y1:e,x2:t+50,y2:e-25}),o.push({type:"line",x1:t+50,y1:e-25,x2:t+25,y2:e}),o.push({type:"circle",x:t,y:e,radius:40}),o.push({type:"circle",x:t,y:e,radius:65}),o.push({type:"circle",x:t,y:e,radius:90}),o.push({type:"dot",x:t,y:e-80,radius:4}),o.push({type:"dot",x:t,y:e+80,radius:4}),o.push({type:"dot",x:t-80,y:e,radius:4}),o.push({type:"dot",x:t+80,y:e,radius:4}),o.push({type:"dot",x:t,y:e,radius:6,isCenter:!0}),o},Qs=(t,e)=>{const o=[];return o.push({type:"circle",x:t,y:e,radius:85}),o.push({type:"line",x1:t,y1:e-85,x2:t,y2:e-55}),o.push({type:"line",x1:t,y1:e+85,x2:t,y2:e+55}),o.push({type:"line",x1:t-85,y1:e,x2:t-55,y2:e}),o.push({type:"line",x1:t+85,y1:e,x2:t+55,y2:e}),o.push({type:"line",x1:t,y1:e,x2:t,y2:e-45}),o.push({type:"line",x1:t,y1:e,x2:t,y2:e+30}),o.push({type:"line",x1:t-8,y1:e-35,x2:t,y2:e-50}),o.push({type:"line",x1:t+8,y1:e-35,x2:t,y2:e-50}),o.push({type:"dot",x:t,y:e-95,radius:3}),o.push({type:"dot",x:t,y:e+95,radius:2}),o.push({type:"dot",x:t-95,y:e,radius:2}),o.push({type:"dot",x:t+95,y:e,radius:2}),o.push({type:"circle",x:t,y:e,radius:25}),o.push({type:"dot",x:t,y:e,radius:6,isCenter:!0}),o},er=(t,e)=>{const o=[];return o.push({type:"line",x1:t-70,y1:e+40,x2:t-55,y2:e}),o.push({type:"line",x1:t-55,y1:e,x2:t-80,y2:e-15}),o.push({type:"line",x1:t-55,y1:e,x2:t-70,y2:e-35}),o.push({type:"line",x1:t-55,y1:e,x2:t-55,y2:e-45}),o.push({type:"line",x1:t-55,y1:e,x2:t-40,y2:e-40}),o.push({type:"line",x1:t-55,y1:e,x2:t-30,y2:e-30}),o.push({type:"line",x1:t+70,y1:e+40,x2:t+55,y2:e}),o.push({type:"line",x1:t+55,y1:e,x2:t+80,y2:e-15}),o.push({type:"line",x1:t+55,y1:e,x2:t+70,y2:e-35}),o.push({type:"line",x1:t+55,y1:e,x2:t+55,y2:e-45}),o.push({type:"line",x1:t+55,y1:e,x2:t+40,y2:e-40}),o.push({type:"line",x1:t+55,y1:e,x2:t+30,y2:e-30}),o.push({type:"dot",x:t,y:e-60,radius:5}),o.push({type:"dot",x:t-10,y:e-85,radius:4}),o.push({type:"dot",x:t+10,y:e-90,radius:4}),o.push({type:"dot",x:t,y:e-115,radius:3.5}),o.push({type:"dot",x:t,y:e+10,radius:6,isCenter:!0}),o},tr=(t,e)=>{const o=[];return o.push({type:"circle",x:t-35,y:e-50,radius:15}),o.push({type:"line",x1:t-35,y1:e-35,x2:t-35,y2:e+20}),o.push({type:"line",x1:t-35,y1:e+20,x2:t-50,y2:e+60}),o.push({type:"line",x1:t-35,y1:e+20,x2:t-20,y2:e+60}),o.push({type:"line",x1:t-35,y1:e-20,x2:t-10,y2:e-30}),o.push({type:"circle",x:t+35,y:e-50,radius:15}),o.push({type:"line",x1:t+35,y1:e-35,x2:t+35,y2:e+20}),o.push({type:"line",x1:t+35,y1:e+20,x2:t+50,y2:e+60}),o.push({type:"line",x1:t+35,y1:e+20,x2:t+20,y2:e+60}),o.push({type:"line",x1:t+35,y1:e-20,x2:t+10,y2:e-30}),o.push({type:"dot",x:t-8,y:e-32,radius:5}),o.push({type:"dot",x:t+8,y:e-32,radius:5}),o.push({type:"circle",x:t,y:e-15,radius:18}),o.push({type:"dot",x:t,y:e-55,radius:3}),o.push({type:"dot",x:t,y:e+25,radius:3}),o.push({type:"dot",x:t,y:e-15,radius:6,isCenter:!0}),o},nr=(t,e)=>{const o=[];o.push({type:"line",x1:t,y1:e-120,x2:t,y2:e-55}),o.push({type:"line",x1:t-30,y1:e-115,x2:t-15,y2:e-50}),o.push({type:"line",x1:t+30,y1:e-115,x2:t+15,y2:e-50}),o.push({type:"dot",x:t,y:e-85,radius:4}),o.push({type:"dot",x:t-15,y:e-70,radius:3}),o.push({type:"dot",x:t+15,y:e-68,radius:3});for(let n=0;n<8;n++){const z=n/8*Math.PI*2-Math.PI/2;o.push({type:"petal",cx:t,cy:e+20,angle:z,innerRadius:12,outerRadius:50,width:.38})}return o.push({type:"line",x1:t-90,y1:e+70,x2:t-20,y2:e+70}),o.push({type:"line",x1:t+20,y1:e+70,x2:t+90,y2:e+70}),o.push({type:"circle",x:t-60,y:e+60,radius:22}),o.push({type:"circle",x:t+65,y:e+55,radius:20}),o.push({type:"line",x1:t-50,y1:e+85,x2:t+50,y2:e+85}),o.push({type:"dot",x:t,y:e+20,radius:7,isCenter:!0}),o},or=(t,e)=>{const o=[];return o.push({type:"circle",x:t,y:e-35,radius:7}),o.push({type:"circle",x:t,y:e-15,radius:10}),o.push({type:"circle",x:t,y:e+10,radius:9}),o.push({type:"line",x1:t-5,y1:e-40,x2:t-20,y2:e-65}),o.push({type:"line",x1:t+5,y1:e-40,x2:t+20,y2:e-65}),o.push({type:"dot",x:t-20,y:e-65,radius:3}),o.push({type:"dot",x:t+20,y:e-65,radius:3}),o.push({type:"petal",cx:t,cy:e-20,angle:Math.PI*.72,innerRadius:12,outerRadius:65,width:.5}),o.push({type:"petal",cx:t,cy:e-20,angle:Math.PI*.28,innerRadius:12,outerRadius:65,width:.5}),o.push({type:"petal",cx:t,cy:e,angle:Math.PI*.82,innerRadius:10,outerRadius:45,width:.45}),o.push({type:"petal",cx:t,cy:e,angle:Math.PI*.18,innerRadius:10,outerRadius:45,width:.45}),o.push({type:"dot",x:t-40,y:e-30,radius:6}),o.push({type:"dot",x:t+40,y:e-30,radius:6}),o.push({type:"dot",x:t-25,y:e-15,radius:4}),o.push({type:"dot",x:t+25,y:e-15,radius:4}),o.push({type:"dot",x:t-30,y:e+15,radius:4}),o.push({type:"dot",x:t+30,y:e+15,radius:4}),o.push({type:"dot",x:t-50,y:e-45,radius:3}),o.push({type:"dot",x:t+50,y:e-45,radius:3}),o.push({type:"dot",x:t-60,y:e-70,radius:2}),o.push({type:"dot",x:t+60,y:e-70,radius:2}),o.push({type:"dot",x:t-35,y:e-85,radius:2.5}),o.push({type:"dot",x:t+35,y:e-85,radius:2.5}),o.push({type:"dot",x:t,y:e-15,radius:5,isCenter:!0}),o},ar=(t,e)=>{const o=[];for(let n=0;n<6;n++){const z=n/6*Math.PI*2-Math.PI/2,N=60,ve=t+Math.cos(z)*N,Q=e+Math.sin(z)*N,S=z+Math.PI/2;o.push({type:"circle",x:ve,y:Q,radius:10});const we=ve-Math.cos(S)*13,ut=Q-Math.sin(S)*13;o.push({type:"petal",cx:we,cy:ut,angle:S+Math.PI,innerRadius:0,outerRadius:11,width:.5})}return o.push({type:"circle",x:t,y:e,radius:25}),o.push({type:"dot",x:t-12,y:e-8,radius:3}),o.push({type:"dot",x:t+12,y:e+8,radius:3}),o.push({type:"dot",x:t,y:e,radius:6,isCenter:!0}),o},zo=[{key:"gratitude",name:"Gratitude"},{key:"self-love",name:"Acceptance"},{key:"inner-peace",name:"Inner Peace"},{key:"letting-go",name:"Letting Go"},{key:"connection",name:"Connection"},{key:"metta",name:"Metta Meditation",isMeditation:!0}],Zn=[{text:"I am grateful for this moment",category:"gratitude",words:["I","am","grateful","for","this","moment"],generate:Us},{text:"I am open to receive",category:"gratitude",words:["I","am","open","to","receive"],generate:nr},{text:"I am worthy of love",category:"self-love",words:["I","am","worthy","of","love"],generate:_s},{text:"I am loving awareness",category:"self-love",words:["I","am","loving","awareness"],generate:Zs},{text:"I accept myself completely",category:"self-love",words:["I","accept","myself","completely"],generate:tr},{text:"Peace begins within",category:"inner-peace",words:["Peace","begins","within"],generate:Js},{text:"I am calm and centered",category:"inner-peace",words:["I","am","calm","and","centered"],generate:Ks},{text:"I trust the process",category:"letting-go",words:["I","trust","the","process"],generate:Qs},{text:"I forgive and release",category:"letting-go",words:["I","forgive","and","release"],generate:er},{text:"I release what no longer serves",category:"letting-go",words:["I","release","what","no","longer","serves"],generate:or},{text:"Good fortune flows towards loved ones and I",category:"connection",words:["Good","fortune","flows","towards","loved","ones","and","I"],generate:Vs},{text:"We are all connected",category:"connection",words:["We","are","all","connected"],generate:ar}],Ga={void:{name:"Void",bg:"#000",text:"#E8E4DC",textMuted:"#7a7570",accent:"#7FDBCA",cardBg:"rgba(255,255,255,0.03)",border:"rgba(255,255,255,0.1)"},cosmos:{name:"Cosmos",bg:"#000",text:"#E4E0E8",textMuted:"#8080A0",accent:"#7FDBCA",cardBg:"rgba(255,255,255,0.03)",border:"rgba(255,255,255,0.1)"},dawn:{name:"Dawn",bg:"#000",text:"#E8E4DC",textMuted:"#7a7570",accent:"#7FDBCA",cardBg:"rgba(255,255,255,0.03)",border:"rgba(255,255,255,0.1)"}},sa={theme:"void",scrollSpeed:1,depthEffect:!0,particles:!1,reducedMotion:!1,breathMode:!1,autoAdvance:!1,autoAdvanceInterval:20,primaryHue:162},Wa=[{name:"Teal",hue:162,hex:"#7FDBCA"},{name:"Ocean",hue:195,hex:"#7FC8DB"},{name:"Violet",hue:270,hex:"#A87FDB"},{name:"Rose",hue:340,hex:"#DB7F9E"},{name:"Sage",hue:140,hex:"#7FDB9E"},{name:"Amber",hue:40,hex:"#DBC07F"}],ha={SAVED_QUOTES:"still_saved_quotes",SETTINGS:"still_settings"},sr=t=>{const e=[...t];for(let o=e.length-1;o>0;o--){const n=Math.floor(Math.random()*(o+1));[e[o],e[n]]=[e[n],e[o]]}return e},rr=()=>{try{const t=localStorage.getItem(ha.SAVED_QUOTES);return t?JSON.parse(t):[]}catch{return[]}},ir=()=>{try{const t=localStorage.getItem(ha.SETTINGS),e=t?JSON.parse(t):sa;return typeof window<"u"&&window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(e.reducedMotion=!0),e}catch{return sa}},Ha=t=>{try{localStorage.setItem(ha.SETTINGS,JSON.stringify(t))}catch{}};function hr({breathSession:t,breathTechniques:e,startBreathSession:o,stopBreathSession:n,primaryHue:z=162,primaryColor:N="hsl(162, 52%, 68%)",isActive:ve=!1}){var re,Ee;const[Q,S]=Lt(!1),[we,ut]=Lt(!1),[ne,jt]=Lt(""),[Dt,Gt]=Lt(1),[bt,ht]=Lt(!0),gt=Ne(null),yt=Ne(0),tt=Ne(null),Ye=Ne(null),Rt=Ne(null),St=Ne(!1),at=Ne(null);mn(()=>(ve&&!St.current&&(n(),Rt.current=setTimeout(()=>ut(!0),50),Ye.current=setTimeout(()=>ut(!1),2e3)),St.current=ve,()=>{Rt.current&&clearTimeout(Rt.current),Ye.current&&clearTimeout(Ye.current)}),[ve,n]);const Z=t.isActive?((Ee=(re=e[t.technique])==null?void 0:re.phases[t.phaseIndex])==null?void 0:Ee.label)||"breathe":"";mn(()=>{if(!t.isActive){jt(""),Gt(1);return}return Z!==ne&&(at.current&&clearTimeout(at.current),ne===""?(jt(Z),Gt(0),requestAnimationFrame(()=>Gt(1))):(Gt(0),at.current=setTimeout(()=>{jt(Z),requestAnimationFrame(()=>Gt(1))},300))),()=>{at.current&&clearTimeout(at.current)}},[Z,ne,t.isActive]);const qe=vn(oe=>{if(Q)return;const ge=oe.touches[0];gt.current={x:ge.clientX,y:ge.clientY,time:Date.now()}},[Q]),Ot=vn(oe=>{if(!gt.current)return;const ge=oe.changedTouches[0],Oe=ge.clientX-gt.current.x,$t=ge.clientY-gt.current.y,ct=Date.now()-gt.current.time,Tt=window.innerHeight,vt=50;$t<-vt&&Math.abs($t)>Math.abs(Oe)*1.5&&ct<500&&gt.current.y>Tt*.5&&S(!0),$t>vt&&Q&&S(!1),gt.current=null},[Q]),pe=Ne(Q);return pe.current=Q,mn(()=>{const oe=ge=>{if(pe.current)return;yt.current+=ge.deltaY,clearTimeout(tt.current),tt.current=setTimeout(()=>{yt.current=0},200),yt.current>50&&(ge.preventDefault(),S(!0),yt.current=0)};return window.addEventListener("wheel",oe,{passive:!1}),()=>window.removeEventListener("wheel",oe)},[]),I.jsxs("main",{onClick:()=>{!Q&&!t.isActive&&(tn.tap(),o(t.technique))},onTouchStart:qe,onTouchEnd:Ot,style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#000",cursor:"pointer"},children:[I.jsx(xo,{primaryHue:z,backgroundMode:!0,currentVisual:"lavaTouch",breathSession:t}),t.isActive&&ne&&bt&&I.jsx("div",{style:{position:"absolute",bottom:"20%",left:"50%",transform:"translateX(-50%)",zIndex:10,pointerEvents:"none"},children:I.jsx("div",{style:{color:"rgba(255, 255, 255, 1)",fontSize:"2rem",fontFamily:'"Jost", sans-serif',fontWeight:300,letterSpacing:"0.3em",textTransform:"lowercase",textAlign:"center",maxWidth:"80vw",textShadow:"0 2px 12px rgba(0, 0, 0, 0.9)",opacity:Dt,transform:`scale(${.95+Dt*.05})`,transition:"opacity 0.3s ease-out, transform 0.3s ease-out"},children:ne})}),Q&&I.jsxs(I.Fragment,{children:[I.jsx("div",{onClick:oe=>{oe.stopPropagation(),S(!1)},style:{position:"absolute",inset:0,background:"rgba(0, 0, 0, 0.6)",zIndex:10,animation:"fadeInBreath 0.5s ease-out"}}),I.jsxs("div",{onClick:oe=>oe.stopPropagation(),onTouchStart:oe=>oe.stopPropagation(),onTouchMove:oe=>oe.stopPropagation(),onTouchEnd:oe=>oe.stopPropagation(),style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0, 0, 0, 0.95)",borderTop:`1px solid hsla(${z}, 52%, 68%, 0.2)`,borderRadius:"1.5rem 1.5rem 0 0",zIndex:11,animation:"slideUpBreath 0.5s ease-out",maxHeight:"80vh",display:"flex",flexDirection:"column",touchAction:"auto"},children:[I.jsx("div",{style:{padding:"1rem 1.5rem 0.75rem",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.06)"},children:I.jsx("span",{style:{color:`hsla(${z}, 52%, 68%, 0.7)`,fontSize:"0.6rem",fontFamily:'"Jost", sans-serif',letterSpacing:"0.15em",textTransform:"uppercase"},children:"Breathing Techniques"})}),I.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem 1.5rem",borderBottom:"1px solid rgba(255,255,255,0.06)"},children:[I.jsx("span",{style:{color:"rgba(255,255,255,0.6)",fontSize:"0.85rem",fontFamily:'"Jost", sans-serif'},children:"Show Phase Text"}),I.jsx("button",{onClick:oe=>{oe.stopPropagation(),tn.tap(),ht(!bt)},style:{width:"48px",height:"28px",borderRadius:"14px",border:"none",background:bt?`hsla(${z}, 52%, 68%, 0.8)`:"rgba(255,255,255,0.2)",cursor:"pointer",position:"relative",transition:"background 0.3s ease"},children:I.jsx("div",{style:{position:"absolute",top:"3px",left:bt?"23px":"3px",width:"22px",height:"22px",borderRadius:"50%",background:"#fff",transition:"left 0.3s ease",boxShadow:"0 1px 3px rgba(0,0,0,0.3)"}})})]}),I.jsxs("div",{onTouchMove:oe=>oe.stopPropagation(),style:{overflowY:"auto",padding:"0.5rem 0",WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"contain"},children:[Object.entries(e).map(([oe,ge])=>I.jsxs("button",{onClick:Oe=>{Oe.stopPropagation(),tn.tap(),setTimeout(()=>{t.isActive&&n(),o(oe),S(!1)},80)},style:{display:"block",width:"100%",background:t.technique===oe?`hsla(${z}, 52%, 68%, 0.1)`:"transparent",border:"none",borderLeft:t.technique===oe?`3px solid hsla(${z}, 52%, 68%, 0.6)`:"3px solid transparent",color:t.technique===oe?`hsl(${z}, 52%, 68%)`:"rgba(255,255,255,0.6)",padding:"0.85rem 1.5rem",cursor:"pointer",fontSize:"0.85rem",fontFamily:'"Jost", sans-serif',textAlign:"left",transition:"all 0.4s ease"},children:[I.jsx("div",{style:{fontWeight:500},children:ge.name}),I.jsx("div",{style:{fontSize:"0.7rem",opacity:.6,marginTop:"0.25rem"},children:ge.description||""})]},oe)),I.jsx("div",{style:{height:"calc(8rem + env(safe-area-inset-bottom, 0px))",flexShrink:0}})]})]})]}),I.jsx("style",{children:`
        @keyframes slideUpBreath {
          from { transform: translateY(100%); }
          to { transform: translateY(0); }
        }
        @keyframes fadeInBreath {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes breathTextPulse {
          0% { opacity: 0; }
          20% { opacity: 1; }
          80% { opacity: 1; }
          100% { opacity: 0; }
        }
      `})]})}function lr({primaryHue:t=162}){const e=Ne(null),o=Ne([]),n=Ne(!1),z=Ne(null),N=Ne(null),ve=Ne(null),Q=Ne([]),[S,we]=Lt(!0),[ut,ne]=Lt(!1),[jt,Dt]=Lt(""),Gt=15e3,bt=["begin again.","this moment is enough.","let go.","the obstacle is the path. — marcus aurelius","flow like water. — lao tzu","be here now. — ram dass","what you seek is seeking you. — rumi","let go, or be dragged. — zen proverb","become who you are. — nietzsche","live to the point of tears. — camus","the wound is the place where the light enters you. — rumi","we're all just walking each other home. — ram dass","the cave you fear to enter holds the treasure you seek. — joseph campbell","when I let go of what I am, I become what I might be. — lao tzu","there is a crack in everything. that's how the light gets in. — leonard cohen","the privilege of a lifetime is being who you are. — joseph campbell"],ht=(pe,re,Ee,oe)=>`hsla(${pe}, ${re}%, ${Ee}%, ${oe})`,gt=pe=>1-Math.pow(1-pe,4),yt=(pe,re,Ee)=>pe+(re-pe)*Ee,tt=(pe,re,Ee,oe,ge)=>{const Oe=ge*ge,$t=Oe*ge;return{x:.5*(2*re.x+(-pe.x+Ee.x)*ge+(2*pe.x-5*re.x+4*Ee.x-oe.x)*Oe+(-pe.x+3*re.x-3*Ee.x+oe.x)*$t),y:.5*(2*re.y+(-pe.y+Ee.y)*ge+(2*pe.y-5*re.y+4*Ee.y-oe.y)*Oe+(-pe.y+3*re.y-3*Ee.y+oe.y)*$t)}};mn(()=>{const pe=e.current,re=pe.getContext("2d"),Ee=()=>{const oe=window.devicePixelRatio||1,ge=pe.getBoundingClientRect();pe.width=ge.width*oe,pe.height=ge.height*oe,re.scale(oe,oe)};return Ee(),window.addEventListener("resize",Ee),()=>window.removeEventListener("resize",Ee)},[]);const Ye=vn((pe,re,Ee)=>{if(re.length<2)return;const oe=[];for(let H=0;H<re.length;H++){const V=re[Math.max(0,H-1)],Ae=re[H],ee=re[Math.min(re.length-1,H+1)],he=re[Math.min(re.length-1,H+2)],Me=H===re.length-1?1:6;for(let nt=0;nt<Me;nt++){const Ze=Me===1?Ae:tt(V,Ae,ee,he,nt/Me),xe=Me===1?Ae.width:yt(Ae.width,ee.width,nt/Me),Et=(H+nt/Me)/re.length;let je=1;Et<.08?je=.15+.85*Math.pow(Et/.08,.4):Et>.82&&(je=Math.pow(1-(Et-.82)/.18,1.2));const ue=1+Math.sin(Et*25+H)*.08+Math.sin(Et*47)*.05;oe.push({x:Ze.x,y:Ze.y,width:xe*je*ue,progress:Et})}}if(oe.length<2)return;const ge=[],Oe=[],$t=re[0].x*1e3+re[0].y,ct=H=>{const V=Math.sin($t+H*9999)*1e4;return V-Math.floor(V)};for(let H=0;H<oe.length;H++){const V=oe[H],Ae=oe[Math.max(0,H-1)],ee=oe[Math.min(oe.length-1,H+1)];let he=ee.x-Ae.x,Me=ee.y-Ae.y;const nt=Math.sqrt(he*he+Me*Me)||1;he/=nt,Me/=nt;const Ze=-Me,xe=he,Et=V.width/2,je=Math.sin(H*.4+ct(H)*2)*V.width*.06+Math.sin(H*.15)*V.width*.04+Math.sin(H*.8+2)*V.width*.03;ge.push({x:V.x+Ze*(Et+je+ct(H*2)*V.width*.03),y:V.y+xe*(Et+je+ct(H*2)*V.width*.03)}),Oe.push({x:V.x-Ze*(Et-je*.7+ct(H*2+1)*V.width*.03),y:V.y-xe*(Et-je*.7+ct(H*2+1)*V.width*.03)})}for(let H=4;H>=0;H--){const V=Ee*.06*(1-H*.18);pe.beginPath(),pe.moveTo(ge[0].x,ge[0].y);for(let Ae=1;Ae<ge.length;Ae++)pe.quadraticCurveTo(ge[Ae-1].x,ge[Ae-1].y,(ge[Ae-1].x+ge[Ae].x)/2,(ge[Ae-1].y+ge[Ae].y)/2);pe.lineTo(oe[oe.length-1].x,oe[oe.length-1].y);for(let Ae=Oe.length-1;Ae>=0;Ae--)pe.quadraticCurveTo(Oe[Ae].x,Oe[Ae].y,(Oe[Ae].x+Oe[Math.max(0,Ae-1)].x)/2,(Oe[Ae].y+Oe[Math.max(0,Ae-1)].y)/2);pe.closePath(),pe.fillStyle=ht(t,60,70,V),pe.fill()}for(let H=0;H<oe.length;H+=3){const V=oe[H];if(!(V.width<3))for(let Ae=0;Ae<Math.floor(ct(H*3)*3);Ae++){const ee=ct(H*10+Ae)*Math.PI*2,he=V.width*.4+ct(H*10+Ae+100)*V.width*.3;pe.beginPath(),pe.arc(V.x+Math.cos(ee)*he,V.y+Math.sin(ee)*he,1+ct(H*10+Ae+200)*3,0,Math.PI*2),pe.fillStyle=ht(t,50,65,Ee*.15*ct(H+Ae)),pe.fill()}}pe.beginPath(),pe.moveTo(ge[0].x,ge[0].y),pe.quadraticCurveTo(oe[0].x,oe[0].y-oe[0].width*.3,Oe[0].x,Oe[0].y);for(let H=1;H<Oe.length;H++)pe.quadraticCurveTo(Oe[H-1].x,Oe[H-1].y,(Oe[H-1].x+Oe[H].x)/2,(Oe[H-1].y+Oe[H].y)/2);const Tt=oe[oe.length-1],vt=oe[oe.length-2],d=Tt.x-vt.x,Ie=Tt.y-vt.y,P=Math.sqrt(d*d+Ie*Ie)||1;pe.lineTo(Oe[Oe.length-1].x,Oe[Oe.length-1].y),pe.quadraticCurveTo(Tt.x+d/P*Tt.width*.5,Tt.y+Ie/P*Tt.width*.5,ge[ge.length-1].x,ge[ge.length-1].y);for(let H=ge.length-2;H>=0;H--)pe.quadraticCurveTo(ge[H+1].x,ge[H+1].y,(ge[H+1].x+ge[H].x)/2,(ge[H+1].y+ge[H].y)/2);pe.closePath();const Y=pe.createLinearGradient(oe[0].x,oe[0].y,oe[oe.length-1].x,oe[oe.length-1].y);Y.addColorStop(0,ht(t,50,65,Ee*.85)),Y.addColorStop(.3,ht(t,50,65,Ee*.95)),Y.addColorStop(.7,ht(t,45,55,Ee*.9)),Y.addColorStop(1,ht(t,45,55,Ee*.75)),pe.fillStyle=Y,pe.fill(),pe.save(),pe.clip();for(let H=0;H<5+Math.floor(re[0].width/4);H++){const V=(H/(5+Math.floor(re[0].width/4))-.5)*.7;pe.beginPath();for(let Ae=0;Ae<oe.length;Ae+=2){const ee=oe[Ae],he=oe[Math.max(0,Ae-2)],Me=oe[Math.min(oe.length-1,Ae+2)];let nt=Me.x-he.x,Ze=Me.y-he.y;const xe=Math.sqrt(nt*nt+Ze*Ze)||1,Et=Math.sin(Ae*.3+H*2)*ee.width*.05,je=ee.x+-Ze/xe*(ee.width*V+Et),ue=ee.y+nt/xe*(ee.width*V+Et);Ae===0?pe.moveTo(je,ue):pe.lineTo(je,ue)}pe.strokeStyle=`rgba(0,0,0,${Ee*(.08+ct(H)*.1)})`,pe.lineWidth=.5+ct(H+50),pe.stroke()}pe.restore(),pe.beginPath(),pe.ellipse(oe[0].x,oe[0].y,oe[0].width*.4,oe[0].width*.35,0,0,Math.PI*2);const ke=pe.createRadialGradient(oe[0].x,oe[0].y,0,oe[0].x,oe[0].y,oe[0].width*.4);ke.addColorStop(0,ht(t,50,65,Ee*.25)),ke.addColorStop(1,ht(t,50,65,0)),pe.fillStyle=ke,pe.fill(),pe.beginPath(),pe.moveTo(oe[0].x,oe[0].y);for(let H=1;H<oe.length;H++){const V=Math.sin(H*.5)*oe[H].width*.02;pe.quadraticCurveTo(oe[H-1].x+V,oe[H-1].y+V,(oe[H-1].x+oe[H].x)/2+V,(oe[H-1].y+oe[H].y)/2+V)}pe.strokeStyle=`rgba(255,255,255,${Ee*.2})`,pe.lineWidth=.75,pe.stroke()},[t]);mn(()=>{const pe=e.current,re=pe.getContext("2d"),Ee=pe.getBoundingClientRect(),oe=()=>{var $t;re.fillStyle="#000",re.fillRect(0,0,Ee.width,Ee.height);const ge=Date.now();let Oe=!1;o.current=o.current.filter(ct=>{const Tt=ge-ct.createdAt,vt=Gt*(.5+ct.wetness*.5);if(Tt>vt)return!1;Oe=!0;const d=1-gt(Tt/vt);return d<=.01?!1:(Ye(re,ct.points,d),!0)}),(($t=z.current)==null?void 0:$t.points.length)>1&&(Ye(re,z.current.points,1),Oe=!0),!Oe&&!S?(we(!0),Math.random()>.6&&(Dt(bt[Math.floor(Math.random()*bt.length)]),ne(!0),setTimeout(()=>ne(!1),4500))):Oe&&S&&(we(!1),ne(!1)),N.current=requestAnimationFrame(oe)};return oe(),()=>cancelAnimationFrame(N.current)},[Ye,S]);const Rt=pe=>{var re,Ee;return pe.pressure&&pe.pressure>0&&pe.pressure!==.5?pe.pressure:((Ee=(re=pe.touches)==null?void 0:re[0])==null?void 0:Ee.force)||.5},St=pe=>{var Ee,oe,ge,Oe;const re=e.current.getBoundingClientRect();return{x:(pe.clientX??((oe=(Ee=pe.touches)==null?void 0:Ee[0])==null?void 0:oe.clientX)??0)-re.left,y:(pe.clientY??((Oe=(ge=pe.touches)==null?void 0:ge[0])==null?void 0:Oe.clientY)??0)-re.top}},at=(pe,re,Ee)=>{if(!re||Ee===0)return 0;const oe=Math.sqrt(Math.pow(pe.x-re.x,2)+Math.pow(pe.y-re.y,2))/Math.max(Ee,1);return Q.current.push(oe),Q.current.length>5&&Q.current.shift(),Q.current.reduce((ge,Oe)=>ge+Oe,0)/Q.current.length},Z=pe=>{pe.preventDefault(),n.current=!0,Q.current=[];const re=St(pe),Ee=Rt(pe);z.current={points:[{...re,pressure:Ee,width:(4+Ee*28)*.4,timestamp:Date.now(),velocity:0}],wetness:.7+Math.random()*.5},ve.current={...re,timestamp:Date.now()},tn.tap()},qe=pe=>{var vt,d;if(!n.current||!z.current)return;pe.preventDefault();const re=St(pe),Ee=Rt(pe),oe=Date.now(),ge=oe-(((vt=ve.current)==null?void 0:vt.timestamp)||oe),Oe=at(re,ve.current,ge);if(ve.current&&Math.sqrt(Math.pow(re.x-ve.current.x,2)+Math.pow(re.y-ve.current.y,2))<1.5)return;const ct=(4+Ee*28)*Math.max(.35,Math.min(1.3,1.4-Oe*.12)),Tt=((d=z.current.points[z.current.points.length-1])==null?void 0:d.width)||ct;z.current.points.push({...re,pressure:Ee,width:yt(Tt,ct,.35),timestamp:oe,velocity:Oe}),z.current.wetness=Math.min(1.6,z.current.wetness+Ee*.008),ve.current={...re,timestamp:oe}},Ot=()=>{var pe;if(((pe=z.current)==null?void 0:pe.points.length)>1){const re=z.current.points[z.current.points.length-1],Ee=z.current.points[z.current.points.length-2],oe=re.x-Ee.x,ge=re.y-Ee.y;z.current.points.push({x:re.x+oe*.3,y:re.y+ge*.3,width:re.width*.4,pressure:re.pressure*.5,timestamp:Date.now()}),z.current.points.push({x:re.x+oe*.5,y:re.y+ge*.5,width:re.width*.1,pressure:re.pressure*.2,timestamp:Date.now()}),z.current.createdAt=Date.now(),o.current.push(z.current)}n.current=!1,z.current=null,ve.current=null,Q.current=[]};return I.jsxs("main",{style:{position:"absolute",inset:0,zIndex:2,background:"#000",touchAction:"none"},children:[I.jsx("canvas",{ref:e,style:{width:"100%",height:"100%",cursor:"none",touchAction:"none"},onPointerDown:Z,onPointerMove:qe,onPointerUp:Ot,onPointerLeave:Ot,onPointerCancel:Ot}),I.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"clamp(1rem, 2.5vw, 1.35rem)",color:`hsla(${t}, 50%, 65%, 0.4)`,fontFamily:'"Jost", sans-serif',fontWeight:300,letterSpacing:"0.15em",textAlign:"center",padding:"2rem",opacity:ut?1:0,transition:"opacity 3s ease-in-out",pointerEvents:"none",textTransform:"lowercase"},children:jt}),I.jsx("div",{className:"zen-hint-text",style:{position:"absolute",bottom:"2rem",left:"50%",transform:"translateX(-50%)",color:`hsla(${t}, 40%, 60%, 0.2)`,fontSize:"0.7rem",fontFamily:'"Jost", sans-serif',letterSpacing:"0.3em",textTransform:"lowercase",opacity:S&&!ut?1:0,transition:"opacity 1.5s ease",pointerEvents:"none"},children:"draw · watch it fade · begin again"}),I.jsx("style",{children:`
        @keyframes zenTextPulse {
          0% { opacity: 0; }
          20% { opacity: 1; }
          80% { opacity: 1; }
          100% { opacity: 0; }
        }
        @media (max-width: 768px) {
          .zen-hint-text { display: none !important; }
        }
      `})]})}const cr=(t,e,o=9)=>{const n=ia[t],z=e.intervals,N=[];let ve=0;for(;N.length<o&&ve<4;){for(const Q of z){const S=n*Math.pow(2,ve+Q/12);if(S<880&&(N.push(S),N.length>=o))break}ve++}return N.sort((Q,S)=>Q-S).slice(0,o)},ur=et.forwardRef(function({scale:e,onPlayNote:o,primaryHue:n,breathValue:z=.5},N){const ve=Ne(null),Q=Ne(null),S=Ne(null),we=Ne(null),ut=Ne(null),ne=Ne(null),jt=Ne([]),Dt=Ne([]),Gt=Ne(null),bt=Ne([]);Ne(null);const ht=Ne([]),gt=Ne(null),yt=Ne(null),tt=Ne(null),Ye=Ne(null),Rt=Ne(new yn(`hsl(${n}, 52%, 68%)`)),St=Ne(new yn(`hsl(${n}, 52%, 82%)`));mn(()=>{Rt.current=new yn(`hsl(${n}, 52%, 68%)`),St.current=new yn(`hsl(${n}, 52%, 82%)`),ne.current&&ne.current.traverse(qe=>{qe.material&&qe.material.visible!==!1&&qe.material.color.copy(qe.material.opacity>.55?St.current:Rt.current)})},[n]);const at=Ne(null);et.useImperativeHandle(N,()=>({handleTap:(qe,Ot)=>{if(!we.current||!S.current||!tt.current||!Ye.current)return!1;const pe=we.current.domElement.getBoundingClientRect();Ye.current.x=(qe-pe.left)/pe.width*2-1,Ye.current.y=-((Ot-pe.top)/pe.height)*2+1,tt.current.setFromCamera(Ye.current,S.current);const re=tt.current.intersectObjects(jt.current,!1);if(re.length>0){const{noteIndex:Ee,visualGroup:oe}=re[0].object.userData;return oe&&at.current&&at.current(oe),o&&(e==null?void 0:e[Ee])!==void 0&&o(Ee),!0}return!1}}),[e,o]),mn(()=>{if(!ve.current)return;const qe=ve.current,Ot=qe.clientWidth,pe=qe.clientHeight,re=new gn;re.fog=new On(0,.025),Q.current=re;const Ee=new xn(45,Ot/pe,.1,100);co.isNativePlatform()?Ee.position.set(0,8.5,6):jo?Ee.position.set(0,6,4.5):Ee.position.set(0,6,4.2),Ee.lookAt(0,0,0),S.current=Ee;const ge=new bn({antialias:!0,alpha:!0});ge.setSize(Ot,pe),ge.setPixelRatio(Math.min(window.devicePixelRatio,2)),ge.setClearColor(0,0),qe.appendChild(ge.domElement),we.current=ge;const Oe=new Va(ge);Oe.addPass(new _a(re,Ee));const $t=new eo(new cn(Ot,pe),.5,.4,.25);gt.current=$t,Oe.addPass($t),ut.current=Oe,Gt.current=new An,tt.current=new Fo,Ye.current=new cn;const ct=new Fe;re.add(ct),ne.current=ct;const Tt=Rt.current,vt=St.current,d=new De(new en(1.95,72,36,0,Math.PI*2,0,Math.PI*.48),new Le({color:Tt,wireframe:!0,transparent:!0,opacity:.18}));d.rotation.x=Math.PI,ct.add(d);const Ie=new De(new Pn(1.95,.05,16,100),new Le({color:Tt,transparent:!0,opacity:.7}));Ie.rotation.x=Math.PI/2,ct.add(Ie);const P=new Fe,Y=new De(new Un(.65,.65,.3,32),new Le({visible:!1}));Y.userData={noteIndex:0,visualGroup:P},P.add(Y),jt.current.push(Y);const ke=new De(new Pn(.55,.028,12,48),new Le({color:Tt,transparent:!0,opacity:.65}));ke.rotation.x=Math.PI/2,P.add(ke);const H=new De(new Pn(.18,.014,8,24),new Le({color:vt,transparent:!0,opacity:.6}));H.rotation.x=Math.PI/2,P.add(H),P.position.y=.08,ct.add(P);const V=8;for(let je=0;je<V;je++){const ue=-Math.PI/2+je/V*Math.PI*2,ie=new Fe,We=1-je/(V-1)*.35,_e=new De(new Un(.52*We,.52*We,.15,32),new Le({visible:!1}));_e.userData={noteIndex:je+1,visualGroup:ie},ie.add(_e),jt.current.push(_e);const Be=new De(new Pn(.46*We,.026,12,40),new Le({color:Tt,transparent:!0,opacity:.6}));Be.rotation.x=Math.PI/2,Be.scale.set(1,1.25,1),ie.add(Be);const At=new De(new Pn(.15*We,.013,8,24),new Le({color:vt,transparent:!0,opacity:.5}));At.rotation.x=Math.PI/2,At.scale.set(1,1.25,1),ie.add(At),ie.position.set(Math.cos(ue)*1.3,0,Math.sin(ue)*1.3),ie.rotation.y=-ue-Math.PI/2,ct.add(ie),Dt.current.push(ie)}const Ae=400,ee=new He,he=new Float32Array(Ae*3),Me=[];for(let je=0;je<Ae;je++){const ue=Math.random()*Math.PI*2,ie=Math.acos(2*Math.random()-1),We=25+Math.random()*35;he[je*3]=We*Math.sin(ie)*Math.cos(ue),he[je*3+1]=We*Math.sin(ie)*Math.sin(ue)*.6-5,he[je*3+2]=We*Math.cos(ie),Me.push({baseOpacity:.3+Math.random()*.5,twinkleSpeed:.5+Math.random()*2,twinklePhase:Math.random()*Math.PI*2})}ee.setAttribute("position",new Cn(he,3));const nt=new kn({color:16777215,transparent:!0,opacity:.6,size:.08,sizeAttenuation:!0,blending:Xn}),Ze=new Rn(ee,nt);Ze.userData.starData=Me,re.add(Ze),ge.domElement.style.pointerEvents="none";const xe=()=>{if(Ze.userData.starData){const je=Date.now()*.001;let ue=0;Ze.userData.starData.forEach((ie,We)=>{const _e=.5+.5*Math.sin(je*ie.twinkleSpeed+ie.twinklePhase);ue+=ie.baseOpacity*_e}),Ze.material.opacity=.4+.3*Math.sin(je*.5)}if(yt.current=requestAnimationFrame(xe),ne.current&&(ne.current.scale.setScalar(.96+z*.08),ne.current.rotation.y+=.001),gt.current&&(gt.current.strength=.35+z*.4),Gt.current){const je=Gt.current.getElapsedTime();for(let ue=bt.current.length-1;ue>=0;ue--){const ie=bt.current[ue],We=(je-ie.birth)/ie.duration;if(We>=1)ie.states.forEach(_e=>{_e.obj.material.opacity=_e.op,_e.obj.material.color.copy(_e.col)}),bt.current.splice(ue,1);else{const _e=We<.15?We/.15:1-(We-.15)/.85;ie.states.forEach(Be=>{Be.obj.material.opacity=Be.op+(1-Be.op)*_e*.7,Be.obj.material.color.copy(Be.col).lerp(St.current,_e*.8)})}}for(let ue=ht.current.length-1;ue>=0;ue--){const ie=ht.current[ue],We=(je-ie.userData.born)/ie.userData.maxAge;if(We>=1)re.remove(ie),ie.geometry.dispose(),ie.material.dispose(),ht.current.splice(ue,1);else{const _e=1+We*8;ie.scale.set(_e,_e,1),ie.position.y=-1.8-We*5,ie.material.opacity=.3*(1-We*.8)}}}Oe.render()};xe();const Et=()=>{Ee.aspect=qe.clientWidth/qe.clientHeight,Ee.updateProjectionMatrix(),ge.setSize(qe.clientWidth,qe.clientHeight),Oe.setSize(qe.clientWidth,qe.clientHeight)};return window.addEventListener("resize",Et),()=>{window.removeEventListener("resize",Et),yt.current&&cancelAnimationFrame(yt.current),ht.current.forEach(je=>{je.geometry.dispose(),je.material.dispose()}),ge&&(ge.dispose(),qe.contains(ge.domElement)&&qe.removeChild(ge.domElement))}},[]);const Z=vn(qe=>{if(!qe||!Gt.current||!Q.current)return;const Ot=[];qe.traverse(re=>{re.material&&re.material.visible!==!1&&Ot.push({obj:re,op:re.material.opacity,col:re.material.color.clone()})}),bt.current.push({mesh:qe,states:Ot,birth:Gt.current.getElapsedTime(),duration:.8}),ht.current.forEach(re=>{Q.current.remove(re),re.geometry.dispose(),re.material.dispose()}),ht.current=[];const pe=new De(new Pn(.15,.04,12,48),new Le({color:Rt.current,transparent:!0,opacity:.3,wireframe:!0}));pe.rotation.x=Math.PI/2,pe.position.y=-1.8,pe.userData={born:Gt.current.getElapsedTime(),maxAge:12},Q.current.add(pe),ht.current.push(pe)},[]);return at.current=Z,I.jsx("div",{ref:ve,style:{position:"absolute",inset:0,touchAction:"none"}})});function dr({elements:t,revealedCount:e,isComplete:o,primaryHue:n}){const z=Ne(null),N=Ne(null),ve=Ne(0),Q=Ne({});return mn(()=>{const S=z.current;if(!S)return;const we=S.getContext("2d"),ut=S.width,ne=S.height,jt=(yt,tt,Ye)=>{tt/=100,Ye/=100;const Rt=tt*Math.min(Ye,1-Ye),St=at=>{const Z=(at+yt/30)%12;return Ye-Rt*Math.max(Math.min(Z-3,9-Z,1),-1)};return[Math.round(St(0)*255),Math.round(St(8)*255),Math.round(St(4)*255)]},[Dt,Gt,bt]=jt(n,52,68),ht=yt=>`rgba(${Dt}, ${Gt}, ${bt}, ${yt})`,gt=()=>{const yt=Date.now();ve.current+=.016,we.clearRect(0,0,ut,ne);const tt=Math.sin(ve.current*1.2)*.08+.92;if(o){const Ye=ut/2,Rt=ne/2,St=we.createRadialGradient(Ye,Rt,0,Ye,Rt,180);St.addColorStop(0,ht(.08)),St.addColorStop(.5,ht(.02)),St.addColorStop(1,"transparent"),we.fillStyle=St,we.fillRect(0,0,ut,ne)}if(t.forEach((Ye,Rt)=>{if(Rt>=e&&!(Ye.isCenter&&o))return;Q.current[Rt]||(Q.current[Rt]={startTime:yt,progress:0});const St=Q.current[Rt],at=(yt-St.startTime)/1e3,Z=1.2;St.progress=Math.min(1,at/Z);const qe=Xs(St.progress),Ot=.7*qe*tt,pe=ht(Ot);if(we.strokeStyle=pe,we.fillStyle=pe,we.lineWidth=1.5,we.lineCap="round",we.lineJoin="round",Ye.type==="dot"){const re=Ye.radius*qe;we.beginPath(),we.arc(Ye.x,Ye.y,re+3,0,Math.PI*2),we.fillStyle=ht(.1*qe),we.fill(),we.beginPath(),we.arc(Ye.x,Ye.y,re,0,Math.PI*2),we.fillStyle=pe,we.fill()}else if(Ye.type==="circle"){const re=Math.PI*2*qe;we.beginPath(),we.arc(Ye.x,Ye.y,Ye.radius,-Math.PI/2,-Math.PI/2+re),we.stroke()}else if(Ye.type==="line"){const re=Ye.x1+(Ye.x2-Ye.x1)*qe,Ee=Ye.y1+(Ye.y2-Ye.y1)*qe;we.beginPath(),we.moveTo(Ye.x1,Ye.y1),we.lineTo(re,Ee),we.stroke()}else if(Ye.type==="petal"){const{cx:re,cy:Ee,angle:oe,innerRadius:ge,outerRadius:Oe,width:$t}=Ye,ct=(ge+Oe)/2,Tt=$t*qe;we.beginPath();const vt=re+Math.cos(oe)*ge,d=Ee+Math.sin(oe)*ge;we.moveTo(vt,d);const Ie=re+Math.cos(oe-Tt)*ct,P=Ee+Math.sin(oe-Tt)*ct,Y=re+Math.cos(oe)*Oe*qe,ke=Ee+Math.sin(oe)*Oe*qe;we.quadraticCurveTo(Ie,P,Y,ke);const H=re+Math.cos(oe+Tt)*ct,V=Ee+Math.sin(oe+Tt)*ct;we.quadraticCurveTo(H,V,vt,d),we.stroke()}else if(Ye.type==="wave"){const{cx:re,cy:Ee,radius:oe,amplitude:ge,frequency:Oe,phase:$t}=Ye,ct=72;we.beginPath();for(let Tt=0;Tt<=ct*qe;Tt++){const vt=Tt/ct*Math.PI*2,d=Math.sin(vt*Oe+$t+ve.current)*ge,Ie=oe+d,P=re+Math.cos(vt)*Ie,Y=Ee+Math.sin(vt)*Ie;Tt===0?we.moveTo(P,Y):we.lineTo(P,Y)}we.stroke()}else if(Ye.type==="droplet"){const{x:re,y:Ee,size:oe}=Ye,ge=oe*qe;we.beginPath(),we.moveTo(re,Ee-ge*1.5),we.bezierCurveTo(re-ge,Ee-ge*.5,re-ge,Ee+ge*.5,re,Ee+ge),we.bezierCurveTo(re+ge,Ee+ge*.5,re+ge,Ee-ge*.5,re,Ee-ge*1.5),we.stroke()}else if(Ye.type==="branch"){const{x1:re,y1:Ee,angle:oe,length:ge,curve:Oe,thickness:$t}=Ye,ct=ge*qe,Tt=re+Math.cos(oe)*ct,vt=Ee+Math.sin(oe)*ct,d=re+Math.cos(oe)*ct*.5+Math.cos(oe+Math.PI/2)*Oe*ct,Ie=Ee+Math.sin(oe)*ct*.5+Math.sin(oe+Math.PI/2)*Oe*ct;we.lineWidth=$t,we.beginPath(),we.moveTo(re,Ee),we.quadraticCurveTo(d,Ie,Tt,vt),we.stroke(),we.lineWidth=1.5}else if(Ye.type==="eyeLid"){const{cx:re,cy:Ee,radiusX:oe,radiusY:ge,isTop:Oe}=Ye,$t=36;we.beginPath();for(let ct=0;ct<=$t*qe;ct++){const Tt=ct/$t,vt=(Oe?Math.PI:0)+Tt*Math.PI,d=re+Math.cos(vt)*oe,Ie=Math.sin(Tt*Math.PI),P=Ee+(Oe?-1:1)*Ie*ge;ct===0?we.moveTo(d,P):we.lineTo(d,P)}we.stroke()}else if(Ye.type==="lash"){const{x:re,y:Ee,angle:oe,length:ge}=Ye,Oe=ge*qe;we.beginPath(),we.moveTo(re,Ee),we.lineTo(re+Math.cos(oe)*Oe,Ee+Math.sin(oe)*Oe),we.stroke()}}),o){const Ye=ut/2,Rt=ne/2,St=155+Math.sin(ve.current*1.5)*4;we.beginPath(),we.arc(Ye,Rt,St,0,Math.PI*2),we.strokeStyle=ht(.25*tt),we.lineWidth=1.5,we.stroke()}N.current=requestAnimationFrame(gt)};return gt(),()=>{N.current&&cancelAnimationFrame(N.current)}},[t,e,o,n]),mn(()=>{Q.current={}},[t]),I.jsx("canvas",{ref:z,width:350,height:350,style:{display:"block"}})}function mr({primaryHue:t=162,primaryColor:e="hsl(162, 52%, 68%)"}){var Ae;const o=()=>{try{const ee=localStorage.getItem("mantraCategory");if(ee&&zo.some(he=>he.key===ee))return ee}catch{}return"metta"},n=()=>{try{const ee=localStorage.getItem("mantraIndex");if(ee!==null){const he=parseInt(ee,10);if(!isNaN(he)&&he>=0&&he<Zn.length)return he}}catch{}return 0},[z,N]=Lt([]),[ve,Q]=Lt(0),[S,we]=Lt(!1),[ut,ne]=Lt(!1),[jt,Dt]=Lt(n),[Gt,bt]=Lt(""),[ht,gt]=Lt(0),[yt,tt]=Lt(!1),[Ye,Rt]=Lt(o),[St,at]=Lt(!1),Z=Ne(null),qe=Ne(null),Ot=Ne({x:0,y:0}),pe=Ne(0),re=Ne(null),Ee=ee=>{Ot.current={x:ee.touches[0].clientX,y:ee.touches[0].clientY}},oe=ee=>{const he=ee.changedTouches[0].clientX-Ot.current.x,Me=ee.changedTouches[0].clientY-Ot.current.y,nt=Math.abs(Me)>Math.abs(he);nt&&Me<-50&&!St&&at(!0),nt&&Me>50&&St&&at(!1)},ge=Ne(St);ge.current=St,mn(()=>{const ee=he=>{if(ge.current)return;pe.current+=he.deltaY,re.current&&clearTimeout(re.current),re.current=setTimeout(()=>{pe.current=0},200),pe.current>100&&(he.preventDefault(),at(!0),pe.current=0)};return window.addEventListener("wheel",ee,{passive:!1}),()=>window.removeEventListener("wheel",ee)},[]);const Oe=Ye==="metta"?Zn:Zn.filter(ee=>ee.category===Ye),$t=Math.max(0,Math.min(jt,Oe.length-1)),ct=Oe[$t]||Zn[0];z.filter(ee=>!ee.isCenter).length,mn(()=>{try{localStorage.setItem("mantraIndex",jt.toString())}catch{}},[jt]),mn(()=>{try{localStorage.setItem("mantraCategory",Ye)}catch{}if(Ye!=="metta"&&(Dt(0),ut)){const he=Zn.filter(Me=>Me.category===Ye)[0];if(he){const Me=he.generate(175,175);N(Me),Q(0),we(!1)}}},[Ye]),mn(()=>{if(Ye!=="metta"){const ee=Zn.filter(nt=>nt.category===Ye),he=Math.max(0,Math.min(jt,ee.length-1)),Me=ee[he]||ee[0];if(Me){const nt=Me.generate(175,175);N(nt)}}return ne(!0),qe.current=setTimeout(()=>tt(!0),50),Z.current=setTimeout(()=>tt(!1),2e3),()=>{qe.current&&clearTimeout(qe.current),Z.current&&clearTimeout(Z.current)}},[]),mn(()=>{if(ve>0){const ee=ct.words[(ve-1)%ct.words.length];gt(0);const he=setTimeout(()=>{bt(ee),gt(1)},150);return()=>clearTimeout(he)}},[ve,ct]);const Tt=(ee=!1)=>{const he=Zn.filter(Et=>Et.category===Ye),Me=Math.min(jt,he.length-1),nt=ee?(Me+1)%he.length:Me,xe=he[nt].generate(175,175);N(xe),Dt(nt),Q(0),we(!1),ne(!0)},d=ct.words.length*4,Ie=ve,P=()=>{if(tn.tap(),S){Tt(!0);return}const ee=ve+1;Q(ee),ee>=d&&(we(!0),tn.success())},Y=((Ae=zo.find(ee=>ee.key===Ye))==null?void 0:Ae.name)||"All",ke=ee=>{ee.stopPropagation(),at(!St)},H=ee=>{tn.tap(),Rt(ee),at(!1)};return Ye==="metta"?I.jsxs("div",{onTouchStart:Ee,onTouchEnd:oe,style:{position:"absolute",inset:0},children:[St&&I.jsxs(I.Fragment,{children:[I.jsx("div",{onClick:()=>at(!1),style:{position:"absolute",inset:0,background:"rgba(0, 0, 0, 0.6)",zIndex:20,animation:"fadeInMantra 0.5s ease-out"}}),I.jsxs("div",{onClick:ee=>ee.stopPropagation(),onTouchStart:ee=>ee.stopPropagation(),onTouchMove:ee=>ee.stopPropagation(),onTouchEnd:ee=>ee.stopPropagation(),style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0, 0, 0, 0.95)",borderTop:`1px solid hsla(${t}, 52%, 68%, 0.2)`,borderRadius:"1.5rem 1.5rem 0 0",zIndex:25,animation:"slideUpMantra 0.5s ease-out",maxHeight:"80vh",display:"flex",flexDirection:"column",touchAction:"auto"},children:[I.jsx("div",{style:{padding:"1rem 1.5rem 0.75rem",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.06)"},children:I.jsx("span",{style:{color:`hsla(${t}, 52%, 68%, 0.7)`,fontSize:"0.6rem",fontFamily:'"Jost", sans-serif',letterSpacing:"0.15em",textTransform:"uppercase"},children:"Meditations"})}),I.jsxs("div",{onTouchMove:ee=>ee.stopPropagation(),style:{overflowY:"auto",padding:"0.5rem 0",WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"contain"},children:[zo.map(ee=>I.jsx("button",{onClick:he=>{he.stopPropagation(),H(ee.key)},style:{display:"block",width:"100%",background:Ye===ee.key?`hsla(${t}, 52%, 68%, 0.1)`:"transparent",border:"none",borderLeft:Ye===ee.key?`3px solid hsla(${t}, 52%, 68%, 0.6)`:"3px solid transparent",color:Ye===ee.key?`hsl(${t}, 52%, 68%)`:"rgba(255,255,255,0.6)",padding:"0.85rem 1.5rem",cursor:"pointer",fontSize:"0.85rem",fontFamily:'"Jost", sans-serif',textAlign:"left",transition:"all 0.3s ease"},children:ee.name},ee.key)),I.jsx("div",{style:{height:"calc(8rem + env(safe-area-inset-bottom, 0px))",flexShrink:0}})]})]})]}),I.jsx(xo,{theme:{bg:"#000",text:"#E8E4DC",textMuted:"#7a7570",accent:"#7FDBCA"},primaryHue:t,onHueChange:()=>{},currentVisual:"heartGarden",onVisualChange:()=>{}})]}):I.jsxs("div",{onClick:P,onTouchStart:Ee,onTouchEnd:oe,style:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",cursor:"pointer",userSelect:"none",background:"#000",fontFamily:"'Jost', system-ui, sans-serif",zIndex:2},children:[I.jsx("div",{onClick:ke,style:{position:"absolute",top:"env(safe-area-inset-top, 0px)",left:"50%",transform:"translateX(-50%)",padding:"0.75rem 1.25rem",marginTop:"0.5rem",opacity:St||ve===0?.8:.3,transition:"opacity 0.3s ease"},children:I.jsx("span",{style:{fontSize:"0.75rem",letterSpacing:"0.15em",color:`hsla(${t}, 40%, 70%, 0.9)`,textTransform:"uppercase"},children:Y})}),St&&I.jsxs(I.Fragment,{children:[I.jsx("div",{onClick:()=>at(!1),style:{position:"absolute",inset:0,background:"rgba(0, 0, 0, 0.6)",zIndex:5,animation:"fadeInMantra 0.5s ease-out"}}),I.jsxs("div",{onClick:ee=>ee.stopPropagation(),onTouchStart:ee=>ee.stopPropagation(),onTouchMove:ee=>ee.stopPropagation(),onTouchEnd:ee=>ee.stopPropagation(),style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0, 0, 0, 0.95)",borderTop:`1px solid hsla(${t}, 52%, 68%, 0.2)`,borderRadius:"1.5rem 1.5rem 0 0",zIndex:10,animation:"slideUpMantra 0.5s ease-out",maxHeight:"80vh",display:"flex",flexDirection:"column",touchAction:"auto"},children:[I.jsx("div",{style:{padding:"1rem 1.5rem 0.75rem",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.06)"},children:I.jsx("span",{style:{color:`hsla(${t}, 52%, 68%, 0.7)`,fontSize:"0.6rem",fontFamily:'"Jost", sans-serif',letterSpacing:"0.15em",textTransform:"uppercase"},children:"Meditations"})}),I.jsxs("div",{onTouchMove:ee=>ee.stopPropagation(),style:{overflowY:"auto",padding:"0.5rem 0",WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"contain"},children:[zo.map(ee=>I.jsx("button",{onClick:he=>{he.stopPropagation(),H(ee.key)},style:{display:"block",width:"100%",background:Ye===ee.key?`hsla(${t}, 52%, 68%, 0.1)`:"transparent",border:"none",borderLeft:Ye===ee.key?`3px solid hsla(${t}, 52%, 68%, 0.6)`:"3px solid transparent",color:Ye===ee.key?`hsl(${t}, 52%, 68%)`:"rgba(255,255,255,0.6)",padding:"0.85rem 1.5rem",cursor:"pointer",fontSize:"0.85rem",fontFamily:'"Jost", sans-serif',textAlign:"left",transition:"all 0.3s ease"},children:ee.name},ee.key)),I.jsx("div",{style:{height:"calc(8rem + env(safe-area-inset-bottom, 0px))",flexShrink:0}})]})]})]}),I.jsx("style",{children:`
        @keyframes slideUpMantra {
          from { transform: translateY(100%); }
          to { transform: translateY(0); }
        }
        @keyframes fadeInMantra {
          from { opacity: 0; }
          to { opacity: 1; }
        }
      `}),I.jsx("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"2rem"},children:I.jsx(dr,{elements:z,revealedCount:Ie,isComplete:S,primaryHue:t})}),I.jsx("div",{style:{textAlign:"center",height:"4rem",display:"flex",alignItems:"center",justifyContent:"center"},children:ve>0&&I.jsx("span",{style:{fontSize:"1.875rem",letterSpacing:"0.1em",color:`hsla(${t}, 52%, 68%, 0.9)`,fontWeight:300,opacity:ht,transition:"opacity 0.4s ease-in-out"},children:Gt})})]})}const pr=et.forwardRef(function({primaryHue:e=162,primaryColor:o="hsl(162, 52%, 68%)",backgroundMode:n=!1,onSamplesReady:z=null,onKeyScaleChange:N=null},ve){const[Q,S]=Lt(!1),[we,ut]=Lt(!1),[ne,jt]=Lt(!1),Dt=Ne(!1),Gt=Ne(0),[bt,ht]=Lt(0),[gt,yt]=Lt(2),[tt,Ye]=Lt(3),[Rt,St]=Lt(13),[at,Z]=Lt(!1),[qe,Ot]=Lt(!1),[pe,re]=Lt("inhale"),[Ee,oe]=Lt(0),[ge,Oe]=Lt(!1),[$t,ct]=Lt(!1),Tt=Ne(!0);mn(()=>{Tt.current=$t},[$t]),mn(()=>{N&&N(tt,Rt)},[tt,Rt,N]);const vt=et.useMemo(()=>cr(Jn[tt],Qn[Rt]),[tt,Rt]),d=vn(p=>{const B=(Math.round(12*Math.log2(p/440))%12+12)%12;return["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"][B]},[]),Ie=vn((p,x)=>{const G=d(p);if(!document.getElementById("note-fade-style")){const r=document.createElement("style");r.id="note-fade-style",r.textContent=`
        @keyframes noteFadeDOM {
          0% { opacity: 0; }
          15% { opacity: 1; }
          70% { opacity: 1; }
          100% { opacity: 0; }
        }
      `,document.head.appendChild(r)}const B=document.getElementById("played-note-display");B&&B.remove();const F=document.createElement("div");F.id="played-note-display",F.textContent=G,F.style.cssText=`
      position: fixed;
      bottom: 3%;
      left: 50%;
      transform: translate(-50%, 0);
      font-size: 1.5rem;
      font-family: "Jost", sans-serif;
      font-weight: 300;
      letter-spacing: 0.3em;
      color: hsl(${x}, 52%, 68%);
      pointer-events: none;
      z-index: 9999;
      opacity: 0;
      animation: noteFadeDOM 2s ease-in-out forwards;
    `,document.body.appendChild(F),setTimeout(()=>F.remove(),2e3)},[d]);Ne([]);const P=Ne(null),Y=Ne(null),ke=Ne(null),H=Ne(null),V=Ne(null),Ae=Ne(null),ee=Ne([]),he=Ne(null),Me=Ne(null),nt=Ne(null),Ze=Ne(null),xe=Ne(null),Et=Ne(null),je=Ne(0),ue=Ne(0),ie=Ne(null),We=Ne({x:0,y:0,time:0}),_e=Ne({x:0,y:0});Ne(0);const Be=Ne(gt);Be.current=gt;const At=Ne(null),Bt=Ne(null),on=Ne(null),an=Ne([]),un=Ne(null),hn=Ne(null);Ne(null);const sn=Ne({}),ln=Ne(null),rn=Ne(null),Mn=Ne(null),pn=Ne(null),wn={inhale:4,hold:7,exhale:8},Ct=[{name:"handpan",type:"sampledHandpan"},{name:"piano",type:"sampledPiano"},{name:"guitar",type:"sampledGuitar"},{name:"synth",type:"feltPiano"},{name:"music box",type:"musicBox"},{name:"cello",type:"sampledCello"},{name:"flute",type:"organicFlute"},{name:"voice",type:"sampledVoice"},{name:"rainstick",type:"sampledRainstick"},{name:"perc",type:"sampledPerc"}],Qt=[{name:"silence",noise:0,foley:!1},{name:"rain",noise:.008,foley:!0,foleyType:"rain"},{name:"forest",noise:0,foley:!0,foleyType:"forest"},{name:"water",noise:0,foley:!0,foleyType:"water"},{name:"night",noise:0,foley:!0,foleyType:"night"}],A=vn((p=!1)=>{if(p&&Y.current){try{ee.current.forEach(s=>{if(s.osc)try{s.osc.stop()}catch{}}),ee.current=[],Y.current.close()}catch{}Y.current=null}if(Y.current)return;const x=new(window.AudioContext||window.webkitAudioContext);Y.current=x,x.resume().catch(()=>{});const G=x.createBuffer(1,x.sampleRate*.1,x.sampleRate),B=x.createBufferSource();B.buffer=G,B.connect(x.destination),B.start();const F=x.createGain();F.gain.value=.7,ke.current=F;const r=x.createGain();r.gain.value=.8,Ae.current=r,F.connect(r),r.connect(x.destination),setTimeout(()=>{const s=x.createConvolver(),D=3,E=x.sampleRate,v=E*D,U=x.createBuffer(2,v,E);let m=0;const y=()=>{if(m>=2){s.buffer=U,H.current=s;const L=x.createGain();L.gain.value=.5,V.current=L,F.connect(s),s.connect(L),L.connect(x.destination),r.gain.setTargetAtTime(.6,x.currentTime,.5);return}const T=U.getChannelData(m);for(let L=0;L<v;L++){const q=L/E,le=Math.exp(-q*3)*.3,$=Math.exp(-q*.8)*.7;T[L]=(Math.random()*2-1)*(le+$)}m++,setTimeout(y,16)};y()},500),pn.current&&pn.current.abort(),pn.current=new AbortController;const{signal:u}=pn.current;setTimeout(()=>{fetch("piano.mp3",{signal:u}).then(s=>s.arrayBuffer()).then(s=>x.decodeAudioData(s)).then(s=>{At.current=s}).catch(()=>{})},1e3),setTimeout(()=>{fetch("guitar.wav",{signal:u}).then(s=>s.arrayBuffer()).then(s=>x.decodeAudioData(s)).then(s=>{Bt.current=s}).catch(()=>{})},1500),setTimeout(()=>{fetch("harp.mp3",{signal:u}).then(s=>s.arrayBuffer()).then(s=>x.decodeAudioData(s)).then(s=>{un.current=s}).catch(()=>{})},2e3),setTimeout(()=>{fetch("cello.mp3",{signal:u}).then(s=>s.arrayBuffer()).then(s=>x.decodeAudioData(s)).then(s=>{hn.current=s}).catch(()=>{})},2500);const C=[["handpan-Cs2.wav",69.3],["handpan-Ds2.wav",77.78],["handpan-F2.wav",87.31],["handpan-As2.wav",116.54],["handpan-B2.wav",123.47],["handpan-C3.wav",130.81],["handpan-Cs3.wav",138.59],["handpan-Ds3.wav",155.56],["handpan-F3.wav",174.61],["handpan-G3.wav",196],["handpan-Gs3.wav",207.65],["handpan-C4.wav",261.63],["handpan-Ds4.wav",311.13],["handpan-F4.wav",349.23],["handpan-G4.wav",392],["handpan-Gs4.wav",415.3],["handpan-C5.wav",523.25],["handpan-Cs5.wav",554.37],["handpan-Ds5.wav",622.25],["handpan-F5.wav",698.46]];ut(!0),Gt.current=0;let c=!1;const i=([s,D])=>fetch(s,{signal:u}).then(E=>E.arrayBuffer()).then(E=>x.decodeAudioData(E)).then(E=>{if(sn.current[D]=E,Gt.current++,!c&&ke.current){c=!0;const v=x.createBufferSource();v.buffer=E;const U=x.createGain();U.gain.value=.01,v.connect(U),U.connect(x.destination),v.start(),setTimeout(()=>{try{v.stop()}catch{}},100)}Gt.current>=6&&!Dt.current&&(Dt.current=!0,jt(!0),ut(!1),z&&z())}).catch(E=>{E.name!=="AbortError"&&Gt.current++}),O=C.slice(0,6),ce=C.slice(6);Promise.all(O.map(i)).then(()=>{ce.forEach((s,D)=>{setTimeout(()=>i(s),D*100)})}),setTimeout(()=>{fetch("samples/voice-c3.m4a",{signal:u}).then(s=>s.arrayBuffer()).then(s=>x.decodeAudioData(s)).then(s=>{ln.current=s}).catch(()=>{})},3e3),setTimeout(()=>{fetch("samples/rainstick-c3.m4a",{signal:u}).then(s=>s.arrayBuffer()).then(s=>x.decodeAudioData(s)).then(s=>{rn.current=s}).catch(()=>{})},3500),setTimeout(()=>{fetch("samples/perc-c3.m4a",{signal:u}).then(s=>s.arrayBuffer()).then(s=>x.decodeAudioData(s)).then(s=>{Mn.current=s}).catch(()=>{})},4e3),h(x,F),f(x,F),Ze.current=performance.now();const M=s=>{Ze.current||(Ze.current=s);const D=wn.inhale+wn.hold+wn.exhale,E=(s-Ze.current)/1e3%D;let v,U;E<wn.inhale?(v="inhale",U=E/wn.inhale):E<wn.inhale+wn.hold?(v="hold",U=1):(v="exhale",U=1-(E-wn.inhale-wn.hold)/wn.exhale),re(v),oe(U),ee.current.forEach(m=>{const y=Tt.current?1:0,T=m.baseGain*(.4+U*.6)*y;m.gain.gain.setTargetAtTime(T,x.currentTime,.5)}),xe.current=requestAnimationFrame(M)};xe.current=requestAnimationFrame(M),S(!0)},[]);et.useImperativeHandle(ve,()=>({init:A}),[A]);const h=(p,x)=>{[{ratio:1,type:"sine",gain:.15,detune:0},{ratio:2,type:"sine",gain:.12,detune:3},{ratio:1.5,type:"sine",gain:.08,detune:-2},{ratio:3,type:"sine",gain:.05,detune:5},{ratio:4,type:"sine",gain:.03,detune:-4},{ratio:.5,type:"sine",gain:.1,detune:0},{ratio:2.01,type:"sine",gain:.04,detune:0},{ratio:1.498,type:"sine",gain:.03,detune:0}].forEach(F=>{const r=p.createOscillator(),u=p.createGain(),C=p.createStereoPanner();r.type=F.type,r.frequency.value=55*F.ratio,r.detune.value=F.detune,u.gain.value=0,C.pan.value=(Math.random()-.5)*.3,r.connect(u),u.connect(C),C.connect(x),r.start(),u.gain.setTargetAtTime(F.gain,p.currentTime,.3),ee.current.push({osc:r,gain:u,baseGain:F.gain,ratio:F.ratio})})};mn(()=>{if(!Q||!Y.current||ee.current.length===0)return;const p=Jn[tt],G=ia[p]/4;ee.current.forEach(B=>{const F=G*B.ratio;B.osc.frequency.setTargetAtTime(F,Y.current.currentTime,.5)})},[tt,Q]),mn(()=>{if(!Q||!Y.current||ee.current.length===0)return;const p=$t?1:0;ee.current.forEach(x=>{x.gain.gain.setTargetAtTime(x.baseGain*p,Y.current.currentTime,.5)})},[$t,Q]),mn(()=>{let p=!1;const x=async()=>{if(Y.current&&Y.current.state==="closed"&&(p=!0),!Y.current)return;const F=Y.current;if(F.state!=="running")try{await F.resume()}catch{p=!0}},G=()=>{p||Y.current&&Y.current.state==="closed"?(p=!1,A(!0)):x()},B=()=>{document.visibilityState==="visible"&&(Y.current&&Y.current.state==="closed"&&(p=!0),x(),setTimeout(x,100),setTimeout(x,300))};return document.addEventListener("visibilitychange",B),document.addEventListener("touchstart",G,{passive:!0}),document.addEventListener("touchend",G,{passive:!0}),document.addEventListener("click",G),window.addEventListener("focus",x),window.addEventListener("pageshow",x),()=>{document.removeEventListener("visibilitychange",B),document.removeEventListener("touchstart",G),document.removeEventListener("touchend",G),document.removeEventListener("click",G),window.removeEventListener("focus",x),window.removeEventListener("pageshow",x)}},[A]),mn(()=>{const p=on.current;if(!p)return;const x=p.getContext("2d"),G=Math.min(window.devicePixelRatio,2),B=()=>{p.width=window.innerWidth*G,p.height=window.innerHeight*G,x.scale(G,G)};B(),window.addEventListener("resize",B);const F=150,r=[];for(let c=0;c<F;c++)r.push({x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,vx:(Math.random()-.5)*.3,vy:(Math.random()-.5)*.3,size:Math.random()*1.5+.5,opacity:Math.random()*.5+.2,phase:Math.random()*Math.PI*2,twinkleSpeed:Math.random()*.02+.01});an.current=r;let u;const C=()=>{u=requestAnimationFrame(C),x.clearRect(0,0,window.innerWidth,window.innerHeight);const c=Date.now()*.001;r.forEach(i=>{i.x+=i.vx+Math.sin(c*.5+i.phase)*.1,i.y+=i.vy+Math.cos(c*.3+i.phase)*.1,i.x<0&&(i.x=window.innerWidth),i.x>window.innerWidth&&(i.x=0),i.y<0&&(i.y=window.innerHeight),i.y>window.innerHeight&&(i.y=0);const O=.5+Math.sin(c*i.twinkleSpeed*10+i.phase)*.5,ce=i.opacity*O,M=x.createRadialGradient(i.x,i.y,0,i.x,i.y,i.size*2);M.addColorStop(0,`hsla(${e}, 52%, 68%, ${ce})`),M.addColorStop(1,`hsla(${e}, 52%, 68%, 0)`),x.beginPath(),x.arc(i.x,i.y,i.size*2,0,Math.PI*2),x.fillStyle=M,x.fill()})};return C(),()=>{cancelAnimationFrame(u),window.removeEventListener("resize",B)}},[e]);const f=(p,x)=>{const G=p.sampleRate*2,B=p.createBuffer(1,G,p.sampleRate),F=B.getChannelData(0);for(let c=0;c<G;c++)F[c]=Math.random()*2-1;const r=p.createBufferSource();r.buffer=B,r.loop=!0,he.current=r;const u=p.createBiquadFilter();u.type="lowpass",u.frequency.value=2e3;const C=p.createGain();C.gain.value=Qt[0].noise,Me.current=C,r.connect(u),u.connect(C),C.connect(x),r.start(),nt.current=setInterval(()=>{const c=Qt[Be.current];c&&c.foley&&a(p,x,c.foleyType)},1500+Math.random()*2e3)},a=(p,x,G)=>{if(Math.random()>.4)return;const B=p.currentTime;if(G==="rain"){const F=p.createOscillator(),r=p.createGain();F.type="sine",F.frequency.value=1e3+Math.random()*500,F.frequency.setTargetAtTime(400+Math.random()*200,B,.02),r.gain.value=.015,r.gain.setTargetAtTime(0,B,.08),F.connect(r),r.connect(x),F.start(B),F.stop(B+.3)}else if(G==="forest")if(Math.random()>.5){const F=p.createOscillator(),r=p.createGain();F.type="sine";const u=2e3+Math.random()*1500;F.frequency.value=u,F.frequency.setTargetAtTime(u*1.2,B,.03),F.frequency.setTargetAtTime(u*.9,B+.05,.02),r.gain.value=0,r.gain.setTargetAtTime(.02,B,.01),r.gain.setTargetAtTime(0,B+.08,.03),F.connect(r),r.connect(x),F.start(B),F.stop(B+.2)}else{const F=p.createBufferSource(),r=p.createBuffer(1,p.sampleRate*.1,p.sampleRate),u=r.getChannelData(0);for(let i=0;i<u.length;i++)u[i]=(Math.random()*2-1)*Math.exp(-i/(p.sampleRate*.03));F.buffer=r;const C=p.createBiquadFilter();C.type="highpass",C.frequency.value=3e3;const c=p.createGain();c.gain.value=.01,F.connect(C),C.connect(c),c.connect(x),F.start(B)}else if(G==="water"){const F=p.createOscillator(),r=p.createGain();F.type="sine",F.frequency.value=200+Math.random()*150,F.frequency.setTargetAtTime(400+Math.random()*200,B,.03),r.gain.value=.015,r.gain.setTargetAtTime(0,B,.1),F.connect(r),r.connect(x),F.start(B),F.stop(B+.3)}else if(G==="night"&&Math.random()>.7){const F=p.createOscillator(),r=p.createGain(),u=p.createOscillator(),C=p.createGain();F.type="sine",F.frequency.value=4e3+Math.random()*1e3,u.frequency.value=30+Math.random()*20,C.gain.value=.01,u.connect(C),C.connect(r.gain),r.gain.value=.01,F.connect(r),r.connect(x),F.start(B),u.start(B),F.stop(B+.1+Math.random()*.1),u.stop(B+.2)}},b=vn((p,x=.8)=>{const G=Y.current,B=ke.current;if(!G||!B)return;const F=Ct[bt].type,r=G.currentTime;if(setTimeout(()=>{p<150?(Ln.impact({style:jn.Heavy}).catch(()=>{}),setTimeout(()=>Ln.impact({style:jn.Heavy}).catch(()=>{}),50)):p<300?Ln.impact({style:jn.Medium}).catch(()=>{}):Ln.impact({style:jn.Light}).catch(()=>{})},0),F==="sampledPiano"){if(!At.current)return;const C=p/130.81,c=G.createBufferSource();c.buffer=At.current,c.playbackRate.value=C;const i=G.createGain();i.gain.value=0,i.gain.setTargetAtTime(.8*x,r,.01),i.gain.setTargetAtTime(.5*x,r+.1,.3),i.gain.setTargetAtTime(0,r+.5,2),c.connect(i),i.connect(B),c.start(r)}else if(F==="sampledGuitar"){if(!Bt.current)return;const C=p/130.81,c=G.createBufferSource();c.buffer=Bt.current,c.playbackRate.value=C;const i=G.createGain();i.gain.value=0,i.gain.setTargetAtTime(.8*x,r,.01),i.gain.setTargetAtTime(.5*x,r+.15,.4),i.gain.setTargetAtTime(0,r+.8,2.5),c.connect(i),i.connect(B),c.start(r)}else if(F==="feltPiano"){const u=G.createOscillator(),C=G.createOscillator(),c=G.createGain(),i=G.createGain(),O=G.createBiquadFilter();C.frequency.value=p*2,c.gain.value=p*.5,C.connect(c),c.connect(u.frequency),u.type="triangle",u.frequency.value=p,O.type="lowpass",O.frequency.value=p*4,O.Q.value=.5,O.frequency.setTargetAtTime(p*1.5,r,.3),i.gain.value=0,i.gain.setTargetAtTime(.25*x,r,.01),i.gain.setTargetAtTime(.15*x,r+.1,.2),i.gain.setTargetAtTime(0,r+.3,1.5),u.connect(O),O.connect(i),i.connect(B),u.start(r),C.start(r),u.stop(r+4),C.stop(r+4)}else if(F==="musicBox"){const u=G.createOscillator(),C=G.createGain();u.type="sine",u.frequency.value=p*2,C.gain.value=0,C.gain.setTargetAtTime(.2*x,r,.001),C.gain.setTargetAtTime(0,r+.1,.6),u.connect(C),C.connect(B),u.start(r),u.stop(r+2)}else if(F==="sampledHarp"){if(!un.current)return;const C=p/130.81,c=G.createBufferSource();c.buffer=un.current,c.playbackRate.value=C;const i=G.createGain();i.gain.value=0,i.gain.setTargetAtTime(1*x,r,.01),i.gain.setTargetAtTime(.7*x,r+.1,.3),i.gain.setTargetAtTime(0,r+.5,3),c.connect(i),i.connect(B),c.start(r)}else if(F==="sampledCello"){if(!hn.current)return;const C=p/130.81,c=G.createBufferSource();c.buffer=hn.current,c.playbackRate.value=C;const i=G.createGain();i.gain.value=0,i.gain.setTargetAtTime(.7*x,r,.02),i.gain.setTargetAtTime(.5*x,r+.2,.5),i.gain.setTargetAtTime(0,r+1,3.5),c.connect(i),i.connect(B),c.start(r)}else if(F==="sampledHandpan"){const u=sn.current,C=Object.keys(u).map(Number).filter(D=>u[D]);if(C.length===0)return;let c=C[0],i=Math.abs(Math.log2(p/c));for(const D of C){const E=Math.abs(Math.log2(p/D));E<i&&(i=E,c=D)}const O=u[c];if(!O)return;const ce=p/c,M=G.createBufferSource();M.buffer=O,M.playbackRate.value=ce;const s=G.createGain();s.gain.value=0,s.gain.setTargetAtTime(.7*x,r,.003),s.gain.setTargetAtTime(.5*x,r+.15,.4),s.gain.setTargetAtTime(0,r+1,4),M.connect(s),s.connect(B),M.start(r)}else if(F==="sampledVoice"){if(!ln.current)return;const C=p/130.81,c=G.createBufferSource();c.buffer=ln.current,c.playbackRate.value=C;const i=G.createGain();i.gain.value=0,i.gain.setTargetAtTime(.5*x,r,.1),i.gain.setTargetAtTime(.4*x,r+.3,.8),i.gain.setTargetAtTime(0,r+1.5,3),c.connect(i),i.connect(B),c.start(r)}else if(F==="sampledRainstick"){if(!rn.current)return;const C=p/130.81,c=G.createBufferSource();c.buffer=rn.current,c.playbackRate.value=C;const i=G.createGain();i.gain.value=0,i.gain.setTargetAtTime(.6*x,r,.05),i.gain.setTargetAtTime(.4*x,r+.5,1),i.gain.setTargetAtTime(0,r+2,3),c.connect(i),i.connect(B),c.start(r)}else if(F==="sampledPerc"){if(!Mn.current)return;const C=p/130.81,c=G.createBufferSource();c.buffer=Mn.current,c.playbackRate.value=C;const i=G.createGain();i.gain.value=0,i.gain.setTargetAtTime(.7*x,r,.01),i.gain.setTargetAtTime(.3*x,r+.1,.3),i.gain.setTargetAtTime(0,r+.5,1.5),c.connect(i),i.connect(B),c.start(r)}else if(F==="organicFlute"){const C=G.createOscillator(),c=G.createGain();C.type="triangle",C.frequency.setValueAtTime(p*.97,r),C.frequency.exponentialRampToValueAtTime(p,r+.25);const i=G.createOscillator(),O=G.createGain();i.frequency.value=5,O.gain.setValueAtTime(0,r),O.gain.setTargetAtTime(p*.004,r+.3,.15),i.connect(O),O.connect(C.frequency),c.gain.setValueAtTime(0,r),c.gain.linearRampToValueAtTime(.05*x,r+.35),c.gain.setTargetAtTime(0,r+.5,.2);const ce=G.createOscillator(),M=G.createGain();ce.type="sine",ce.frequency.value=p*2,M.gain.setValueAtTime(0,r),M.gain.linearRampToValueAtTime(.01*x,r+.35),M.gain.setTargetAtTime(0,r+.5,.15);const s=G.sampleRate*1,D=G.createBuffer(1,s,G.sampleRate),E=D.getChannelData(0);for(let L=0;L<s;L++)E[L]=Math.random()*2-1;const v=G.createBufferSource();v.buffer=D;const U=G.createBiquadFilter();U.type="bandpass",U.frequency.value=p*1.5,U.Q.value=2;const m=G.createBiquadFilter();m.type="highpass",m.frequency.value=2e3;const y=G.createGain();y.gain.setValueAtTime(0,r),y.gain.linearRampToValueAtTime(.04*x,r+.2),y.gain.setTargetAtTime(.02*x,r+.3,.12),y.gain.setTargetAtTime(0,r+.5,.15);const T=G.createBiquadFilter();T.type="lowpass",T.frequency.value=Math.min(p*6,4e3),T.Q.value=.5,C.connect(c),ce.connect(M),c.connect(T),M.connect(T),v.connect(U),v.connect(m),U.connect(y),m.connect(y),y.connect(T),T.connect(B),C.start(r),ce.start(r),i.start(r),v.start(r),C.stop(r+1),ce.stop(r+1),i.stop(r+1),v.stop(r+1)}tn.tap()},[bt]),R=vn(p=>{yt(p),Me.current&&Y.current&&Me.current.gain.setTargetAtTime(Qt[p].noise,Y.current.currentTime,.5)},[]),w=vn(()=>{Z(!0),Et.current&&clearTimeout(Et.current),Et.current=setTimeout(()=>Z(!1),1500)},[]);mn(()=>{Q&&!n&&w()},[Q,n,w]);const J=vn(p=>{if(n||qe)return;Q||A();const x=p.touches[0].clientX,G=p.touches[0].clientY;We.current={x,y:G,time:Date.now()},_e.current={x,y:G}},[n,qe,Q,A]),K=vn(p=>{n||qe||!Q||(_e.current={x:p.touches[0].clientX,y:p.touches[0].clientY})},[n,qe,Q]),te=vn(p=>{var c;if(n||qe||!Y.current)return;const x=p.changedTouches[0].clientX,G=p.changedTouches[0].clientY,B=x-We.current.x,F=G-We.current.y,r=Date.now()-We.current.time,u=50;if((Math.abs(B)>u||Math.abs(F)>u)&&r<500)if(Math.abs(B)>Math.abs(F)){const i=B>0?-1:1;ht(O=>(O+i+Ct.length)%Ct.length),w()}else Ot(!0);else{const i=We.current.x,O=We.current.y;(c=P.current)==null||c.handleTap(i,O)}},[n,qe,b,Ee,e,gt,R,w,Ie,vt]),ae=vn(p=>{var x;n||qe||(Q||A(),Y.current&&((x=P.current)==null||x.handleTap(p.clientX,p.clientY)))},[n,qe,Q,A]);return mn(()=>{if(n)return;const p=x=>{if(!Q)return;je.current+=x.deltaX,ue.current+=x.deltaY,ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>{je.current=0,ue.current=0},200);const G=30;if(!qe&&ue.current>G&&Math.abs(ue.current)>Math.abs(je.current)){x.preventDefault(),Ot(!0),je.current=0,ue.current=0;return}if(!qe&&Math.abs(je.current)>G&&Math.abs(je.current)>Math.abs(ue.current)){x.preventDefault();const B=je.current>0?1:-1;ht(F=>(F+B+Ct.length)%Ct.length),w(),je.current=0,ue.current=0;return}if(qe){if(x.shiftKey){if(Math.abs(je.current)>Math.abs(ue.current)){if(Math.abs(je.current)>G){x.preventDefault();const B=je.current>0?1:-1;Ye(F=>(F+B+Jn.length)%Jn.length),w(),je.current=0,ue.current=0}}else if(Math.abs(ue.current)>G){x.preventDefault();const B=ue.current>0?1:-1;St(F=>(F+B+Qn.length)%Qn.length),w(),je.current=0,ue.current=0}}else if(Math.abs(je.current)>Math.abs(ue.current)){if(Math.abs(je.current)>G){x.preventDefault();const B=je.current>0?1:-1;ht(F=>(F+B+Ct.length)%Ct.length),w(),je.current=0,ue.current=0}}else if(Math.abs(ue.current)>G){x.preventDefault();const B=ue.current>0?1:-1,F=(gt+B+Qt.length)%Qt.length;R(F),w(),je.current=0,ue.current=0}}};return window.addEventListener("wheel",p,{passive:!1}),()=>window.removeEventListener("wheel",p)},[n,Q,qe,gt,R,w]),mn(()=>()=>{if(xe.current&&cancelAnimationFrame(xe.current),nt.current&&clearInterval(nt.current),Et.current&&clearTimeout(Et.current),pn.current&&pn.current.abort(),ee.current.forEach(p=>{try{p.osc&&(p.osc.disconnect(),p.osc.stop()),p.gain&&p.gain.disconnect(),p.panner&&p.panner.disconnect()}catch{}}),ee.current=[],he.current)try{he.current.disconnect(),he.current.stop()}catch{}if(ke.current)try{ke.current.disconnect()}catch{}if(H.current)try{H.current.disconnect()}catch{}if(V.current)try{V.current.disconnect()}catch{}if(Ae.current)try{Ae.current.disconnect()}catch{}if(Y.current)try{Y.current.close()}catch{}},[]),n?null:I.jsxs("main",{onClick:ae,onTouchStart:J,onTouchMove:K,onTouchEnd:te,style:{position:"absolute",inset:0,background:"#000",touchAction:"none",userSelect:"none",cursor:"pointer",overflow:"hidden"},children:[I.jsx(ur,{ref:P,scale:vt,onPlayNote:p=>{Q||A();const x=vt==null?void 0:vt[p];x&&(b(x,.6+Ee*.4),requestAnimationFrame(()=>{tn.tap(),ge&&Ie(x,e)}))},primaryHue:e,breathValue:Ee}),I.jsxs("div",{style:{position:"absolute",top:co.isNativePlatform()?"22%":"16%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",pointerEvents:"none",opacity:at?1:0,transition:"opacity 1s ease",zIndex:10},children:[I.jsx("div",{style:{fontSize:"2rem",letterSpacing:"0.3em",textTransform:"lowercase",color:"#fff",marginBottom:"0.5rem",fontWeight:300},children:Ct[bt].name}),I.jsx("div",{style:{fontSize:"0.9rem",letterSpacing:"0.3em",textTransform:"lowercase",color:"#fff"},children:Qt[gt].name}),I.jsxs("div",{style:{fontSize:"0.75rem",letterSpacing:"0.2em",textTransform:"lowercase",color:"#fff",marginTop:"0.75rem"},children:[Jn[tt].toLowerCase()," ",Qn[Rt].name]})]}),qe&&I.jsxs(I.Fragment,{children:[I.jsx("div",{onClick:()=>Ot(!1),style:{position:"absolute",inset:0,background:"rgba(0, 0, 0, 0.6)",zIndex:10,animation:"fadeInScale 0.5s ease-out"}}),I.jsxs("div",{onClick:p=>p.stopPropagation(),onTouchStart:p=>p.stopPropagation(),onTouchMove:p=>p.stopPropagation(),onTouchEnd:p=>p.stopPropagation(),style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0, 0, 0, 0.95)",borderTop:`1px solid hsla(${e}, 52%, 68%, 0.2)`,borderRadius:"1.5rem 1.5rem 0 0",zIndex:11,animation:"slideUpScale 0.5s ease-out",maxHeight:"80vh",display:"flex",flexDirection:"column",touchAction:"auto"},children:[I.jsx("div",{style:{padding:"1rem 1.5rem 0.75rem",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.06)"},children:I.jsx("span",{style:{color:`hsla(${e}, 52%, 68%, 0.7)`,fontSize:"0.6rem",fontFamily:'"Jost", sans-serif',letterSpacing:"0.15em",textTransform:"uppercase"},children:"Settings"})}),I.jsxs("div",{style:{padding:"0.75rem 1rem",borderBottom:"1px solid rgba(255,255,255,0.06)"},children:[I.jsx("div",{style:{fontSize:"0.55rem",color:"rgba(255,255,255,0.4)",fontFamily:'"Jost", sans-serif',letterSpacing:"0.1em",textTransform:"uppercase",marginBottom:"0.5rem"},children:"Texture"}),I.jsx("div",{style:{display:"flex",flexWrap:"nowrap",gap:"0.5rem",overflowX:"auto",paddingBottom:"0.25rem"},children:Qt.map((p,x)=>I.jsx("button",{onClick:()=>{R(x),w(),tn.tap()},style:{background:gt===x?`hsla(${e}, 52%, 68%, 0.2)`:"rgba(255,255,255,0.05)",border:gt===x?`1px solid hsla(${e}, 52%, 68%, 0.5)`:"1px solid rgba(255,255,255,0.1)",borderRadius:"4px",color:gt===x?`hsl(${e}, 52%, 68%)`:"rgba(255,255,255,0.6)",padding:"0.4rem 0.75rem",cursor:"pointer",fontSize:"0.75rem",fontFamily:'"Jost", sans-serif',transition:"all 0.2s ease"},children:p.name},p.name))})]}),I.jsxs("div",{style:{padding:"0.75rem 1rem",borderBottom:"1px solid rgba(255,255,255,0.06)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[I.jsx("div",{style:{fontSize:"0.55rem",color:"rgba(255,255,255,0.4)",fontFamily:'"Jost", sans-serif',letterSpacing:"0.1em",textTransform:"uppercase"},children:"Show Notes"}),I.jsx("button",{onClick:()=>{Oe(p=>!p),tn.tap()},style:{width:"44px",height:"24px",borderRadius:"12px",border:"none",background:ge?`hsla(${e}, 52%, 68%, 0.4)`:"rgba(255,255,255,0.1)",cursor:"pointer",position:"relative",transition:"background 0.2s ease"},children:I.jsx("div",{style:{width:"18px",height:"18px",borderRadius:"50%",background:ge?`hsl(${e}, 52%, 68%)`:"rgba(255,255,255,0.5)",position:"absolute",top:"3px",left:ge?"23px":"3px",transition:"all 0.2s ease",pointerEvents:"none"}})})]}),I.jsxs("div",{style:{padding:"0.75rem 1rem",borderBottom:"1px solid rgba(255,255,255,0.06)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[I.jsx("div",{style:{fontSize:"0.55rem",color:"rgba(255,255,255,0.4)",fontFamily:'"Jost", sans-serif',letterSpacing:"0.1em",textTransform:"uppercase"},children:"Ambient Drone"}),I.jsx("button",{onClick:()=>{ct(p=>!p),tn.tap()},style:{width:"44px",height:"24px",borderRadius:"12px",border:"none",background:$t?`hsla(${e}, 52%, 68%, 0.4)`:"rgba(255,255,255,0.1)",cursor:"pointer",position:"relative",transition:"background 0.2s ease"},children:I.jsx("div",{style:{width:"18px",height:"18px",borderRadius:"50%",background:$t?`hsl(${e}, 52%, 68%)`:"rgba(255,255,255,0.5)",position:"absolute",top:"3px",left:$t?"23px":"3px",transition:"all 0.2s ease",pointerEvents:"none"}})})]}),I.jsxs("div",{style:{display:"flex",flex:1,minHeight:0,overflow:"hidden"},children:[I.jsxs("div",{onTouchStart:p=>p.stopPropagation(),onTouchMove:p=>p.stopPropagation(),onTouchEnd:p=>p.stopPropagation(),style:{flex:1,borderRight:"1px solid rgba(255,255,255,0.06)",overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"contain"},children:[I.jsx("div",{style:{padding:"0.5rem 0.75rem",fontSize:"0.55rem",color:"rgba(255,255,255,0.4)",fontFamily:'"Jost", sans-serif',letterSpacing:"0.1em",textTransform:"uppercase",position:"sticky",top:0,background:"rgba(0, 0, 0, 0.95)",zIndex:1},children:"Key"}),Jn.map((p,x)=>I.jsx("button",{onClick:()=>{Ye(x),w(),tn.tap()},style:{display:"block",width:"100%",background:tt===x?`hsla(${e}, 52%, 68%, 0.15)`:"transparent",border:"none",borderLeft:tt===x?`3px solid hsla(${e}, 52%, 68%, 0.6)`:"3px solid transparent",color:tt===x?`hsl(${e}, 52%, 68%)`:"rgba(255,255,255,0.6)",padding:"0.7rem 1rem",cursor:"pointer",fontSize:"0.9rem",fontFamily:'"Jost", sans-serif',textAlign:"left",transition:"all 0.2s ease"},children:p},p)),I.jsx("div",{style:{height:"calc(8rem + env(safe-area-inset-bottom, 0px))",flexShrink:0}})]}),I.jsxs("div",{onTouchStart:p=>p.stopPropagation(),onTouchMove:p=>p.stopPropagation(),onTouchEnd:p=>p.stopPropagation(),style:{flex:2,overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch",touchAction:"pan-y",overscrollBehavior:"contain"},children:[I.jsx("div",{style:{padding:"0.5rem 0.75rem",fontSize:"0.55rem",color:"rgba(255,255,255,0.4)",fontFamily:'"Jost", sans-serif',letterSpacing:"0.1em",textTransform:"uppercase",position:"sticky",top:0,background:"rgba(0, 0, 0, 0.95)",zIndex:1},children:"Scale"}),Qn.map((p,x)=>I.jsx("button",{onClick:()=>{St(x),w(),tn.tap()},style:{display:"block",width:"100%",background:Rt===x?`hsla(${e}, 52%, 68%, 0.15)`:"transparent",border:"none",borderLeft:Rt===x?`3px solid hsla(${e}, 52%, 68%, 0.6)`:"3px solid transparent",color:Rt===x?`hsl(${e}, 52%, 68%)`:"rgba(255,255,255,0.6)",padding:"0.7rem 1rem",cursor:"pointer",fontSize:"0.85rem",fontFamily:'"Jost", sans-serif',textAlign:"left",transition:"all 0.2s ease"},children:p.name},p.name)),I.jsx("div",{style:{height:"calc(8rem + env(safe-area-inset-bottom, 0px))",flexShrink:0}})]})]})]})]}),I.jsx("style",{children:`
        @keyframes droneRipple {
          0% { transform: translate(-50%, -50%) scale(0); opacity: 0.9; }
          100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }
        }
        @keyframes droneTextPulse {
          0% { opacity: 0; }
          20% { opacity: 1; }
          80% { opacity: 1; }
          100% { opacity: 0; }
        }
        @keyframes fadeInScale {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideUpScale {
          from { transform: translateY(100%); }
          to { transform: translateY(0); }
        }
        @keyframes droneArrowPulse {
          0%, 100% { opacity: 0.7; }
          50% { opacity: 1; }
        }
        @keyframes droneArrowBounce {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-4px); }
        }
        @keyframes settingsFadeOut {
          0% { opacity: 0; }
          15% { opacity: 0.85; }
          50% { opacity: 0.85; }
          100% { opacity: 0; }
        }
        @keyframes noteFade {
          0% { opacity: 0; }
          15% { opacity: 1; }
          70% { opacity: 1; }
          100% { opacity: 0; }
        }
        @keyframes noteFadeDOM {
          0% { opacity: 0; }
          15% { opacity: 1; }
          70% { opacity: 1; }
          100% { opacity: 0; }
        }
        @keyframes gestureHintsFadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes gestureHintsFadeOut {
          from { opacity: 1; }
          to { opacity: 0; }
        }
      `})]})});function fr(){var B,F;const[t,e]=Lt(!0),[o,n]=Lt(!1),[z,N]=Lt(!1),[ve,Q]=Lt({active:!1,modeName:""}),[S,we]=Lt(1),ut=Ne(null),ne=vn(()=>{},[]),jt=vn(()=>{o||(Ln.impact({style:jn.Light}).catch(()=>{}),ut.current&&ut.current.init(),we(0),n(!0),setTimeout(()=>{e(!1),Q({active:!0,modeName:"hum"})},1200),setTimeout(()=>{Q({active:!1,modeName:""}),we(1)},3700))},[o]),[Dt,Gt]=Lt(0),[bt,ht]=Lt([]),[gt,yt]=Lt([]),[tt,Ye]=Lt("hum"),[Rt,St]=Lt(!1),[at,Z]=Lt(new Set),[qe,Ot]=Lt(new Set),[pe,re]=Lt(!1),[Ee,oe]=Lt(null),[ge,Oe]=Lt(sa),[$t,ct]=Lt(!1),[Tt,vt]=Lt(!1),[d,Ie]=Lt(!1),[P,Y]=Lt("geometry"),[ke,H]=Lt(3),[V,Ae]=Lt(13);mn(()=>{if(Tt){Ie(!1);return}let r=null;const u=setTimeout(()=>{Ie(!0),r=setTimeout(()=>Ie(!1),4e3)},5e3),C=setInterval(()=>{Tt||(Ie(!0),r=setTimeout(()=>Ie(!1),4e3))},2e4);return()=>{clearTimeout(u),clearInterval(C),r&&clearTimeout(r)}},[Tt]);const ee=vn((r,u)=>{r!==tt&&(we(0),setTimeout(()=>{Q({active:!0,modeName:u})},1500),setTimeout(()=>{Ye(r)},2500),setTimeout(()=>{Q({active:!1,modeName:""}),we(1)},4e3))},[tt]),[he,Me]=Lt(0),nt=Ne(!1),Ze=Ne([]),xe=Ne(0),Et=Ne(0),je=Ne(0),ue=Ne(null),[ie,We]=Lt(!1),_e=Ne(null),[Be,At]=Lt({technique:"calm",isActive:!1,isPaused:!1,isComplete:!1,phase:"inhale",phaseIndex:0,phaseProgress:0,cycleCount:0,sessionTime:0,totalCycles:10}),Bt=Ne(null),[on,an]=Lt(!1),[un,hn]=Lt(0),[sn,ln]=Lt(!0),rn=Ne(0);mn(()=>{let C,c=Date.now(),i=!0;const O=()=>{const ce=Date.now()-c,s=Math.min(ce/(i?5e3:6e3),1),D=i?1-Math.pow(1-s,3):Math.pow(1-s,3),E=i?D:1-D;hn(E),ln(i),s>=1&&(i=!i,c=Date.now(),i&&rn.current++),C=requestAnimationFrame(O)};return C=requestAnimationFrame(O),()=>cancelAnimationFrame(C)},[ge.breathMode]);const Mn=vn(r=>{const u=io[r];u&&(tn.medium(),At({technique:r,isActive:!0,isPaused:!1,isComplete:!1,phase:u.phases[0].name,phaseIndex:0,phaseProgress:0,cycleCount:0,sessionTime:0,totalCycles:u.recommendedCycles||10}))},[]),pn=vn(()=>{At(r=>({...r,isActive:!1,isPaused:!1,isComplete:!1})),Bt.current&&cancelAnimationFrame(Bt.current)},[]),wn=vn(()=>{At(r=>({...r,isPaused:!r.isPaused}))},[]);mn(()=>{if(!Be.isActive||Be.isPaused){Bt.current&&cancelAnimationFrame(Bt.current);return}const r=io[Be.technique];if(!r)return;let u=Date.now(),C=Be.phaseIndex,c=Be.cycleCount,i=Date.now()-Be.sessionTime*1e3;const O=()=>{const ce=Date.now(),s=r.phases[C].duration*1e3,D=ce-u,E=Math.min(D/s,1),v=(ce-i)/1e3;if(E>=1&&(C=(C+1)%r.phases.length,u=ce,C===0&&(c++,c>=Be.totalCycles))){At(U=>({...U,isActive:!1,isComplete:!0,cycleCount:c,sessionTime:Math.floor(v)}));return}At(U=>({...U,phase:r.phases[C].name,phaseIndex:C,phaseProgress:E,cycleCount:c,sessionTime:Math.floor(v)})),Bt.current=requestAnimationFrame(O)};return Bt.current=requestAnimationFrame(O),()=>{Bt.current&&cancelAnimationFrame(Bt.current)}},[Be.isActive,Be.isPaused,Be.technique,Be.totalCycles]);const Ct=Ga[ge.theme]||Ga.void,Qt=ge.primaryHue||162,A=`hsl(${Qt}, 52%, 68%)`;mn(()=>{const r=rr();ht(r),yt(sr(Ja)),Oe(ir())},[]);const h=gt.filter(r=>{const u=at.size===0||at.has(r.school),C=qe.size===0||r.themes&&r.themes.some(i=>qe.has(i)),c=!pe||bt.some(i=>i.author+"-"+i.text.substring(0,30)==r.author+"-"+r.text.substring(0,30));return u&&C&&c}),f=h[Dt%Math.max(h.length,1)];h[(Dt+1)%Math.max(h.length,1)],mn(()=>{if(f)return _e.current&&clearTimeout(_e.current),We(!1),_e.current=setTimeout(()=>{We(!0)},100),()=>{_e.current&&clearTimeout(_e.current)}},[Dt,f]);const a=vn(r=>{if(nt.current)return;const u=r>0?(Dt+1)%h.length:Math.max(0,Dt-1);u!==Dt&&(nt.current=!0,Me(r>0?1:-1),setTimeout(()=>{Gt(u),Me(0),nt.current=!1},800))},[Dt,h.length]),b=Ne(0);mn(()=>{if(!ge.breathMode||tt!=="scroll")return;const r=setInterval(()=>{rn.current>=b.current+2&&(b.current=rn.current,a(1))},1e3);return()=>clearInterval(r)},[ge.breathMode,tt,a]);const R=Ne(0),w=80,J=Ne(0),K=vn(r=>{if(!(tt!=="scroll"||nt.current)){if(r.preventDefault(),J.current+=r.deltaX,Math.abs(J.current)>w){const u=J.current>0?1:-1,c=(Fn.findIndex(i=>i.key===P)+u+Fn.length)%Fn.length;Y(Fn[c].key),tn.tap(),J.current=0;return}R.current+=r.deltaY*ge.scrollSpeed,R.current>w?(R.current=0,a(1)):R.current<-w&&(R.current=0,a(-1))}},[tt,ge.scrollSpeed,a,P,Y]),te=vn(r=>{tt==="scroll"&&(xe.current=r.touches[0].clientY,Et.current=r.touches[0].clientX,je.current=r.touches[0].clientY,Ze.current=[{y:r.touches[0].clientY,x:r.touches[0].clientX,time:Date.now()}])},[tt]),ae=vn(r=>{if(tt!=="scroll"||nt.current)return;r.preventDefault();const u=r.touches[0].clientY,C=xe.current-u;Ze.current.push({y:u,time:Date.now()}),Ze.current=Ze.current.slice(-5);const c=Math.max(-.5,Math.min(.5,C/300));Me(c),je.current=u},[tt]),p=vn(r=>{if(tt!=="scroll"||nt.current)return;const u=r.changedTouches[0].clientX,C=r.changedTouches[0].clientY,c=u-Et.current,i=xe.current-C,O=Ze.current;let ce=0;if(O.length>=2){const D=O[0],E=O[O.length-1],v=E.time-D.time;v>0&&(ce=(D.y-E.y)/v)}if(Math.abs(c)>80&&Math.abs(c)>Math.abs(i)*1.5){const D=c>0?-1:1,v=(Fn.findIndex(U=>U.key===P)+D+Fn.length)%Fn.length;Y(Fn[v].key),tn.tap(),Me(0);return}const s=Math.abs(i)>50||Math.abs(ce)>.5;s&&(i>30||ce>.3)?a(1):s&&(i<-30||ce<-.3)?a(-1):Me(0)},[tt,a,P,Y]);mn(()=>{const r=u=>{tt==="scroll"&&(u.key==="ArrowDown"||u.key===" "?(u.preventDefault(),a(1)):u.key==="ArrowUp"&&(u.preventDefault(),a(-1)))};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[tt,a]);const x=r=>{Z(u=>{const C=new Set(u);return C.has(r)?C.delete(r):C.add(r),C}),Gt(0),indexRef.current=0,physicsRef.current.position=0,physicsRef.current.velocity=0,applyTransforms(0)},G=r=>{Ot(u=>{const C=new Set(u);return C.has(r)?C.delete(r):C.add(r),C}),Gt(0),indexRef.current=0,physicsRef.current.position=0,physicsRef.current.velocity=0,applyTransforms(0)};return f?I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"landscape-overlay",children:[I.jsx("div",{className:"rotate-icon",children:"📱"}),I.jsx("div",{className:"rotate-message",children:"Please rotate to portrait"})]}),t&&I.jsxs("div",{onClick:jt,onTouchStart:jt,style:{position:"fixed",inset:0,zIndex:1e4,background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",opacity:o?0:1,transition:"opacity 1.2s ease-out"},children:[I.jsx("h1",{style:{fontSize:"clamp(2rem, 8vw, 4rem)",fontFamily:'"Jost", sans-serif',fontWeight:300,letterSpacing:"0.3em",color:"rgba(255,255,255,0.9)",margin:0},children:"Still"}),I.jsxs("p",{style:{marginTop:"3rem",fontSize:"0.9rem",fontFamily:'"Jost", sans-serif',fontWeight:300,letterSpacing:"0.25em",color:"rgba(255,255,255,0.4)",textTransform:"lowercase"},children:[I.jsx("span",{style:{opacity:0,animation:"fadeInWord 0.8s ease-out 0.3s forwards"},children:"touch "}),I.jsx("span",{style:{opacity:0,animation:"fadeInWord 0.8s ease-out 0.7s forwards"},children:"to "}),I.jsx("span",{style:{opacity:0,animation:"fadeInWord 0.8s ease-out 1.1s forwards"},children:"begin"})]}),I.jsx("style",{children:`
            @keyframes fadeInWord {
              from { opacity: 0; transform: translateY(5px); }
              to { opacity: 1; transform: translateY(0); }
            }
          `})]}),I.jsxs("div",{ref:ue,onTouchStart:te,onWheel:K,onTouchMove:ae,onTouchEnd:p,style:{minHeight:"100vh",height:"100vh",overflow:"hidden",background:Ct.bg,color:Ct.text,fontFamily:'"Jost", sans-serif',position:"relative",touchAction:tt==="scroll"?"none":"auto",transition:"background 0.5s ease"},children:[(tt==="scroll"||tt==="filter")&&I.jsx("div",{style:{opacity:.4},children:I.jsx(xo,{theme:Ct,primaryHue:ge.primaryHue,backgroundMode:!0,currentVisual:P})}),I.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(ellipse at center, transparent 0%, rgba(0,0,0,0.4) 100%)",pointerEvents:"none",zIndex:1}}),I.jsxs("header",{style:{position:"fixed",top:0,left:0,right:0,paddingTop:"calc(1.25rem + env(safe-area-inset-top, 0px))",paddingBottom:"1.25rem",paddingLeft:"calc(1.5rem + env(safe-area-inset-left, 0px))",paddingRight:"calc(1.5rem + env(safe-area-inset-right, 0px))",display:"flex",justifyContent:"space-between",alignItems:"center",background:"linear-gradient(to bottom, rgba(0,0,0,0.8) 0%, transparent 100%)",zIndex:100},children:[I.jsxs("div",{style:{position:"relative"},children:[I.jsx("h1",{onClick:()=>{tn.tap(),vt(!0),setTimeout(()=>ct(!0),80)},className:Tt?"":"still-pulse",style:{fontSize:"clamp(1.5rem, 4vw, 1.8rem)",fontFamily:'"Jost", sans-serif',fontWeight:400,letterSpacing:"0.2em",margin:0,cursor:"pointer",color:Ct.text,opacity:Tt?.9:void 0,lineHeight:1,height:"2.6rem",display:"flex",alignItems:"center"},children:"Still"}),!Tt&&I.jsx("div",{className:d?"settings-hint-show":"settings-hint-hide",style:{position:"absolute",top:"100%",left:0,fontSize:"0.55rem",fontFamily:'"Jost", sans-serif',letterSpacing:"0.1em",textTransform:"lowercase",fontWeight:300,color:`hsla(${Qt}, 52%, 68%, 0.7)`,marginTop:"0.3rem",cursor:"pointer",whiteSpace:"nowrap"},onClick:()=>{tn.tap(),vt(!0),setTimeout(()=>ct(!0),80)},children:"tap for settings"})]}),I.jsx("div",{style:{position:"relative"},children:(()=>{const r=[{key:"hum",icon:"∿",label:"Hum"},{key:"harp",icon:"𝄃",label:"Harp"},{key:"singingbowl",icon:"◠",label:"Singing Bowl"},{key:"rainstick",icon:"⋮",label:"Rain Stick"},{key:"breathwork",icon:"◎",label:"Breathe"},{key:"gaze",icon:"◯",label:"Gaze"},{key:"zenboard",icon:"∞",label:"Impermanence"}],u=r.find(C=>C.key===tt)||r[0];return I.jsxs(I.Fragment,{children:[I.jsx("button",{onClick:()=>{tn.tap(),St(!Rt)},style:{background:"transparent",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",color:Ct.text,width:"2.6rem",height:"2.6rem",cursor:"pointer",fontSize:"1.3rem",transition:"all 0.3s ease",opacity:.9,display:"flex",alignItems:"center",justifyContent:"center"},children:u.icon}),Rt&&I.jsxs(I.Fragment,{children:[I.jsx("div",{onClick:()=>St(!1),style:{position:"fixed",inset:0,zIndex:199}}),I.jsx("div",{className:"mode-menu-dropdown",style:{position:"absolute",top:"calc(100% + 0.35rem)",right:0,background:"rgba(0, 0, 0, 0.95)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",padding:"0.2rem",zIndex:200,display:"flex",flexDirection:"column",gap:"0.1rem",width:"2.6rem",animation:"menuFadeIn 0.5s ease-out"},children:r.map(({key:C,icon:c,label:i},O)=>{const ce=tt===C;return I.jsx("button",{className:"mode-menu-item",onClick:()=>{tn.tap(),St(!1),setTimeout(()=>ee(C,i),80)},style:{display:"flex",alignItems:"center",justifyContent:"center",width:"2.2rem",height:"2.2rem",padding:0,background:ce?"rgba(255, 255, 255, 0.12)":"transparent",border:"none",borderRadius:"6px",color:ce?"#fff":"rgba(255, 255, 255, 0.5)",cursor:"pointer",fontSize:"1.1rem",transition:"all 0.2s ease",opacity:0,animation:`menuItemReveal 0.6s ease-out ${O*.12}s forwards`},children:c},C)})})]})]})})()})]}),ve.active&&I.jsx("div",{style:{position:"fixed",inset:0,zIndex:50,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",background:"#000"},children:I.jsx("div",{className:"mode-transition-text",style:{fontSize:"clamp(2rem, 8vw, 4rem)",fontFamily:'"Jost", sans-serif',fontWeight:300,letterSpacing:"0.3em",color:"rgba(255, 255, 255, 0.9)",textTransform:"lowercase",animation:"modeTextSlide 2.5s ease-in-out forwards"},children:ve.modeName})}),I.jsxs("div",{style:{opacity:S,transition:"opacity 1.5s ease-in-out"},children:[tt==="zenboard"&&I.jsx(lr,{primaryHue:ge.primaryHue}),tt==="scroll"&&f&&I.jsx("main",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",zIndex:2},children:I.jsxs("div",{style:{position:"absolute",width:"100%",maxWidth:"700px",padding:"0 2rem",textAlign:"center",willChange:"transform, opacity, filter",transition:"transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease-out, filter 0.8s ease-out",opacity:Math.abs(he)>.3?0:1-Math.abs(he)*2,filter:`blur(${Math.abs(he)*12}px)`,transform:`translate3d(0, ${he*-40}px, 0) scale(${1-Math.abs(he)*.05})`},children:[I.jsx("blockquote",{style:{fontSize:"clamp(1.6rem, 6vw, 3rem)",fontFamily:'"Jost", sans-serif',fontWeight:500,lineHeight:1.6,color:Ct.text,margin:0,letterSpacing:"0.02em",textShadow:"0 2px 15px rgba(0,0,0,0.4)",opacity:ie?1:0,transform:ie?"translateY(0)":"translateY(8px)",transition:"opacity 0.8s ease-out, transform 0.8s ease-out"},children:f.text}),I.jsx("div",{className:"quote-meta",style:{marginTop:"2rem",transition:"opacity 0.8s ease-out 0.3s, transform 0.8s ease-out 0.3s",opacity:ie?Math.max(0,1-Math.abs(he)*3):0,transform:ie?"translateY(0)":"translateY(8px)"},children:I.jsx("div",{style:{fontSize:"clamp(0.9rem, 2vw, 1.1rem)",fontFamily:'"Jost", sans-serif',fontWeight:500,color:Ct.textMuted,letterSpacing:"0.1em",textTransform:"uppercase"},children:f.author})})]})}),tt==="breathe"&&I.jsxs("main",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:2,background:Be.isActive?"transparent":Ct.bg,transition:"background 0.5s ease"},children:[!Be.isActive&&I.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[I.jsx("h2",{style:{fontSize:"0.7rem",letterSpacing:"0.25em",textTransform:"uppercase",color:Ct.textMuted,marginBottom:"2rem"},children:"Choose Your Breath"}),I.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",maxWidth:"320px",margin:"0 auto"},children:Object.entries(io).map(([r,u])=>I.jsxs("button",{onClick:()=>Mn(r),style:{background:Ct.cardBg,border:`1px solid ${Ct.border}`,borderRadius:"12px",padding:"1.25rem 1.5rem",cursor:"pointer",textAlign:"left",transition:"all 0.5s ease"},children:[I.jsx("div",{style:{fontSize:"1rem",fontFamily:'"Jost", sans-serif',color:Ct.text,marginBottom:"0.25rem"},children:u.name}),I.jsx("div",{style:{fontSize:"0.75rem",color:Ct.textMuted,fontFamily:'"Jost", sans-serif'},children:u.description}),I.jsx("div",{style:{fontSize:"0.65rem",color:Ct.textMuted,marginTop:"0.5rem",opacity:.7},children:u.phases.map(C=>`${C.label} ${C.duration}s`).join(" → ")})]},r))})]}),Be.isActive&&I.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",position:"relative"},children:[I.jsx(xo,{theme:Ct,primaryHue:ge.primaryHue,backgroundMode:!1,currentVisual:"ripples"}),I.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",zIndex:10,pointerEvents:"none"},children:I.jsx("div",{style:{fontSize:"1.8rem",fontFamily:'"Jost", sans-serif',color:Ct.text,opacity:.85,letterSpacing:"0.1em",textTransform:"uppercase",textShadow:"0 2px 10px rgba(0,0,0,0.3)"},children:(F=(B=io[Be.technique])==null?void 0:B.phases[Be.phaseIndex])==null?void 0:F.label})}),I.jsxs("div",{style:{position:"absolute",bottom:"2rem",display:"flex",gap:"1rem",zIndex:10},children:[I.jsx("button",{onClick:wn,style:{background:Ct.cardBg,border:`1px solid ${Ct.border}`,color:Ct.text,padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontSize:"0.85rem",fontFamily:'"Jost", sans-serif'},children:Be.isPaused?"▶ Resume":"⏸ Pause"}),I.jsx("button",{onClick:pn,style:{background:"transparent",border:`1px solid ${Ct.border}`,color:Ct.textMuted,padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontSize:"0.85rem",fontFamily:'"Jost", sans-serif'},children:"✕ End"})]})]}),Be.isComplete&&I.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",position:"relative",padding:"2rem",textAlign:"center"},children:[I.jsx("div",{style:{position:"absolute",width:"300px",height:"300px",borderRadius:"50%",background:`radial-gradient(circle, ${Ct.accent}15 0%, transparent 70%)`,animation:"pulse 4s ease-in-out infinite"}}),I.jsx("div",{style:{fontSize:"0.7rem",letterSpacing:"0.25em",textTransform:"uppercase",color:Ct.textMuted,marginBottom:"1rem"},children:"Session Complete"}),I.jsxs("div",{style:{fontSize:"1.1rem",fontFamily:'"Jost", sans-serif',color:Ct.text,marginBottom:"0.5rem",opacity:.9},children:[Be.cycleCount," breaths · ",Math.floor(Be.sessionTime/60),":",String(Be.sessionTime%60).padStart(2,"0")]}),I.jsx("div",{style:{fontSize:"1rem",fontFamily:'"Jost", sans-serif',color:Ct.textMuted,maxWidth:"280px",lineHeight:1.6,marginTop:"2rem",marginBottom:"3rem"},children:"Consider setting your phone aside and carrying this calm with you."}),I.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",width:"100%",maxWidth:"200px"},children:[I.jsx("button",{onClick:()=>Mn(Be.technique),style:{background:Ct.cardBg,border:`1px solid ${Ct.border}`,color:Ct.text,padding:"0.85rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontSize:"0.85rem",fontFamily:'"Jost", sans-serif'},children:"Breathe Again"}),I.jsx("button",{onClick:pn,style:{background:"transparent",border:"none",color:Ct.textMuted,padding:"0.75rem 1.5rem",cursor:"pointer",fontSize:"0.8rem",fontFamily:'"Jost", sans-serif',opacity:.7},children:"Done"})]})]})]}),tt==="gaze"&&I.jsx("div",{style:{position:"absolute",inset:0},children:I.jsx(xo,{theme:Ct,primaryHue:ge.primaryHue,onHueChange:r=>{const u={...ge,primaryHue:r};Oe(u),Ha(u)},currentVisual:P,onVisualChange:Y})}),tt==="mantra"&&I.jsx(mr,{primaryHue:Qt,primaryColor:A}),tt==="singingbowl"&&I.jsx($s,{primaryHue:Qt}),tt==="rainstick"&&I.jsx(Ns,{primaryHue:Qt}),tt==="harp"&&I.jsx(qs,{primaryHue:Qt,musicKey:ke,musicScaleType:V}),I.jsx("div",{style:{position:"absolute",inset:0,opacity:tt==="breathwork"?1:0,pointerEvents:tt==="breathwork"?"auto":"none",zIndex:tt==="breathwork"?2:-1},children:I.jsx(hr,{breathSession:Be,breathTechniques:io,startBreathSession:Mn,stopBreathSession:pn,primaryHue:Qt,primaryColor:A,isActive:tt==="breathwork"})}),I.jsx("div",{style:{opacity:t?0:S,transition:"opacity 1.5s ease-out"},children:I.jsx(pr,{ref:ut,primaryHue:Qt,primaryColor:A,backgroundMode:tt!=="hum",onSamplesReady:ne,onKeyScaleChange:(r,u)=>{H(r),Ae(u)}})}),!1,tt==="filter"&&I.jsx("main",{style:{position:"absolute",top:"80px",left:0,right:0,bottom:0,zIndex:2,padding:"2rem",overflowY:"auto"},children:I.jsxs("div",{style:{maxWidth:"700px",margin:"0 auto"},children:[I.jsx("button",{onClick:()=>setTimeout(()=>re(!pe),80),style:{display:"block",margin:"0 auto 3rem",background:"transparent",border:"none",color:pe?A:Ct.textMuted,padding:"0.5rem 1rem",cursor:"pointer",fontSize:"0.85rem",transition:"all 0.5s ease",opacity:pe?1:.6,letterSpacing:"0.1em"},children:"♡ saved only"}),I.jsx("h2",{style:{fontSize:"0.7rem",letterSpacing:"0.25em",color:Ct.textMuted,marginBottom:"1.5rem",textAlign:"center",fontWeight:400},children:"schools of thought"}),at.size>0&&I.jsx("button",{onClick:()=>setTimeout(()=>Z(new Set),80),style:{display:"block",margin:"0 auto 1.5rem",background:"none",border:"none",color:`${A}80`,fontSize:"0.7rem",cursor:"pointer",letterSpacing:"0.1em"},children:"clear"}),I.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.75rem",justifyContent:"center",marginBottom:"3rem"},children:Ws.map(r=>{const u=at.has(r);return I.jsx("button",{onClick:()=>setTimeout(()=>x(r),80),style:{background:"transparent",border:"none",color:u?A:Ct.textMuted,padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.8rem",transition:"all 0.5s ease",opacity:u?1:.6,letterSpacing:"0.05em"},children:r},r)})}),I.jsx("h2",{style:{fontSize:"0.7rem",letterSpacing:"0.25em",color:Ct.textMuted,marginBottom:"1.5rem",textAlign:"center",fontWeight:400},children:"themes"}),qe.size>0&&I.jsx("button",{onClick:()=>setTimeout(()=>Ot(new Set),80),style:{display:"block",margin:"0 auto 1.5rem",background:"none",border:"none",color:`${A}80`,fontSize:"0.7rem",cursor:"pointer",letterSpacing:"0.1em"},children:"clear"}),I.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.6rem",justifyContent:"center"},children:Gs.map(r=>{const u=qe.has(r);return I.jsx("button",{onClick:()=>setTimeout(()=>G(r),80),style:{background:"transparent",border:"none",color:u?A:Ct.textMuted,padding:"0.4rem 0.6rem",cursor:"pointer",fontSize:"0.75rem",transition:"all 0.5s ease",opacity:u?1:.5,letterSpacing:"0.03em"},children:r},r)})}),I.jsx("button",{onClick:()=>setTimeout(()=>Ye("scroll"),80),style:{display:"block",margin:"3rem auto 0",background:"transparent",border:"none",color:Ct.textMuted,padding:"1rem 2rem",cursor:"pointer",fontSize:"0.75rem",letterSpacing:"0.15em",transition:"all 0.5s ease"},children:"return"})]})}),Ee&&I.jsx("div",{style:{position:"fixed",bottom:"2rem",left:"50%",transform:"translateX(-50%)",background:`${Ct.text}15`,backdropFilter:"blur(10px)",border:`1px solid ${Ct.border}`,padding:"0.75rem 1.5rem",borderRadius:"8px",color:Ct.text,fontSize:"0.85rem",zIndex:200,animation:"fadeIn 0.5s ease"},children:Ee}),$t&&I.jsxs("div",{onClick:()=>ct(!1),style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.92)",zIndex:300,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"2.5rem",animation:"colorOverlayIn 0.6s ease-out"},children:[Wa.map((r,u)=>I.jsx("button",{onClick:C=>{C.stopPropagation(),tn.tap();const c={...ge,primaryHue:r.hue};Oe(c),Ha(c),setTimeout(()=>ct(!1),500)},style:{background:"none",border:"none",color:Qt===r.hue?`hsl(${r.hue}, 52%, 68%)`:"rgba(255, 255, 255, 0.25)",fontSize:"1.1rem",fontFamily:'"Jost", sans-serif',fontWeight:300,letterSpacing:"0.3em",textTransform:"lowercase",cursor:"pointer",padding:"0.5rem 1rem",transition:"all 0.5s ease",opacity:0,animation:`colorWordIn 0.6s ease-out ${.1+u*.08}s forwards`},children:r.name},r.hue)),I.jsxs("div",{onClick:r=>r.stopPropagation(),style:{marginTop:"1rem",paddingTop:"2rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",opacity:0,animation:`colorWordIn 0.6s ease-out ${.1+Wa.length*.08}s forwards`},children:[I.jsx("div",{style:{color:"rgba(255, 255, 255, 0.3)",fontSize:"0.65rem",fontFamily:'"Jost", sans-serif',letterSpacing:"0.2em",textTransform:"uppercase",marginBottom:"1.25rem",textAlign:"center"},children:"gestures"}),I.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",color:"rgba(255, 255, 255, 0.5)",fontSize:"0.8rem",fontFamily:'"Jost", sans-serif',textAlign:"center"},children:[I.jsx("div",{children:"swipe horizontal — change sound or visual"}),I.jsx("div",{children:"swipe up — options"}),I.jsx("div",{children:"touch + drag — interact"})]}),I.jsx("div",{style:{marginTop:"1.5rem",color:`hsla(${Qt}, 52%, 68%, 0.8)`,fontSize:"1rem",fontFamily:'"Jost", sans-serif',fontWeight:300,letterSpacing:"0.15em",textAlign:"center"},children:"feel and explore"})]})]})]}),I.jsx("style",{children:`
          @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;1,400&family=Jost:wght@300;400;500&display=swap');
          * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
          html, body { overflow: hidden; }
          ::selection { background: rgba(232, 180, 184, 0.3); }
          @keyframes twinkle { 0%, 100% { opacity: 0.1; } 50% { opacity: 0.5; } }
          @keyframes scrollPulse { 0%, 100% { opacity: 0.4; transform: scaleY(1); } 50% { opacity: 0.8; transform: scaleY(1.2); } }
          @keyframes fadeIn { from { opacity: 0; transform: translate(-50%, 10px); } to { opacity: 1; transform: translate(-50%, 0); } }
          @keyframes colorOverlayIn { from { opacity: 0; } to { opacity: 1; } }
          @keyframes colorWordIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
          @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 0.5; } 50% { transform: scale(1.1); opacity: 0.8; } }
          @keyframes fadeInSmooth { from { opacity: 0; } to { opacity: 1; } }
          @keyframes stillPulse { 0%, 100% { text-shadow: 0 0 0 transparent; opacity: 0.7; transform: scale(1); } 50% { text-shadow: 0 0 15px rgba(127, 219, 202, 0.8), 0 0 30px rgba(127, 219, 202, 0.5); opacity: 1; transform: scale(1.04); } }
          .still-pulse { animation: stillPulse 3s ease-in-out infinite; display: inline-block; }
          @keyframes menuFadeIn { from { opacity: 0; transform: translateY(-8px); } to { opacity: 1; transform: translateY(0); } }
          @keyframes menuItemReveal { from { opacity: 0; transform: translateY(-6px) scale(0.9); } to { opacity: 1; transform: translateY(0) scale(1); } }
          .mode-menu-item:hover { background: rgba(255, 255, 255, 0.08) !important; }
          @keyframes modeTextSlide { 0% { opacity: 0; } 40% { opacity: 1; } 60% { opacity: 1; } 100% { opacity: 0; } }
          @keyframes settingsHintPulse { 0% { opacity: 0; transform: translateY(-5px); } 15% { opacity: 1; transform: translateY(0); } 85% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-5px); } }
          .settings-hint-show { animation: settingsHintPulse 4s ease-in-out forwards; }
          .settings-hint-hide { opacity: 0; }
          @keyframes introTitleGlow { 0%, 100% { text-shadow: 0 0 40px rgba(127, 200, 180, 0.4), 0 0 80px rgba(127, 200, 180, 0.2); } 50% { text-shadow: 0 0 60px rgba(127, 200, 180, 0.7), 0 0 120px rgba(127, 200, 180, 0.4); } }
          .intro-title-glow { animation: introTitleGlow 4s ease-in-out infinite; }
          @keyframes introTouchPulse { 0%, 100% { opacity: 0.4; } 50% { opacity: 0.7; } }
          .intro-touch-pulse { animation: introTouchPulse 2.5s ease-in-out infinite; }
          ::-webkit-scrollbar { width: 4px; }
          ::-webkit-scrollbar-track { background: transparent; }
          ::-webkit-scrollbar-thumb { background: rgba(128,128,128,0.3); border-radius: 2px; }
          .nav-label { display: none; }
          button:hover { filter: brightness(1.1); }
          input[type="range"] {
            -webkit-appearance: none;
            height: 4px;
            border-radius: 2px;
            background: rgba(128,128,128,0.3);
          }
          input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #E8E6E3;
            cursor: pointer;
          }
        `})]})]}):I.jsx("div",{style:{background:Ct.bg,color:Ct.text,height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:"Loading..."})}const yr=oa.createRoot(document.getElementById("root"));yr.render(I.jsx(et.StrictMode,{children:I.jsx(fr,{})}));export{jn as I,aa as N,Na as W};
